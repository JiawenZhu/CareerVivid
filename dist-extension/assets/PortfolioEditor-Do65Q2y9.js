const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eye-off-eUDXhHXq.js","assets/main-BEc7sVU2.js"])))=>i.map(i=>d[i]);
import{m as ce,f as _,n as Me,j as e,r as f,R as q,q as Le,w as ye,v as kt,C as wt,e as te,L as Te,z as Nt,p as tt,_ as We,D as St,T as Ct,u as It,x as Bt,a1 as $t,l as zt,o as be,d as Pt}from"./main-BEc7sVU2.js";import{u as Mt}from"./useResumes-C_g1Kxnt.js";import{u as rt}from"./storageService-DclJIdxx.js";import{g as Lt,L as R}from"./index-DZXmDlCI.js";import{u as Tt}from"./useAICreditCheck-BiAjIaoo.js";import{C as At}from"./chevron-left-fFcpqHUE.js";import{M as st}from"./monitor-DnVXU59Y.js";import{S as it}from"./smartphone-BeLO5XxV.js";import{S as Et,M as Ft}from"./sun-BCC2DW0J.js";import{X as ae}from"./x-CgpMcjbW.js";import{S as nt}from"./store-BElqzBKt.js";import{B as Ae}from"./bar-chart-3-Bibb30BA.js";import{S as _t}from"./share-2-DwMXQtQg.js";import{T as Be,C as Rt,G as at}from"./undo-Zx6Thk0Z.js";import{P as K}from"./palette-BXPG-S57.js";import{B as Ge,C as Ot}from"./cardTemplates-CL03FX0S.js";import{S as $e,R as Ut}from"./square-B5VCCcX7.js";import{A as ze,b as Wt,c as Ve,Q as Gt,d as Vt,e as Ht,f as Yt,M as qt,S as Jt,n as He,G as Ye,g as Qt,h as Zt,T as ie,Z as Kt,i as Xt,C as qe,j as Dt,k as er}from"./index-clrG2gCl.js";import{u as tr,a as Je,s as rr,K as sr,P as ir,D as nr,c as ar,S as or,v as lr,b as cr,d as dr,C as ur,e as xr}from"./sortable.esm-BxHzed3x.js";import{P as re}from"./plus-BybH-_bu.js";import{T as D}from"./trash-2-9UIW2m7q.js";import{L as oe}from"./link-fr0uO6pY.js";import{I as X}from"./image-DpFBMrjV.js";import{U as Ee}from"./upload-ph_HrLW-.js";import{E as Qe}from"./external-link-B-pRlJeA.js";import{R as mr}from"./index-Bgwdp8d1.js";import{P as gr}from"./pen-tool-CPcodvGT.js";import{A as ot}from"./AlertModal-DHZrFFpO.js";import{C as hr}from"./ConfirmationModal-BqGzcl3g.js";import{U as fe}from"./user-z_w8hJb6.js";import{B as lt,C as br}from"./code-DFGvkwP7.js";import{P as pr}from"./InlineEdit-LXaiIIc8.js";import{M as Pe}from"./mail-C8AWi2yh.js";import{F as ne}from"./file-text-D4qk8Tzm.js";import{M as Ze}from"./MonthYearPicker-CRwHlo4q.js";import{S as Fe}from"./sparkles-Br3FZYhV.js";import{C as ct}from"./check-BXDTBbZe.js";import{D as fr}from"./download-BBBdX7JV.js";import{S as Ke}from"./stockPhotos-DkxhX0el.js";import{V as Xe}from"./video-n-qxSk9V.js";import{A as yr}from"./award-BkImyAxc.js";import{B as jr}from"./briefcase-BA81y1Cf.js";import{I as vr}from"./IntroOverlay-DapoW2Eb.js";import{C as De}from"./check-circle-DqYJ7obf.js";import{U as kr}from"./users-CW7lwuWe.js";import wr from"./CommerceDashboard-BSZa5cbV.js";import Nr from"./AIImageEditModal-C20ok1Se.js";import"./zap-DGAIHcfp.js";import"./lock-DyNzxupw.js";import"./arrow-right-CSdrhpF5.js";import"./globe-DgZdGzus.js";import"./play-Bdt-AzR7.js";import"./map-pin-OOBizwV5.js";import"./eye-DBT7NYFb.js";import"./trending-up-BN9QEfSx.js";import"./music-D29n3e9e.js";import"./terminal-CUfv7bRQ.js";import"./chevron-right-C0A4zoBG.js";import"./layout-grid-D0eCvmb4.js";import"./youtube-DXIyuMbX.js";import"./twitter-BkzJSFqN.js";import"./linkedin-KoM4kuTt.js";import"./activity-CQyBVydU.js";import"./calendar-BlywvGr0.js";import"./graduation-cap-CWgYxLce.js";import"./alert-circle-gw7bsKwP.js";import"./alert-triangle-BabHdlci.js";import"./arrow-left-jQ4_17tq.js";import"./bar-chart-DqtOAY8p.js";import"./bot-CZVkuU1E.js";import"./building-2-BttomyIW.js";import"./check-circle-2-Y-7OBTyF.js";import"./chevron-down-Eiq7K4ut.js";import"./chevron-up-DzRpdu-v.js";import"./clock-BtKrYrPy.js";import"./code-2-CCMqSW_o.js";import"./copy-BbzbJe7R.js";import"./credit-card-BsVMY62g.js";import"./confetti.module-eBrm92lW.js";import"./dollar-sign-DcjytobZ.js";import"./eye-off-eUDXhHXq.js";import"./file-code--JYI6on6.js";import"./file-question-Dj6fz501.js";import"./gift-CgF2-90B.js";import"./help-circle-CCgyfrIA.js";import"./home-CXxkeF76.js";import"./info-D00vMt1z.js";import"./key-round-Cd3I_bbx.js";import"./layout-dashboard-BUznMAJN.js";import"./layout-template-WpqPmEBC.js";import"./log-out-ByZuvNdb.js";import"./mail-check-DJ0o7HYM.js";import"./volume-x-BMPj_cPW.js";import"./menu-C_yhoOtt.js";import"./message-square-Rf8MUyuS.js";import"./mic-aRUYVZ6D.js";import"./more-vertical-17dfMr7j.js";import"./pen-CDP9jQDD.js";import"./percent-CJb4_4R_.js";import"./plus-circle-C7ZueYbE.js";import"./refresh-cw-DfJf90V0.js";import"./rocket-bNzdNsw1.js";import"./save-DuHFw_gZ.js";import"./search-C4vZZ5u7.js";import"./send-BU04lBHk.js";import"./thumbs-up-BedDGc-v.js";import"./shield-alert-CACf201H.js";import"./shield-check-B9I5OclO.js";import"./shield-DouoAU4I.js";import"./productService-DubTcc4o.js";import"./star-D73ZxPTB.js";import"./stop-circle-D_kwlGPz.js";import"./target-C38gmVKJ.js";import"./unlink-BN-ijyOT.js";import"./upload-cloud-Bz-Uhqq1.js";import"./volume-2-Ci9QXAiK.js";import"./wand-2-BNdNGVzL.js";import"./x-circle-DiIKiu2H.js";import"./stripeService-DcCXEwTE.js";import"./index-Chjiymov.js";import"./geminiService-BsYmV8kM.js";const pe=new Map,Sr=async t=>{if(pe.has(t))return pe.get(t)??null;try{console.log("[UserService] Resolving username to UID:",t);const r=ce(_,"users"),a=await Me(r);for(const i of a.docs){const u=i.data();if(u.email&&u.email.split("@")[0]===t){const s=i.id;return console.log("[UserService] Found UID for username:",t,"->",s),pe.set(t,s),s}}return console.warn("[UserService] No user found for username:",t),pe.set(t,null),null}catch(r){return console.error("[UserService] Error resolving username:",r),null}},le=t=>{if(t===null||typeof t!="object")return t;if(Array.isArray(t))return t.map(le);const r={};return Object.keys(t).forEach(a=>{const i=t[a];i!==void 0&&(r[a]=le(i))}),r},Cr=t=>{const r=le({primaryColor:t.theme.primaryColor,secondaryColor:t.theme.secondaryColor,textColor:t.theme.textColor,backgroundColor:t.theme.backgroundColor,fontFamily:t.theme.fontFamily});if(t.mode==="linkinbio"&&t.linkInBio){const a=t.linkInBio;if(a.themeId){const i=Lt(a.themeId);i&&(r.themeSource=i.name,r.primaryColor||(r.primaryColor=i.colors.accent),r.backgroundColor||(r.backgroundColor=i.colors.background),r.textColor||(r.textColor=i.colors.text))}if(a.customStyle){const i=a.customStyle;if(i.buttonColor&&(r.buttonColor=i.buttonColor),i.buttonTextColor&&(r.buttonTextColor=i.buttonTextColor),i.profileTitleColor&&(r.profileTitleColor=i.profileTitleColor),i.profileTextColor&&(r.profileTextColor=i.profileTextColor),i.fontFamily&&(r.fontFamily=i.fontFamily),i.profileFontFamily&&(r.fontFamily=i.profileFontFamily),i.backgroundOverride){const u=i.backgroundOverride;u&&!u.includes("gradient")&&!u.includes("url(")&&(r.backgroundColor=u)}}}return r},Ir=(t,r)=>{const a={...t.theme};r.primaryColor&&(a.primaryColor=r.primaryColor),r.secondaryColor&&(a.secondaryColor=r.secondaryColor),r.textColor&&(a.textColor=r.textColor),r.backgroundColor&&(a.backgroundColor=r.backgroundColor),r.fontFamily&&(a.fontFamily=r.fontFamily);const i={theme:le(a)};return t.businessCard&&(i.businessCard=le({...t.businessCard,themeId:r.themeSource})),i},Br=t=>{const r=[];return t.themeSource&&r.push(`Theme: ${t.themeSource}`),t.primaryColor&&r.push(`Primary: ${t.primaryColor}`),t.fontFamily&&r.push(`Font: ${t.fontFamily.split(",")[0].replace(/['"]/g,"")}`),r.join(" â€¢ ")},$r=({title:t,onTitleChange:r,editorTheme:a,onToggleTheme:i,activeDevice:u,onBack:x,onDeviceChange:s,activeView:c,onViewChange:l,onShare:m})=>e.jsxs("div",{className:`h-14 border-b px-3 md:px-4 flex items-center justify-between shrink-0 z-20 transition-colors
            ${a==="dark"?"bg-[#0f1117] border-white/5":"bg-white border-gray-200"}
        `,children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0 mr-2",children:[e.jsx("button",{onClick:x,className:`p-2 rounded-lg shrink-0 transition-colors ${a==="dark"?"text-gray-400 hover:bg-white/5 hover:text-white":"text-gray-500 hover:bg-gray-100 hover:text-gray-900"}`,title:"Back to Dashboard",children:e.jsx(At,{size:20})}),e.jsx("input",{value:t,onChange:d=>r(d.target.value),className:`font-semibold text-sm bg-transparent outline-none w-full min-w-0 truncate transition-colors
                        ${a==="dark"?"text-gray-300 focus:text-white":"text-gray-700 focus:text-black"}
                    `,placeholder:"Enter Portfolio Title"})]}),e.jsxs("div",{className:`flex items-center gap-4 shrink-0 
                md:absolute md:left-[calc(50%+200px)] md:-translate-x-1/2 md:flex
                ${u==="mobile"?"md:flex":""}
            `,children:[e.jsxs("div",{className:`hidden md:flex rounded-lg p-1 border transition-colors shrink-0 
                    ${a==="dark"?"bg-[#1a1d24] border-white/5":"bg-gray-100 border-gray-200"}
                `,children:[e.jsx("button",{onClick:()=>s("desktop"),className:`p-1.5 rounded-md transition-all ${u==="desktop"?"bg-indigo-600 text-white shadow-md":a==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-black"}`,title:"Desktop View",children:e.jsx(st,{size:18})}),e.jsx("button",{onClick:()=>s("mobile"),className:`p-1.5 rounded-md transition-all ${u==="mobile"?"bg-indigo-600 text-white shadow-md":a==="dark"?"text-gray-400 hover:text-white":"text-gray-500 hover:text-black"}`,title:"Mobile View",children:e.jsx(it,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0 md:ml-0",children:[e.jsx("button",{onClick:i,className:`p-2 rounded-lg transition-colors flex items-center justify-center text-sm font-medium
                            ${a==="dark"?"hover:bg-white/5 text-gray-400 hover:text-white":"hover:bg-gray-100 text-gray-500 hover:text-gray-900"}
                        `,title:`Switch to ${a==="dark"?"Light":"Dark"} Mode`,children:a==="dark"?e.jsx(Et,{size:18}):e.jsx(Ft,{size:18})}),e.jsxs("button",{onClick:()=>l(c==="commerce"?"editor":"commerce"),className:`p-2 md:px-3 md:py-2 text-sm font-medium rounded-lg flex items-center gap-2 border transition-all
                            ${c==="commerce"?"bg-indigo-600 text-white border-transparent shadow-sm":a==="dark"?"hover:bg-white/5 text-gray-400 hover:text-white border-transparent":"hover:bg-gray-100 text-gray-500 hover:text-gray-900 border-transparent"}
                        `,title:c==="commerce"?"Close Commerce Hub":"Commerce Hub",children:[c==="commerce"?e.jsx(ae,{size:18}):e.jsx(nt,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:c==="commerce"?"Close":"Commerce Hub"})]}),e.jsxs("button",{onClick:()=>l(c==="analytics"?"editor":"analytics"),className:`p-2 md:px-3 md:py-2 text-sm font-medium rounded-lg flex items-center gap-2 border transition-all
                            ${c==="analytics"?"bg-indigo-600 text-white border-transparent shadow-sm":a==="dark"?"hover:bg-white/5 text-gray-400 hover:text-white border-transparent":"hover:bg-gray-100 text-gray-500 hover:text-gray-900 border-transparent"}
                        `,title:c==="analytics"?"Close Analytics":"User Engagement & Analytics",children:[c==="analytics"?e.jsx(ae,{size:18}):e.jsx(Ae,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:c==="analytics"?"Close":"Analytics"})]}),e.jsx("div",{className:`w-px h-6 mx-1 ${a==="dark"?"bg-white/10":"bg-gray-200"}`}),e.jsxs("button",{onClick:m,className:`p-2 md:px-4 md:py-2 text-sm font-semibold rounded-lg flex items-center gap-2 border transition-colors
                            ${a==="dark"?"bg-white text-black hover:bg-gray-200 border-transparent":"bg-black text-white hover:bg-gray-800 border-transparent"}
                        `,title:"Share",children:[e.jsx(_t,{size:16}),e.jsx("span",{className:"hidden lg:inline",children:"Share"})]})]})]}),e.jsx("div",{className:"hidden md:block w-[100px] shrink-0","aria-hidden":"true"})]}),dt=({portfolioData:t,onUpdate:r,themeClasses:a,editorTheme:i,variant:u="links"})=>e.jsxs("div",{className:`pt-6 border-t ${a.sectionBorder} animate-fade-in`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:u==="profile"?"Profile Appearance":"Buttons Appearance"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:u==="profile"?"Customize text styles for your headline and bio.":"Override button styles for your links."})]}),e.jsxs("div",{className:"space-y-4",children:[u==="profile"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx(Be,{size:12})," Profile Font"]}),e.jsxs("select",{value:t.linkInBio?.customStyle?.profileFontFamily||"",onChange:x=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,profileFontFamily:x.target.value}}}),className:`w-full border rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo-500 ${a.inputBg}`,children:[e.jsx("option",{value:"",children:"Default (Theme)"}),e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"DM Sans",children:"DM Sans"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"Montserrat",children:"Montserrat"}),e.jsx("option",{value:"'Space Mono', monospace",children:"Space Mono"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx(K,{size:12})," Text Colors"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${a.cardBg}`,children:[e.jsx("span",{className:`block text-[10px] mb-2 uppercase tracking-wide opacity-70 ${a.textMain}`,children:"Headline"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"} relative`,children:e.jsx("input",{type:"color",value:t.linkInBio?.customStyle?.profileTitleColor||"#000000",onChange:x=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,profileTitleColor:x.target.value}}}),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] p-0 cursor-pointer border-0"})}),t.linkInBio?.customStyle?.profileTitleColor&&e.jsx("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,profileTitleColor:null}}}),className:"text-[10px] text-red-400 hover:text-red-500 underline",children:"Reset"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${a.cardBg}`,children:[e.jsx("span",{className:`block text-[10px] mb-2 uppercase tracking-wide opacity-70 ${a.textMain}`,children:"Bio / Body"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"} relative`,children:e.jsx("input",{type:"color",value:t.linkInBio?.customStyle?.profileTextColor||"#000000",onChange:x=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,profileTextColor:x.target.value}}}),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] p-0 cursor-pointer border-0"})}),t.linkInBio?.customStyle?.profileTextColor&&e.jsx("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,profileTextColor:null}}}),className:"text-[10px] text-red-400 hover:text-red-500 underline",children:"Reset"})]})]})]})]})]}),u==="links"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx(Be,{size:12})," Button Font"]}),e.jsxs("select",{value:t.linkInBio?.customStyle?.fontFamily||"",onChange:x=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,fontFamily:x.target.value}}}),className:`w-full border rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo-500 ${a.inputBg}`,children:[e.jsx("option",{value:"",children:"Default (Theme)"}),e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"DM Sans",children:"DM Sans"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display"}),e.jsx("option",{value:"Montserrat",children:"Montserrat"}),e.jsx("option",{value:"'Space Mono', monospace",children:"Space Mono"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx(Ge,{size:12})," Button Shape"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"pill",label:"Pill",icon:e.jsx(Rt,{size:14,className:"scale-x-125"})},{id:"rounded",label:"Rounded",icon:e.jsx(Ge,{size:14,className:"rounded-md"})},{id:"sharp",label:"Sharp",icon:e.jsx($e,{size:14})}].map(x=>e.jsxs("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonShape:x.id}}}),className:`flex flex-col items-center justify-center gap-1 py-2 rounded-lg border text-[10px] transition-colors
                                    ${t.linkInBio?.customStyle?.buttonShape===x.id?"bg-indigo-500/10 border-indigo-500 text-indigo-400":`border-transparent hover:bg-black/5 ${a.cardBg} ${a.textMuted}`}
                                `,children:[x.icon,x.label]},x.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx(ze,{size:12})," Button Text Alignment"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonAlignment:"center"}}}),className:`flex items-center justify-center gap-2 py-2 rounded-lg border text-xs transition-colors
                                ${t.linkInBio?.customStyle?.buttonAlignment==="center"||!t.linkInBio?.customStyle?.buttonAlignment?"bg-indigo-500/10 border-indigo-500 text-indigo-400":`border-transparent hover:bg-black/5 ${a.cardBg} ${a.textMuted}`}
                            `,children:[e.jsx(Wt,{size:14})," Center"]}),e.jsxs("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonAlignment:"left"}}}),className:`flex items-center justify-center gap-2 py-2 rounded-lg border text-xs transition-colors
                                ${t.linkInBio?.customStyle?.buttonAlignment==="left"?"bg-indigo-500/10 border-indigo-500 text-indigo-400":`border-transparent hover:bg-black/5 ${a.cardBg} ${a.textMuted}`}
                            `,children:[e.jsx(ze,{size:14})," Left"]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-400 mb-2 flex items-center gap-1.5",children:[e.jsx(K,{size:12})," Custom Colors"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${a.cardBg}`,children:[e.jsx("span",{className:`block text-[10px] mb-2 uppercase tracking-wide opacity-70 ${a.textMain}`,children:"Button Bg"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"} relative`,children:e.jsx("input",{type:"color",value:t.linkInBio?.customStyle?.buttonColor||"#ffffff",onChange:x=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonColor:x.target.value}}}),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] p-0 cursor-pointer border-0"})}),t.linkInBio?.customStyle?.buttonColor&&e.jsx("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonColor:null}}}),className:"text-[10px] text-red-400 hover:text-red-500 underline",children:"Reset"})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${a.cardBg}`,children:[e.jsx("span",{className:`block text-[10px] mb-2 uppercase tracking-wide opacity-70 ${a.textMain}`,children:"Button Text"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"} relative`,children:e.jsx("input",{type:"color",value:t.linkInBio?.customStyle?.buttonTextColor||"#000000",onChange:x=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonTextColor:x.target.value}}}),className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[150%] h-[150%] p-0 cursor-pointer border-0"})}),t.linkInBio?.customStyle?.buttonTextColor&&e.jsx("button",{onClick:()=>r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle,buttonTextColor:null}}}),className:"text-[10px] text-red-400 hover:text-red-500 underline",children:"Reset"})]})]})]})]})]})]})]}),et=({value:t,onChange:r,options:a,placeholder:i="Select...",themeClasses:u,isOpen:x,onToggle:s})=>{const c=q.useRef(null);q.useEffect(()=>{const m=d=>{x&&c.current&&!c.current.contains(d.target)&&s()};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[x,s]);const l=a.find(m=>m.value===t);return e.jsxs("div",{className:"relative",ref:c,children:[e.jsxs("button",{onClick:m=>{m.stopPropagation(),s()},className:`w-full flex items-center justify-between text-left rounded-lg px-3 py-2.5 text-sm border transition-all outline-none 
                    ${x?"border-indigo-500 ring-2 ring-indigo-500/10":"hover:border-indigo-500/50"} 
                    ${u.inputBg} h-11`,children:[e.jsxs("div",{className:"flex items-center gap-2.5 overflow-hidden",children:[l?.icon&&e.jsx("span",{className:"shrink-0 text-gray-500",children:l.icon}),l?.preview&&e.jsx("span",{className:"shrink-0",children:l.preview}),e.jsx("span",{className:`font-medium ${l?"":"text-gray-400"}`,children:l?l.label:i})]}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform duration-200 ${x?"rotate-180 text-indigo-500":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:`absolute left-0 right-0 top-full mt-2 rounded-xl border shadow-xl shadow-indigo-500/10 z-50 max-h-60 overflow-y-auto ${u.inputBg} py-1.5 animate-in fade-in zoom-in-95 duration-100`,children:a.map(m=>e.jsxs("button",{onClick:d=>{d.stopPropagation(),r(m.value),s()},className:`w-full flex items-center gap-3 px-3 py-2.5 text-sm transition-colors text-left group
                                ${t===m.value?"bg-indigo-500/5 text-indigo-500 font-medium":"hover:bg-gray-50 dark:hover:bg-white/5 text-gray-600 dark:text-gray-300"}
                            `,children:[e.jsx("div",{className:`w-4 h-4 shrink-0 flex items-center justify-center transition-opacity ${t===m.value?"opacity-100":"opacity-0"}`,children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),m.icon&&e.jsx("span",{className:`shrink-0 ${t===m.value?"text-indigo-500":"text-gray-400 group-hover:text-gray-500"}`,children:m.icon}),m.preview&&e.jsx("span",{className:"shrink-0 scale-90",children:m.preview}),e.jsx("span",{className:"",children:m.label})]},m.value))})]})},zr=({link:t,idx:r,themeClasses:a,handleUpdateLink:i,handleDeleteLink:u,onImageUploadTrigger:x})=>{const{attributes:s,listeners:c,setNodeRef:l,transform:m,transition:d,isDragging:o}=dr({id:t.id}),[w,C]=f.useState(null),j={transform:ur.Transform.toString(m),transition:d,zIndex:o?50:w?40:1,opacity:o?.5:1},n=[{value:"",label:"No Icon",icon:e.jsx("div",{className:"w-4 h-4 rounded border border-dashed border-gray-400"})},{value:"Tiktok",label:"TikTok",icon:e.jsx(Vt,{size:14})},{value:"Github",label:"GitHub",icon:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:e.jsx("path",{d:"M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.08-.73.08-.73 1.2.09 1.83 1.23 1.83 1.23 1.07 1.84 2.8 1.31 3.49 1 .11-.78.42-1.31.76-1.61-2.66-.3-5.46-1.33-5.46-5.93 0-1.31.46-2.38 1.23-3.22-.12-.3-.54-1.52.12-3.16 0 0 1.0-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.66 1.64.24 2.87.12 3.16.77.84 1.23 1.91 1.23 3.22 0 4.61-2.8 5.62-5.47 5.92.43.37.81 1.1.81 2.22l-.01 3.29c0 .31.22.69.82.57A12 12 0 0 0 12 .29z"})})},{value:"Linkedin",label:"LinkedIn",icon:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:e.jsx("path",{d:"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"})})},{value:"Twitter",label:"Twitter/X",icon:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:e.jsx("path",{d:"M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"})})},{value:"Instagram",label:"Instagram",icon:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:e.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})},{value:"Youtube",label:"YouTube",icon:e.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-current",children:e.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})},{value:"Facebook",label:"Facebook",icon:e.jsx(Ht,{size:14})},{value:"Wechat",label:"WeChat",icon:e.jsx(Yt,{size:14})},{value:"Venmo",label:"Venmo",icon:e.jsx("div",{className:"w-4 h-4 flex items-center justify-center font-bold text-[10px] border border-current rounded-full",children:"V"})},{value:"Weibo",label:"Weibo",icon:e.jsx("div",{className:"w-4 h-4 flex items-center justify-center font-bold text-[10px] border border-current rounded-full",children:"W"})},{value:"Douyin",label:"Douyin",icon:e.jsx("div",{className:"w-4 h-4 flex items-center justify-center font-bold text-[10px] border border-current rounded-full",children:"D"})},{value:"Globe",label:"Website",icon:e.jsx(Qe,{size:14})},{value:"Mail",label:"Email",icon:e.jsx(oe,{size:14})},{value:"FileText",label:"Resume",icon:e.jsx(Ve,{size:14})}],g=[{value:"primary",label:"Primary (Filled)",preview:e.jsx("div",{className:"w-6 h-4 bg-indigo-500 rounded"})},{value:"secondary",label:"Secondary (Muted)",preview:e.jsx("div",{className:"w-6 h-4 bg-gray-200 dark:bg-gray-700 rounded"})},{value:"outline",label:"Outline",preview:e.jsx("div",{className:"w-6 h-4 border border-indigo-500 rounded"})},{value:"ghost",label:"Ghost (Text)",preview:e.jsx("div",{className:"w-6 h-4 flex items-center justify-center text-[8px] text-gray-500 font-bold",children:"ABC"})},{value:"custom",label:"Custom",preview:e.jsx("div",{className:"w-6 h-4 bg-gradient-to-r from-pink-500 to-purple-500 rounded"})}];return e.jsxs("div",{ref:l,style:j,className:`p-3 rounded-lg border group relative transition-colors ${a.cardBg} ${o?"border-indigo-500 ring-2 ring-indigo-500/20":""}`,children:[e.jsx("div",{className:"absolute top-2 right-2 flex gap-1 z-20",children:e.jsx("button",{onClick:()=>u(t.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-white/5 rounded transition-colors",title:"Delete Link",children:e.jsx(D,{size:14})})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{...s,...c,className:"pt-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 cursor-grab active:cursor-grabbing touch-none flex flex-col items-center justify-start h-full",title:"Drag to reorder",children:e.jsx(at,{size:20})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(Ve,{size:12})," Label"]}),e.jsx("input",{value:t.label,onChange:p=>i(t.id,{label:p.target.value}),className:`w-full rounded px-3 py-2 text-sm outline-none border focus:border-indigo-500 transition-colors ${a.inputBg}`,placeholder:"My Cool Link"})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[t.icon==="Wechat"||t.icon==="Venmo"?e.jsx(Gt,{size:12}):e.jsx(oe,{size:12}),t.icon==="Wechat"||t.icon==="Venmo"?"QR Code Image":"URL"]}),t.icon==="Wechat"||t.icon==="Venmo"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex-1 flex items-center gap-2 p-2 rounded border ${a.inputBg}`,children:[t.url&&t.url.startsWith("http")?e.jsx("div",{className:"w-8 h-8 rounded bg-gray-100 overflow-hidden shrink-0",children:e.jsx("img",{src:t.url,alt:"QR",className:"w-full h-full object-cover"})}):e.jsx("div",{className:"w-8 h-8 rounded bg-gray-100 flex items-center justify-center shrink-0",children:e.jsx(X,{size:14,className:"text-gray-400"})}),e.jsx("span",{className:"text-xs flex-1 text-gray-500",children:t.url&&t.url.startsWith("http")?"QR Code Uploaded":"No QR Code"})]}),e.jsxs("button",{onClick:()=>x&&x(`linkInBio.links.${r}.url`),className:"px-3 py-2 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-500 rounded text-xs font-medium transition-colors flex items-center gap-1",children:[e.jsx(Ee,{size:14})," Upload"]})]}):e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:t.url,onChange:p=>i(t.id,{url:p.target.value}),className:`w-full rounded-lg px-3 py-2.5 text-sm outline-none border focus:border-indigo-500 transition-colors ${a.inputBg} pl-9 h-10`,placeholder:"https://"}),e.jsx(Qe,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mt-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(K,{size:12})," Style"]}),e.jsx(et,{value:t.variant,onChange:p=>i(t.id,{variant:p}),options:g,themeClasses:a,isOpen:w==="style",onToggle:()=>C(w==="style"?null:"style")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full border border-current"})," Icon"]}),e.jsx(et,{value:t.icon||"",onChange:p=>i(t.id,{icon:p}),options:n,themeClasses:a,isOpen:w==="icon",onToggle:()=>C(w==="icon"?null:"icon")})]})]})]})]})]})]})},Pr=({linkInBio:t,onUpdate:r,theme:a,onImageUploadTrigger:i})=>{if(!t)return null;const u={cardBg:a==="dark"?"bg-[#1a1d24] border-white/5":"bg-gray-50 border-gray-200",inputBg:a==="dark"?"bg-[#0f1117] border-white/10 text-white":"bg-white border-gray-200 text-gray-900",textMain:a==="dark"?"text-white":"text-gray-900",textMuted:"text-gray-500"},x=tr(Je(ir,{activationConstraint:{distance:5}}),Je(sr,{coordinateGetter:rr})),s=()=>{const d={id:Date.now().toString(),label:"New Link",url:"https://",variant:"primary",enabled:!0,order:(t.links?.length||0)+1},o=[...t.links||[],d];r({...t,links:o})},c=(d,o)=>{const w=t.links.map(C=>C.id===d?{...C,...o}:C);r({...t,links:w})},l=d=>{const o=t.links.filter(w=>w.id!==d);r({...t,links:o})},m=d=>{const{active:o,over:w}=d;if(o.id!==w?.id&&t.links){const C=t.links.findIndex(p=>p.id===o.id),j=t.links.findIndex(p=>p.id===w?.id),g=cr(t.links,C,j).map((p,N)=>({...p,order:N}));r({...t,links:g})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-dashed border-indigo-500/20 bg-indigo-500/5",children:[e.jsxs("h3",{className:"text-sm font-semibold text-indigo-400 mb-2 flex items-center gap-2",children:[e.jsx(at,{size:16})," Link Management"]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4 ml-6",children:"Add, edit, and reorder the links displayed on your page."}),e.jsx(nr,{sensors:x,collisionDetection:ar,onDragEnd:m,children:e.jsx(or,{items:t.links||[],strategy:lr,children:e.jsx("div",{className:"space-y-3",children:t.links?.map((d,o)=>e.jsx(zr,{link:d,idx:o,themeClasses:u,handleUpdateLink:c,handleDeleteLink:l,onImageUploadTrigger:i},d.id))})})}),e.jsxs("button",{onClick:s,className:"w-full mt-4 py-3 bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 rounded-lg text-base font-medium transition-colors flex items-center justify-center gap-2 border border-indigo-500/20",children:[e.jsx(re,{size:18})," Add New Link"]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Page Settings"}),e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u.cardBg}`,children:[e.jsx("span",{className:`text-sm ${u.textMain}`,children:"Show Social Icons"}),e.jsx("button",{onClick:()=>r({...t,showSocial:!t.showSocial}),className:`w-12 h-6 rounded-full transition-colors relative ${t.showSocial?"bg-indigo-500":"bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${t.showSocial?"translate-x-6":""}`})})]}),e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u.cardBg}`,children:[e.jsx("span",{className:`text-sm ${u.textMain}`,children:"Show Email Contact"}),e.jsx("button",{onClick:()=>r({...t,showEmail:!t.showEmail}),className:`w-12 h-6 rounded-full transition-colors relative ${t.showEmail?"bg-indigo-500":"bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${t.showEmail?"translate-x-6":""}`})})]})]})]})},_e="user_themes",Mr=async(t,r)=>{try{const a=await kt(ce(_,_e),{...r,userId:t,createdAt:Date.now()});return{...r,id:a.id}}catch(a){throw console.error("Error saving theme:",a),a}},Lr=async t=>{try{const r=Le(ce(_,_e),ye("userId","==",t));return(await Me(r)).docs.map(i=>({id:i.id,...i.data()}))}catch(r){return console.error("Error fetching themes:",r),[]}},Tr=async t=>{try{await wt(te(_,_e,t))}catch(r){throw console.error("Error deleting theme:",r),r}},Ar=({isOpen:t,onConfirm:r,onCancel:a,title:i,message:u,initialValue:x="",placeholder:s="",confirmText:c="OK",cancelText:l="Cancel"})=>{const[m,d]=f.useState(x),o=f.useRef(null);f.useEffect(()=>{t&&(d(x),setTimeout(()=>{o.current&&(o.current.focus(),o.current.select())},50))},[t,x]);const w=C=>{C.key==="Enter"?r(m):C.key==="Escape"&&a()};return t?mr.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9999] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-sm shadow-xl relative z-[10000]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-full text-indigo-600 dark:text-indigo-400",children:e.jsx(gr,{size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:i})]}),u&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed mb-4",children:u}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{ref:o,type:"text",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:s,value:m,onChange:C=>d(C.target.value),onKeyDown:w})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 font-medium text-sm transition-colors focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-600",children:l}),e.jsx("button",{onClick:()=>r(m),disabled:!m.trim(),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium text-sm shadow-sm transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c})]})]})}),document.body):null},Er=({activeSectionLabel:t,onTogglePreview:r,viewMode:a,editorTheme:i,themeClasses:u})=>e.jsxs("div",{className:`sticky top-0 z-30 px-4 py-3 border-b flex items-center justify-between backdrop-blur-md ${i==="dark"?"bg-[#0f1117]/80 border-white/5":"bg-white/80 border-gray-200"}`,children:[e.jsx("h2",{className:`font-semibold text-sm ${u.textMain}`,children:t}),e.jsxs("button",{onClick:()=>r?.(),className:`p-2 rounded-full ${i==="dark"?"bg-white/10 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("span",{className:"sr-only",children:"Preview"}),e.jsx("div",{className:"w-5 h-5 flex items-center justify-center",children:a==="edit"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}),e.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})]}),Fr=({portfolioData:t,onUpdate:r,currentSelection:a,editorTheme:i,themeClasses:u,isPremium:x,onUpgradeTrigger:s})=>{const c=l=>{if(Object.keys(R).includes(l))r({templateId:"linktree_visual",linkInBio:{...t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"Your Name",bio:"Your Bio",profileImage:"",buttonLayout:"stack"},themeId:l}});else{if(l==="media_kit"&&!x){s&&s();return}r({templateId:l})}};return e.jsxs("div",{className:`p-4 border-b ${u.sectionBorder}`,children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 uppercase",children:"Visual Theme"}),e.jsx("select",{value:a,onChange:l=>c(l.target.value),className:`w-full rounded-lg px-3 py-2 text-sm outline-none transition-colors border ${i==="dark"?"bg-[#1a1d24] border-white/10 text-white":"bg-gray-50 border-gray-200 text-gray-900"}`,children:t.mode==="linkinbio"?e.jsxs("optgroup",{label:"Link in Bio",children:[e.jsx("option",{value:"linktree_minimal",children:"Minimal (Tech)"}),e.jsx("option",{value:"linktree_corporate",children:"Corporate (Pro)"}),e.jsx("option",{value:"linktree_bento",children:"Bento (Grid)"}),Object.values(R).map(l=>e.jsxs("option",{value:l.id,children:[l.isPremium?"ðŸ’Ž ":"",l.name," ",l.isPremium?"(PRO)":`(${l.category})`]},l.id))]}):t.mode==="business_card"?e.jsxs("optgroup",{label:"NFC Digital Cards",children:[e.jsx("option",{value:"card_minimal",children:"Minimal Card"}),e.jsx("option",{value:"card_photo",children:"Photo Card"}),e.jsx("option",{value:"card_modern",children:"Modern Card"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("optgroup",{label:"Core",children:[e.jsx("option",{value:"minimalist",children:"Minimalist (Tech)"}),e.jsx("option",{value:"visual",children:"Visual (Creative)"}),e.jsx("option",{value:"corporate",children:"Corporate (Pro)"})]}),e.jsxs("optgroup",{label:"Technology",children:[e.jsx("option",{value:"dev_terminal",children:"Dev Terminal"}),e.jsx("option",{value:"saas_modern",children:"SaaS / Linear Style"})]}),e.jsxs("optgroup",{label:"Creative",children:[e.jsx("option",{value:"ux_folio",children:"UX Folio"}),e.jsx("option",{value:"creative_dark",children:"Cinematic Dark"}),e.jsx("option",{value:"bento_personal",children:"Bento Grid (Personal)"})]}),e.jsxs("optgroup",{label:"Professional",children:[e.jsx("option",{value:"legal_trust",children:"Legal Trust"}),e.jsx("option",{value:"executive_brief",children:"Executive Brief"}),e.jsx("option",{value:"writer_editorial",children:"Editorial / Writer"}),e.jsx("option",{value:"academic_research",children:"Academic / Research"})]}),e.jsx("optgroup",{label:"Healthcare",children:e.jsx("option",{value:"medical_care",children:"Medical Care"})}),e.jsx("optgroup",{label:"Social & Media",children:e.jsx("option",{value:"media_kit",children:"ðŸ’Ž Media Kit (Pro)"})})]})})]})},_r=({sections:t,activeSection:r,setActiveSection:a,editorTheme:i,themeClasses:u})=>e.jsx("div",{className:`flex p-2 border-b ${u.sectionBorder} gap-1 overflow-x-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]`,children:t.map(x=>e.jsxs("button",{onClick:()=>a(x.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors
                        ${r===x.id?i==="dark"?"bg-white/10 text-white":"bg-gray-100 text-gray-900":"text-gray-500 hover:text-gray-400 hover:bg-black/5"}
                    `,children:[x.icon," ",x.label]},x.id))}),Rr=({sections:t,activeSection:r,setActiveSection:a,editorTheme:i})=>e.jsx("div",{className:`fixed bottom-0 left-0 w-full z-40 border-t backdrop-blur-md pb-safe ${i==="dark"?"bg-[#0f1117]/90 border-white/5":"bg-white/90 border-gray-200"}`,children:e.jsx("div",{className:"flex items-center justify-around",children:t.map(u=>e.jsxs("button",{onClick:()=>a(u.id),className:`flex flex-col items-center gap-1 py-3 px-2 min-w-[60px] transition-colors
                            ${r===u.id?i==="dark"?"text-white":"text-indigo-600":"text-gray-500 hover:text-gray-400"}
                        `,children:[q.cloneElement(u.icon,{size:20,strokeWidth:r===u.id?2.5:2}),e.jsx("span",{className:`text-[10px] font-medium ${r===u.id?"opacity-100":"opacity-70"}`,children:u.label})]},u.id))})}),Or=({portfolioData:t,onUpdate:r,onNestedUpdate:a,onImageUploadTrigger:i,onAIImageEdit:u,isImageUploading:x,themeClasses:s,editorTheme:c,isLinkInBio:l,onStockPhotoTrigger:m})=>e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${s.cardBg}`,children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-3 uppercase",children:"Profile Photo / Avatar"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-full overflow-hidden shrink-0 border-2 ${c==="dark"?"bg-white/10 border-white/10":"bg-gray-200 border-gray-200"} shadow-sm`,children:t.hero.avatarUrl?e.jsx("img",{src:t.hero.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(fe,{size:24})})}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("button",{onClick:()=>i("hero.avatarUrl"),disabled:x,className:`flex-1 flex flex-col items-center justify-center gap-1.5 py-3 rounded-lg border text-[10px] sm:text-xs font-medium transition-colors
                                    ${x?"bg-gray-100 text-gray-400 cursor-not-allowed":`hover:bg-indigo-50/50 hover:border-indigo-200/50 hover:text-indigo-500 ${s.cardBg} ${s.textMuted} border-transparent`}
                                `,children:[x?e.jsx(Te,{size:16,className:"animate-spin"}):e.jsx(Ee,{size:16}),"Upload"]}),e.jsxs("button",{onClick:()=>m?.("hero.avatarUrl"),className:"flex-1 flex flex-col items-center justify-center gap-1.5 py-3 rounded-lg border border-transparent bg-indigo-500/10 text-indigo-500 hover:bg-indigo-500/20 text-[10px] sm:text-xs font-medium transition-colors",children:[e.jsx("span",{className:"text-lg",children:"ðŸ“·"}),"Library"]}),e.jsxs("button",{onClick:()=>u("hero.avatarUrl",t.hero.avatarUrl||"","avatar"),className:"flex-1 flex flex-col items-center justify-center gap-1.5 py-3 rounded-lg border border-transparent bg-indigo-500/10 text-indigo-500 hover:bg-indigo-500/20 text-[10px] sm:text-xs font-medium transition-colors",children:[e.jsx(lt,{size:16}),t.hero.avatarUrl?"Edit AI":"Create AI"]}),t.hero.avatarUrl&&e.jsx(e.Fragment,{children:e.jsxs("button",{onClick:()=>a("hero","avatarUrl",""),className:"flex-1 flex flex-col items-center justify-center gap-1.5 py-3 rounded-lg border border-transparent bg-red-500/5 text-red-500 hover:bg-red-500/10 text-[10px] sm:text-xs font-medium transition-colors",children:[e.jsx(D,{size:16}),"Remove"]})})]})]}),e.jsx("p",{className:"text-[10px] text-gray-400 text-center sm:text-left",children:"Recommended: Square JPG/PNG, max 2MB"})]}),t.hero.avatarUrl&&e.jsxs("div",{className:"mt-4 px-1 border-t border-gray-100 dark:border-white/5 pt-4",children:[e.jsx("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-2 block",children:"Avatar Size"}),e.jsx("div",{className:"flex bg-gray-100 dark:bg-white/5 rounded-lg p-1 gap-1",children:["sm","md","lg","xl"].map(d=>{const w=(t.linkInBio?.customStyle?.profileImageSize||"md")===d;return e.jsx("button",{onClick:()=>{const C=t.linkInBio?.customStyle||{};r({linkInBio:{...t.linkInBio,customStyle:{...C,profileImageSize:d}}})},className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all ${w?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-white shadow-sm":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:d.toUpperCase()},d)})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 flex items-center gap-1.5",children:[e.jsx(Be,{size:12})," Headline"]}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:[t.hero.headline.length," / 40 characters"]})]}),e.jsx("input",{id:"hero.headline",type:"text",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors ${s.inputBg} h-10`,value:t.hero.headline,onChange:d=>a("hero","headline",d.target.value),maxLength:40})]}),!t.templateId?.startsWith("card_")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(ze,{size:12})," Sub-headline"]}),e.jsx("input",{id:"hero.subheadline",type:"text",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors ${s.inputBg} h-10`,value:t.hero.subheadline,onChange:d=>a("hero","subheadline",d.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(qt,{size:12})," CTA Text"]}),e.jsx("input",{id:"hero.ctaPrimaryLabel",type:"text",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors ${s.inputBg} h-10`,value:t.hero.ctaPrimaryLabel,onChange:d=>a("hero","ctaPrimaryLabel",d.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(oe,{size:12})," CTA URL"]}),e.jsx("input",{id:"hero.ctaPrimaryUrl",type:"text",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors ${s.inputBg} h-10`,value:t.hero.ctaPrimaryUrl,onChange:d=>a("hero","ctaPrimaryUrl",d.target.value)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(pr,{size:12})," Phone Number"]}),e.jsx("input",{id:"phone",type:"text",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors ${s.inputBg} h-10`,value:t.phone||"",onChange:d=>r({phone:d.target.value}),placeholder:"+1 (555) 000-0000"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 mb-1 flex items-center gap-1.5",children:[e.jsx(Pe,{size:12})," Email Address"]}),e.jsx("input",{id:"contactEmail",type:"email",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors ${s.inputBg} h-10`,value:t.contactEmail||"",onChange:d=>r({contactEmail:d.target.value}),placeholder:"you@example.com"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsxs("label",{className:"text-[10px] uppercase font-semibold text-gray-400 flex items-center gap-1.5",children:[e.jsx(ne,{size:12})," About Me Label & Bio"]}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:["Label: ",(t.sectionLabels?.about||"About Me").length,"/30 â€¢ Bio: ",t.about?.length||0,"/130"]})]}),e.jsx("input",{id:"sectionLabels.about",type:"text",className:`w-full rounded-lg px-4 py-2.5 text-sm outline-none transition-colors mb-2 ${s.inputBg} h-10`,value:t.sectionLabels?.about||"About Me",onChange:d=>r({sectionLabels:{...t.sectionLabels,about:d.target.value}}),maxLength:30,placeholder:"Section Label (e.g. About Me)"}),e.jsx("textarea",{id:"about",rows:6,className:`w-full rounded-lg px-4 py-2 text-sm outline-none transition-colors resize-none ${s.inputBg}`,value:t.about,onChange:d=>r({about:d.target.value}),maxLength:130,placeholder:"Write a short bio..."})]}),l&&e.jsx(dt,{portfolioData:t,onUpdate:r,themeClasses:s,editorTheme:c,variant:"profile"})]}),Ur=({portfolioData:t,onUpdate:r,themeClasses:a,editorTheme:i})=>{const u=()=>{const x={id:Date.now().toString(),jobTitle:"Job Title",employer:"Company Name",city:"",startDate:"2023-01",endDate:"Present",description:"Description of your role...",achievements:[]};r({timeline:[...t.timeline||[],x]})};return e.jsxs("div",{className:"space-y-4",children:[t.timeline.map((x,s)=>e.jsxs("div",{className:`p-4 rounded-lg border relative group/card ${a.cardBg}`,children:[e.jsx("div",{className:"absolute top-4 right-4 z-10 opacity-0 group-hover/card:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>{const c=t.timeline.filter((l,m)=>m!==s);r({timeline:c})},className:"p-1.5 bg-black/50 text-gray-400 hover:text-red-400 hover:bg-black/80 rounded-md transition-all",title:"Delete Entry",children:e.jsx(D,{size:14})})}),e.jsxs("div",{className:"mb-2",children:[e.jsx("input",{id:`timeline.${s}.jobTitle`,className:`bg-transparent font-bold w-full outline-none ${a.textMain}`,value:x.jobTitle,onChange:c=>{const l=[...t.timeline];l[s].jobTitle=c.target.value,r({timeline:l})},placeholder:"Job Title"}),e.jsx("input",{id:`timeline.${s}.employer`,className:"bg-transparent text-sm text-indigo-400 w-full outline-none",value:x.employer,onChange:c=>{const l=[...t.timeline];l[s].employer=c.target.value,r({timeline:l})},placeholder:"Company"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2 mb-2",children:[e.jsx(Ze,{id:`timeline.${s}.startDate`,label:"Start Date",value:x.startDate,onChange:c=>{const l=[...t.timeline];l[s].startDate=c,r({timeline:l})}}),e.jsx(Ze,{id:`timeline.${s}.endDate`,label:"End Date",value:x.endDate,onChange:c=>{const l=[...t.timeline];l[s].endDate=c,r({timeline:l})}})]}),e.jsx("textarea",{id:`timeline.${s}.description`,className:`bg-transparent text-sm w-full outline-none resize-none p-2 rounded ${i==="dark"?"text-gray-500 bg-black/10":"text-gray-600 bg-gray-100"}`,rows:2,value:x.description,onChange:c=>{const l=[...t.timeline];l[s].description=c.target.value,r({timeline:l})}})]},x.id)),e.jsx("button",{onClick:u,className:"w-full py-2 bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 rounded-lg text-sm font-medium transition-colors",children:"+ Add Timeline Entry"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 uppercase",children:"Section Label"}),e.jsx("input",{id:"sectionLabels.timeline",type:"text",className:`w-full rounded-lg px-4 py-2 text-sm outline-none transition-colors ${a.inputBg}`,value:t.sectionLabels?.timeline||"My Journey",onChange:x=>r({sectionLabels:{...t.sectionLabels,timeline:x.target.value}})})]})]})},Wr=({portfolioData:t,onUpdate:r,themeClasses:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.techStack.map((i,u)=>e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border ${a.cardBg}`,children:[e.jsx("input",{id:`techStack.${u}.name`,className:`bg-transparent text-sm outline-none w-24 ${a.textMain}`,value:i.name,onChange:x=>{const s=[...t.techStack];s[u].name=x.target.value,r({techStack:s})}}),e.jsx("button",{onClick:()=>{const x=t.techStack.filter(s=>s.id!==i.id);r({techStack:x})},className:"text-gray-500 hover:text-red-400",children:"Ã—"})]},i.id)),e.jsx("button",{id:"techStack",onClick:()=>{const i=[...t.techStack,{id:Date.now().toString(),name:"New Skill",level:"Intermediate"}];r({techStack:i})},className:"px-3 py-2 rounded-lg border border-dashed border-gray-600 text-gray-500 text-sm hover:border-white/20 hover:text-white",children:"+ Add Skill"})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 uppercase",children:"Section Label"}),e.jsx("input",{id:"sectionLabels.techStack",type:"text",className:`w-full rounded-lg px-4 py-2 text-sm outline-none transition-colors ${a.inputBg}`,value:t.sectionLabels?.techStack||"Tech Stack",onChange:i=>r({sectionLabels:{...t.sectionLabels,techStack:i.target.value}})})]})]}),Gr=({portfolioData:t,onUpdate:r,onImageUploadTrigger:a,onAIImageEdit:i,themeClasses:u,editorTheme:x})=>{const s=()=>{const c={id:Date.now().toString(),title:"New Project",description:"Project description...",tags:[],repoUrl:"",demoUrl:"",thumbnailUrl:""};r({projects:[...t.projects||[],c]})};return e.jsxs("div",{className:"space-y-4",children:[t.projects.map((c,l)=>e.jsxs("div",{className:`p-4 rounded-lg border relative group/card ${u.cardBg}`,children:[e.jsx("div",{className:"absolute top-4 right-4 z-10 opacity-0 group-hover/card:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>{const m=t.projects.filter((d,o)=>o!==l);r({projects:m})},className:"p-1.5 bg-black/50 text-gray-400 hover:text-red-400 hover:bg-black/80 rounded-md transition-all",title:"Delete Project",children:e.jsx(D,{size:14})})}),e.jsxs("div",{className:"mb-4 flex items-start gap-4 p-3 bg-black/20 rounded-lg border border-white/5",children:[e.jsx("div",{className:"w-20 h-14 bg-gray-800 rounded overflow-hidden shrink-0 relative group",children:c.thumbnailUrl?e.jsx("img",{src:c.thumbnailUrl,alt:"Thumbnail",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:e.jsx(X,{size:20})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1.5 uppercase",children:"Thumbnail"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>a(`projects.${l}.thumbnailUrl`),className:"px-2 py-1 bg-white/5 hover:bg-white/10 rounded text-[10px] font-medium text-gray-400 flex items-center gap-1 transition-colors",children:[e.jsx(Ee,{size:10})," Upload"]}),c.thumbnailUrl&&e.jsxs("button",{onClick:()=>i(`projects.${l}.thumbnailUrl`,c.thumbnailUrl,"project"),className:"px-2 py-1 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-400 rounded text-[10px] font-medium flex items-center gap-1 transition-colors",children:[e.jsx(lt,{size:10})," AI Magic"]})]})]})]}),e.jsx("input",{id:`projects.${l}.title`,className:`bg-transparent font-bold w-full outline-none mb-1 ${u.textMain}`,value:c.title,onChange:m=>{const d=[...t.projects];d[l].title=m.target.value,r({projects:d})},placeholder:"Project Title"}),e.jsx("textarea",{id:`projects.${l}.description`,rows:2,className:`bg-transparent text-sm w-full outline-none resize-none p-2 rounded mb-2 ${x==="dark"?"text-gray-400 bg-black/10":"text-gray-600 bg-gray-100"}`,value:c.description,onChange:m=>{const d=[...t.projects];d[l].description=m.target.value,r({projects:d})},placeholder:"Description"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{id:`projects.${l}.repoUrl`,placeholder:"GitHub URL",className:`text-xs w-full p-2 rounded border outline-none transition-colors ${u.inputBgDarker}`,value:c.repoUrl||"",onChange:m=>{const d=[...t.projects];d[l].repoUrl=m.target.value,r({projects:d})}}),e.jsx("input",{id:`projects.${l}.demoUrl`,placeholder:"Demo URL",className:`text-xs w-full p-2 rounded border outline-none transition-colors ${u.inputBgDarker}`,value:c.demoUrl||"",onChange:m=>{const d=[...t.projects];d[l].demoUrl=m.target.value,r({projects:d})}})]})]},c.id)),e.jsx("button",{onClick:s,className:"w-full py-2 bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 rounded-lg text-sm font-medium transition-colors",children:"+ Add Custom Project"}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/5",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-1 uppercase",children:"Section Label"}),e.jsx("input",{id:"sectionLabels.projects",type:"text",className:`w-full rounded-lg px-4 py-2 text-sm outline-none transition-colors ${u.inputBg}`,value:t.sectionLabels?.projects||"Featured Projects",onChange:c=>r({sectionLabels:{...t.sectionLabels,projects:c.target.value}})})]})]})},Vr=({portfolioData:t,onNestedUpdate:r,editorTheme:a,themeClasses:i})=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-indigo-500/10 rounded-lg border border-indigo-500/20",children:[e.jsxs("h3",{className:"text-sm font-semibold text-indigo-400 mb-1 flex items-center gap-2",children:[e.jsx(Fe,{size:14}),"Dynamic Components"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"These components are often added by AI Prompts. You can fine-tune them here."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Hero Buttons"}),e.jsxs("button",{onClick:()=>{const u=[...t.hero.buttons||[],{id:Date.now().toString(),label:"New Button",variant:"primary",url:"#"}];r("hero","buttons",u)},className:`text-xs px-2 py-1 rounded flex items-center gap-1 transition-colors ${a==="dark"?"bg-white/5 hover:bg-white/10 text-gray-300":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:[e.jsx(re,{size:12})," Add"]})]}),e.jsxs("div",{className:"space-y-3",children:[(!t.hero.buttons||t.hero.buttons.length===0)&&e.jsx("p",{className:"text-sm text-gray-500 italic p-4 text-center border border-dashed border-white/5 rounded-lg",children:"No custom buttons found."}),t.hero.buttons?.map((u,x)=>e.jsxs("div",{className:`p-3 rounded-lg border group relative ${i.cardBg}`,children:[e.jsx("button",{onClick:()=>{const s=t.hero.buttons?.filter((c,l)=>l!==x);r("hero","buttons",s)},className:"absolute top-2 right-2 p-1.5 text-gray-500 hover:text-red-400 hover:bg-white/5 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Delete Component",children:e.jsx(D,{size:12})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:u.label,onChange:s=>{const c=[...t.hero.buttons||[]];c[x].label=s.target.value,r("hero","buttons",c)},placeholder:"Label",className:`flex-1 border rounded px-2 py-1.5 text-sm font-medium focus:border-indigo-500 outline-none ${i.inputBgDarker}`}),e.jsxs("select",{value:u.variant,onChange:s=>{const c=[...t.hero.buttons||[]];c[x].variant=s.target.value,r("hero","buttons",c)},className:`border rounded px-2 py-1.5 text-xs text-gray-400 outline-none focus:border-indigo-500 ${i.inputBgDarker}`,children:[e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"secondary",children:"Secondary"}),e.jsx("option",{value:"outline",children:"Outline"}),e.jsx("option",{value:"ghost",children:"Ghost"})]}),e.jsxs("select",{value:u.type||"link",onChange:s=>{const c=[...t.hero.buttons||[]];c[x].type=s.target.value,r("hero","buttons",c)},className:`border rounded px-2 py-1.5 text-xs text-gray-400 outline-none focus:border-indigo-500 ${i.inputBgDarker}`,children:[e.jsx("option",{value:"link",children:"Link"}),e.jsx("option",{value:"action",children:"Action"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:u.type==="action"?e.jsxs("select",{value:u.action||"theme_toggle",onChange:s=>{const c=[...t.hero.buttons||[]];c[x].action=s.target.value,r("hero","buttons",c)},className:`flex-1 border rounded px-2 py-1.5 text-xs text-gray-400 outline-none focus:border-indigo-500 ${i.inputBgDarker}`,children:[e.jsx("option",{value:"theme_toggle",children:"Theme Toggle (Dark/Light)"}),e.jsx("option",{value:"scroll_to_contact",children:"Scroll to Contact"})]}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:12,className:"text-gray-500 shrink-0"}),e.jsx("input",{value:u.url||"",onChange:s=>{const c=[...t.hero.buttons||[]];c[x].url=s.target.value,r("hero","buttons",c)},placeholder:"https://...",className:"flex-1 bg-transparent border-none text-xs text-blue-400 placeholder-gray-600 outline-none"})]})})]})]},u.id))]})]})]}),Hr=({currentThemeId:t="air",onSelectTheme:r,onDoubleSelect:a,userThemes:i=[],onDeleteTheme:u,onEditBackground:x,onPickBg:s,onToggleSnow:c,isSnowEnabled:l})=>{const m=o=>o?o==="torn-paper"?{clipPath:"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%, 0% 95%, 5% 100%, 10% 95%, 15% 100%, 20% 95%, 25% 100%, 30% 95%, 35% 100%, 40% 95%, 45% 100%, 50% 95%, 55% 100%, 60% 95%, 65% 100%, 70% 95%, 75% 100%, 80% 95%, 85% 100%, 90% 95%, 95% 100%, 100% 95%, 100% 100%, 0% 100%)"}:o==="jagged"?{clipPath:"polygon(0% 0%, 100% 0%, 95% 50%, 100% 100%, 0% 100%, 5% 50%)"}:o==="wavy"?{borderRadius:"255px 15px 225px 15px / 15px 225px 15px 255px"}:{}:{},d=(o,w=!1)=>{const C=o.backgroundConfig?.type==="image"?{backgroundImage:o.backgroundConfig.value,backgroundSize:"cover"}:o.backgroundConfig?.type==="gradient"?{background:o.backgroundConfig.value}:{background:o.colors.background};return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>r(o.id),onDoubleClick:()=>a?.(o.id),className:`group relative aspect-[3/4] rounded-xl overflow-hidden text-left transition-all w-full ${t===o.id?"ring-2 ring-indigo-500 ring-offset-2 ring-offset-[#1a1a1a]":"hover:scale-[1.02] hover:shadow-lg"}`,style:C,children:[o.backgroundConfig?.overlay&&e.jsx("div",{className:"absolute inset-0",style:{background:o.backgroundConfig.overlay}}),t===o.id&&e.jsx("div",{className:"absolute top-2 right-2 flex items-center justify-center w-6 h-6 bg-indigo-500 rounded-full text-white shadow-sm z-20",children:e.jsx(ct,{size:14,strokeWidth:3})}),e.jsxs("div",{className:"absolute inset-x-4 top-8 flex flex-col items-center gap-3 z-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-full border-2",style:{borderColor:o.colors.cardBg||"rgba(255,255,255,0.2)",background:o.colors.accent,opacity:.9,boxShadow:o.id==="neon_nights"?"0 0 10px rgba(255,0,255,0.5)":void 0}}),e.jsx("div",{className:"w-full h-8 flex items-center justify-center",style:{background:o.buttons.style==="outline"?"transparent":o.buttons.style==="glass"?"rgba(255,255,255,0.2)":o.buttons.style==="soft"?o.colors.cardBg||"#fff":o.colors.accent,border:o.buttons.style==="outline"?`1px solid ${o.colors.text}`:o.buttons.style==="glass"?"1px solid rgba(255,255,255,0.3)":o.buttons.style==="hard-shadow"?"1px solid black":"none",borderRadius:o.buttons.radius==="full"?"999px":o.buttons.radius==="lg"?"6px":o.buttons.radius==="sm"?"2px":"0px",boxShadow:o.buttons.style==="hard-shadow"?"2px 2px 0px rgba(0,0,0,1)":o.buttons.shadow,...m(o.buttons.customShape)},children:e.jsx("div",{className:"w-12 h-1 bg-current opacity-40 rounded-full",style:{color:o.colors.text}})}),e.jsx("div",{className:"w-full h-8 flex items-center justify-center opacity-70",style:{background:o.buttons.style==="outline"?"transparent":o.buttons.style==="glass"?"rgba(255,255,255,0.2)":o.buttons.style==="soft"?o.colors.cardBg||"#fff":o.colors.accent,border:o.buttons.style==="outline"?`1px solid ${o.colors.text}`:o.buttons.style==="glass"?"1px solid rgba(255,255,255,0.3)":o.buttons.style==="hard-shadow"?"1px solid black":"none",borderRadius:o.buttons.radius==="full"?"999px":o.buttons.radius==="lg"?"6px":o.buttons.radius==="sm"?"2px":"0px",boxShadow:o.buttons.style==="hard-shadow"?"2px 2px 0px rgba(0,0,0,1)":o.buttons.shadow,...m(o.buttons.customShape)}})]}),e.jsxs("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-black/40 backdrop-blur-sm z-10 flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-white tracking-wide truncate flex-1 min-w-0",children:o.name}),e.jsxs("div",{className:"flex gap-2",children:[c&&e.jsx("div",{onClick:j=>{j.stopPropagation(),c()},className:`p-1.5 rounded-full items-center justify-center transition-all hidden group-hover:flex backdrop-blur-md cursor-pointer border ${l?"bg-blue-500 text-white border-blue-400 shadow-[0_0_10px_rgba(59,130,246,0.5)]":"bg-gray-900/80 hover:bg-gray-800 text-gray-300 border-white/10"}`,title:l?"Disable Snow":"Enable Snow",children:e.jsx(Jt,{size:14})}),e.jsxs("div",{className:"flex gap-1",children:[s&&e.jsx("div",{onClick:j=>{j.stopPropagation(),s(o)},className:"px-2 py-1.5 bg-gray-900/90 hover:bg-black text-[11px] font-medium items-center text-gray-100 rounded-l-full transition-all hidden group-hover:flex whitespace-nowrap backdrop-blur-md cursor-pointer border border-white/10 shadow-sm",title:"Change Background Image",children:e.jsx(X,{size:12})}),x&&(o.backgroundConfig?.type==="image"||String(o.colors?.background||"").includes("url("))&&e.jsx("div",{onClick:j=>{j.stopPropagation(),x(o)},className:`px-2 py-1.5 bg-gray-900/90 hover:bg-black text-[11px] font-medium items-center text-gray-100 ${s?"rounded-r-full border-l-0":"rounded-full"} transition-all hidden group-hover:flex whitespace-nowrap backdrop-blur-md cursor-pointer border border-white/10 shadow-sm`,title:"Edit with AI",children:e.jsx("span",{className:"text-xs",children:"âœ¨"})})]})]})]})]}),w&&u&&e.jsx("button",{onClick:j=>{j.stopPropagation(),u(o.id)},className:"absolute top-2 left-2 z-30 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete Theme",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})]},o.id)};return e.jsxs("div",{className:"space-y-6",children:[i.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Your Themes"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.map(o=>d(o,!0))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Presets"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.values(R).map(o=>d(o))})]})]})},Yr=({portfolioData:t,onUpdate:r,isLinkInBio:a,editorTheme:i,themeClasses:u,userThemes:x,handleDeleteThemeClick:s,handleEditBackground:c,handleThemeStockPhoto:l,handleSaveCustomThemeClick:m,onTogglePreview:d,userPortfolios:o=[],onImportTheme:w})=>{const[C,j]=f.useState(""),[n,g]=f.useState(null),p=o.filter(S=>S.mode==="linkinbio"),N=S=>{const I=p.find(k=>k.id===S);if(I){const k=Cr(I);g(k)}},M=()=>{n&&w&&(w(n),g(null),j(""))};return e.jsx("div",{className:"space-y-6 animate-fade-in",children:a?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(Hr,{currentThemeId:t.linkInBio?.themeId,onSelectTheme:S=>r({linkInBio:{...t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"Your Name",bio:"Your Bio",profileImage:"",buttonLayout:"stack"},customStyle:{...t.linkInBio?.customStyle||{},backgroundOverride:null},themeId:S}}),onDoubleSelect:()=>d?.(),userThemes:x,onDeleteTheme:s,onEditBackground:c,onPickBg:l,isSnowEnabled:t.linkInBio?.customStyle?.enableSnow||!1,onToggleSnow:()=>r({linkInBio:{...t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"Your Name",bio:"Your Bio",profileImage:"",buttonLayout:"stack"},customStyle:{...t.linkInBio?.customStyle||{},enableSnow:!t.linkInBio?.customStyle?.enableSnow}}})}),e.jsxs("button",{onClick:m,className:"w-full py-2 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-500 rounded-lg text-xs font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(re,{size:14})," Save Current Design as Theme"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-indigo-500/10 rounded-lg border border-indigo-500/20",children:[e.jsxs("h3",{className:"text-sm font-semibold text-indigo-400 mb-1 flex items-center gap-2",children:[e.jsx(K,{size:14}),"Design & Theming"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Customize the look and feel of your portfolio."})]}),e.jsxs("div",{className:"space-y-4",children:[t.mode==="business_card"&&e.jsxs("div",{className:"p-4 border rounded-lg border-purple-500/20 bg-purple-500/5 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(fr,{size:14,className:"text-purple-400"}),e.jsx("label",{className:"block text-xs font-semibold text-purple-400 uppercase",children:"Match Portfolio Design"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Import colors and fonts from your link-in-bio portfolios"}),p.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:C,onChange:S=>{j(S.target.value),S.target.value?N(S.target.value):g(null)},className:`w-full border rounded-lg px-3 py-2 text-sm outline-none focus:border-purple-500 ${u.inputBg}`,children:[e.jsx("option",{value:"",children:"Select a portfolio..."}),p.map(S=>e.jsx("option",{value:S.id,children:S.title||S.hero?.headline||"Untitled Portfolio"},S.id))]}),n&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Preview:"}),e.jsx("p",{className:"text-xs font-mono text-purple-300",children:Br(n)}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[n.primaryColor&&e.jsx("div",{className:"w-8 h-8 rounded border border-white/20",style:{backgroundColor:n.primaryColor},title:`Primary: ${n.primaryColor}`}),n.backgroundColor&&e.jsx("div",{className:"w-8 h-8 rounded border border-white/20",style:{backgroundColor:n.backgroundColor},title:`Background: ${n.backgroundColor}`}),n.textColor&&e.jsx("div",{className:"w-8 h-8 rounded border border-white/20",style:{backgroundColor:n.textColor},title:`Text: ${n.textColor}`})]})]}),e.jsx("button",{onClick:M,className:"w-full py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-xs font-medium transition-colors",children:"Apply Design"})]})]}):e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg border border-white/10 text-center",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"No link-in-bio portfolios found"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Create a link-in-bio portfolio first to import its design"})]})]}),t.mode==="business_card"&&e.jsxs("div",{className:"p-3 border rounded-lg border-indigo-500/20 bg-indigo-500/5",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:"Card Orientation"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r({businessCard:{...t.businessCard,orientation:"horizontal"}}),className:`flex-1 py-1.5 px-3 rounded text-xs font-medium transition-colors border ${t.businessCard?.orientation!=="vertical"?i==="dark"?"bg-indigo-500/20 border-indigo-500/50 text-indigo-300":"bg-indigo-50 border-indigo-200 text-indigo-700":i==="dark"?"bg-transparent border-white/10 text-gray-400 hover:bg-white/5":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"Horizontal"}),e.jsx("button",{onClick:()=>r({businessCard:{...t.businessCard,orientation:"vertical"}}),className:`flex-1 py-1.5 px-3 rounded text-xs font-medium transition-colors border ${t.businessCard?.orientation==="vertical"?i==="dark"?"bg-indigo-500/20 border-indigo-500/50 text-indigo-300":"bg-indigo-50 border-indigo-200 text-indigo-700":i==="dark"?"bg-transparent border-white/10 text-gray-400 hover:bg-white/5":"bg-white border-gray-200 text-gray-500 hover:bg-gray-50"}`,children:"Vertical"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:"Typography"}),e.jsxs("select",{value:t.theme.fontFamily||"Inter",onChange:S=>r({theme:{...t.theme,fontFamily:S.target.value}}),className:`w-full border rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo-500 ${u.inputBg}`,children:[e.jsx("option",{value:"Inter",children:"Inter (Sans-serif)"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"'Playfair Display', serif",children:"Playfair Display (Serif)"}),e.jsx("option",{value:"'Space Mono', monospace",children:"Space Mono (Code)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:"Theme Colors"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u.cardBg}`,children:[e.jsx("span",{className:`text-sm ${u.textMain}`,children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"}`,children:e.jsx("input",{type:"color",value:t.theme.primaryColor,onChange:S=>r({theme:{...t.theme,primaryColor:S.target.value}}),className:"w-[150%] h-[150%] -m-1 cursor-pointer"})}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:t.theme.primaryColor})]})]}),e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u.cardBg}`,children:[e.jsx("span",{className:`text-sm ${u.textMain}`,children:"Text Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"}`,children:e.jsx("input",{type:"color",value:t.theme.textColor||"#ffffff",onChange:S=>r({theme:{...t.theme,textColor:S.target.value}}),className:"w-[150%] h-[150%] -m-1 cursor-pointer"})}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:t.theme.textColor||"Default"})]})]}),e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${u.cardBg}`,children:[e.jsx("span",{className:`text-sm ${u.textMain}`,children:"Background Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border overflow-hidden ${i==="dark"?"border-white/10":"border-gray-200"}`,children:e.jsx("input",{type:"color",value:t.theme.backgroundColor||"#000000",onChange:S=>r({theme:{...t.theme,backgroundColor:S.target.value}}),className:"w-[150%] h-[150%] -m-1 cursor-pointer"})}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:t.theme.backgroundColor||"Default"})]})]})]})]})]})]})})},qr=({portfolioData:t,onUpdate:r,editorTheme:a})=>{const i={Minimal:["card_minimal","card_modern","card_photo"],"Neo-Brutalism":["brutalist_yellow","brutalist_pink","brutalist_blue","brutalist_orange","brutalist_bw"],Professional:["pro_executive","pro_clean","tech_future"],Creative:["creative_gradient","card_creative_dark","nature_calm","abstract_art"]};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"p-4 bg-indigo-500/10 rounded-lg border border-indigo-500/20",children:[e.jsx("h3",{className:"text-sm font-semibold text-indigo-400 mb-1",children:"Card Templates"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Choose a style for your NFC digital card."})]}),Object.entries(i).map(([u,x])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xs font-semibold uppercase text-gray-500",children:u}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(s=>{const c=Ot[s];if(!c)return null;const l=t.templateId===s,m=l&&t.businessCard?.usePhotoBackground,d=()=>{r({templateId:s,businessCard:{...t.businessCard,orientation:t.businessCard?.orientation||"horizontal",usePhotoBackground:!1}})},o=w=>{w.stopPropagation(),r({templateId:s,businessCard:{...t.businessCard,orientation:t.businessCard?.orientation||"horizontal",usePhotoBackground:!0}})};return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:d,className:`
                                            w-full relative overflow-hidden rounded-lg aspect-[1.58] border transition-all duration-200 text-left
                                            ${l&&!m?"ring-2 ring-indigo-500 border-transparent shadow-lg shadow-indigo-500/20":a==="dark"?"border-white/10 hover:border-white/30":"border-gray-200 hover:border-gray-400"}
                                        `,children:[e.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center transition-opacity",style:{backgroundColor:c.baseColor||"#1a1a1a",backgroundImage:c.textureUrl?`url(${c.textureUrl})`:void 0}}),c.overlayStyle.glass&&e.jsx("div",{className:"absolute inset-0 z-10",style:{backdropFilter:`blur(${c.overlayStyle.blur}px)`,backgroundColor:`rgba(255,255,255,${c.overlayStyle.opacity*.1})`,background:c.overlayStyle.gradient}}),c.overlayStyle.border&&e.jsx("div",{className:"absolute inset-2 z-20 pointer-events-none",style:{border:c.overlayStyle.border}}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/80 to-transparent z-30 flex items-center justify-between",children:e.jsx("span",{className:"text-white text-xs font-medium drop-shadow-md",children:c.label})}),l&&!m&&e.jsx("div",{className:"absolute top-2 right-2 z-40 bg-indigo-500 text-white rounded-full p-1 shadow-md",children:e.jsx(ct,{size:12})})]}),e.jsx("button",{onClick:o,className:`
                                            absolute bottom-2 right-2 z-50 p-1.5 rounded-md transition-all shadow-sm border
                                            ${m?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30":"bg-white/90 text-gray-500 border-gray-200 hover:bg-white hover:text-indigo-600"}
                                        `,title:"Use Photo Background",children:e.jsx(X,{size:14})})]},s)})})]},u))]})},ut=({isOpen:t,onClose:r,onSelect:a})=>{const[i,u]=f.useState("professional"),[x,s]=f.useState("");if(!t)return null;const c=Object.keys(Ke),l=Ke[i];return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] rounded-xl shadow-2xl w-full max-w-4xl max-h-[85vh] flex flex-col overflow-hidden border border-gray-200 dark:border-white/10",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-white/10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Stock Library"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Select a free photo for your portfolio"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:e.jsx(ae,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsx("div",{className:"flex items-center gap-2 p-4 pb-0 overflow-x-auto border-b border-gray-200 dark:border-white/10 hide-scrollbar",children:c.map(m=>e.jsx("button",{onClick:()=>u(m),className:`px-4 py-2 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${i===m?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}`,children:m.charAt(0).toUpperCase()+m.slice(1)},m))}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 dark:bg-[#0f1117]",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:l.map((m,d)=>e.jsxs("button",{onClick:()=>{a(m),r()},className:"group relative aspect-[3/4] rounded-lg overflow-hidden border border-gray-200 dark:border-white/5 hover:border-indigo-500 transition-all focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("img",{src:m,alt:"Stock",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"})]},d))})})]})})},Jr=({portfolioData:t,onUpdate:r,themeClasses:a})=>{const[i,u]=q.useState(!1),[x,s]=q.useState(!1),c=q.useRef(null),l=t.linkInBio?.introPage||{enabled:!1,buttonText:"Enter Site",buttonStyle:"outline",assets:[],activeAssetId:void 0};q.useEffect(()=>{if(l.enabled&&(!l.assets||l.assets.length===0)&&l.type){const n={id:He(),label:"Default Intro",type:l.type,contentUrl:l.contentUrl,mobileContentUrl:l.mobileContentUrl,objectFit:l.objectFit,mobileObjectFit:l.mobileObjectFit,gameType:l.gameType,embedCode:l.embedCode,pianoConfig:l.pianoConfig};m({assets:[n],activeAssetId:n.id})}},[]);const m=n=>{const g=t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"",bio:""};r({linkInBio:{...g,introPage:{...l,...n}}})},d=q.useMemo(()=>l.assets?.length?l.assets.find(n=>n.id===l.activeAssetId)||l.assets[0]:null,[l.assets,l.activeAssetId]),o=n=>{if(!d)return;const g=l.assets?.map(p=>p.id===d.id?{...p,...n}:p)||[];m({assets:g})},w=()=>{const n={id:He(),label:`New Content ${(l.assets?.length||0)+1}`,type:"image",objectFit:"cover"},g=[...l.assets||[],n];m({assets:g,activeAssetId:n.id})},C=(n,g)=>{g.stopPropagation();const p=l.assets?.filter(M=>M.id!==n)||[];let N=l.activeAssetId;n===l.activeAssetId&&(N=p[0]?.id),m({assets:p,activeAssetId:N})},j=async(n,g="desktop")=>{const p=n.target.files?.[0];if(p){u(!0);try{const N=await rt(p,`portfolio/${t.id}/intro_content_${g}_${Date.now()}`);o(g==="mobile"?{mobileContentUrl:N}:{contentUrl:N})}catch(N){console.error("Error uploading file:",N),alert("Failed to upload file. Please try again.")}finally{u(!1),c.current&&(c.current.value="")}}};return e.jsxs("div",{className:`p-4 rounded-lg border ${a.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Fe,{className:"text-pink-500",size:20}),e.jsx("h3",{className:`font-semibold ${a.textMain}`,children:"Intro / Splash Page"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Enable Intro Page"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Show a splash screen before your links."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l.enabled,onChange:n=>m({enabled:n.target.checked})}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-pink-300 dark:peer-focus:ring-pink-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-pink-600"})]})]}),l.enabled&&e.jsxs("div",{className:"space-y-6 animate-fade-in-up border-t border-gray-100 dark:border-gray-800 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ${a.textMuted}`,children:"Your Content"}),e.jsxs("button",{onClick:w,className:"text-xs flex items-center gap-1 text-pink-600 font-bold hover:bg-pink-50 px-2 py-1 rounded transition-colors",children:[e.jsx(re,{size:14})," New"]})]}),e.jsxs("div",{className:"space-y-2",children:[(l.assets||[]).map(n=>e.jsxs("div",{onClick:()=>m({activeAssetId:n.id}),className:`
                                        group flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all relative overflow-hidden
                                        ${n.id===l.activeAssetId?"bg-gradient-to-r from-pink-50 to-white dark:from-pink-900/20 dark:to-transparent border-pink-200 dark:border-pink-800 ring-1 ring-pink-100 dark:ring-pink-900":`${a.inputBgDarker} border-transparent hover:border-gray-200 dark:hover:border-gray-700`}
                                    `,children:[e.jsx("div",{className:`
                                        w-10 h-10 rounded-lg flex items-center justify-center shrink-0
                                        ${n.type==="game"?"bg-purple-100 text-purple-600":n.type==="video"?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"}
                                    `,children:n.type==="game"?e.jsx(Ye,{size:20}):n.type==="video"?e.jsx(Xe,{size:20}):e.jsx(X,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("input",{type:"text",value:n.label,onChange:g=>{const p=l.assets?.map(N=>N.id===n.id?{...N,label:g.target.value}:N);m({assets:p})},onClick:g=>g.stopPropagation(),className:"bg-transparent text-sm font-semibold w-full focus:outline-none focus:border-b border-pink-300"}),e.jsx("div",{className:"text-[10px] text-gray-400 truncate",children:n.type==="game"?n.gameType||"Custom":n.contentUrl?"Has content":"Empty"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[n.id===l.activeAssetId&&e.jsx("span",{className:"text-[10px] font-bold text-pink-600 bg-pink-100 px-2 py-0.5 rounded-full mr-2",children:"Active"}),e.jsx("button",{onClick:g=>C(n.id,g),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:e.jsx(D,{size:14})})]}),n.id===l.activeAssetId&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-pink-500"})]},n.id)),l.assets?.length===0&&e.jsx("div",{className:"text-center py-4 text-xs text-gray-400 italic border rounded-lg border-dashed",children:'No content yet. Click "New" to start.'})]})]}),d&&e.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-100 dark:border-gray-800 animate-slide-in-right",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:`text-xs font-semibold uppercase tracking-wider ${a.textMuted}`,children:["Editing: ",d.label]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"image",icon:X,label:"Image"},{id:"video",icon:Xe,label:"Video"},{id:"game",icon:Ye,label:"Game"}].map(n=>e.jsxs("button",{onClick:()=>o({type:n.id}),className:`flex flex-col items-center justify-center p-3 rounded-xl border transition-all ${d.type===n.id?"bg-pink-50 dark:bg-pink-900/20 border-pink-200 dark:border-pink-800 text-pink-600":`${a.inputBgDarker} border-transparent hover:border-gray-300 text-gray-500`}`,children:[e.jsx(n.icon,{size:20,className:"mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:n.label})]},n.id))})]}),(d.type==="image"||d.type==="video")&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ${a.textMuted}`,children:"Desktop / Default"}),e.jsxs("select",{value:d.objectFit||"cover",onChange:n=>o({objectFit:n.target.value}),className:`text-xs px-2 py-1 rounded border ${a.inputBg}`,children:[e.jsx("option",{value:"cover",children:"Fill Screen (Cover)"}),e.jsx("option",{value:"contain",children:"Fit Image (Contain)"})]})]}),d.contentUrl?e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 aspect-video bg-gray-100 dark:bg-gray-900",children:[d.type==="image"?e.jsx("img",{src:d.contentUrl,alt:"Desktop Intro",className:"w-full h-full",style:{objectFit:d.objectFit||"cover"}}):e.jsx("video",{src:d.contentUrl,className:"w-full h-full",style:{objectFit:d.objectFit||"cover"},muted:!0,loop:!0,playsInline:!0}),e.jsx("div",{className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:()=>o({contentUrl:void 0}),className:"p-1.5 bg-black/50 text-white rounded-full hover:bg-black/70",children:e.jsx(ae,{size:14})})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>c.current?.click(),disabled:i,className:`flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${a.inputBgDarker}`,children:[e.jsx(re,{size:24,className:"text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:i?"Uploading...":"Upload File"}),e.jsx("input",{ref:c,type:"file",className:"hidden",accept:d.type==="image"?"image/*":"video/*",onChange:n=>j(n,"desktop")})]}),d.type==="image"&&e.jsxs("button",{onClick:()=>s(!0),className:`flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${a.inputBgDarker}`,children:[e.jsx(X,{size:24,className:"text-gray-400 mb-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Stock Library"})]})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ${a.textMuted}`,children:"Mobile (Optional)"}),e.jsxs("select",{value:d.mobileObjectFit||"cover",onChange:n=>o({mobileObjectFit:n.target.value}),className:`text-xs px-2 py-1 rounded border ${a.inputBg}`,children:[e.jsx("option",{value:"cover",children:"Fill Screen (Cover)"}),e.jsx("option",{value:"contain",children:"Fit Image (Contain)"})]})]}),d.mobileContentUrl?e.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-gray-200 dark:border-gray-700 aspect-[9/16] w-1/3 mx-auto bg-gray-100 dark:bg-gray-900",children:[d.type==="image"?e.jsx("img",{src:d.mobileContentUrl,alt:"Mobile Intro",className:"w-full h-full",style:{objectFit:d.mobileObjectFit||"cover"}}):e.jsx("video",{src:d.mobileContentUrl,className:"w-full h-full",style:{objectFit:d.mobileObjectFit||"cover"},muted:!0,loop:!0,playsInline:!0}),e.jsx("button",{onClick:()=>o({mobileContentUrl:void 0}),className:"absolute top-2 right-2 p-1.5 bg-black/50 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-black/70",children:e.jsx(ae,{size:14})})]}):e.jsxs("button",{onClick:()=>{const n=document.createElement("input");n.type="file",n.accept=d.type==="image"?"image/*":"video/*",n.onchange=g=>j(g,"mobile"),n.click()},disabled:i,className:`w-full flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${a.inputBgDarker}`,children:[e.jsx(re,{size:18,className:"text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Upload Mobile Version (9:16)"})]}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"If not provided, the desktop version will be used."})]})]}),d.type==="game"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ${a.textMuted}`,children:"Select Game"}),e.jsxs("select",{value:d.gameType||"bubble_pop",onChange:n=>o({gameType:n.target.value}),className:`w-full px-3 py-2 border rounded-lg text-sm ${a.inputBg}`,children:[e.jsx("option",{value:"bubble_pop",children:"Bubble Pop"}),e.jsx("option",{value:"quiz",children:"Daily Tech Quiz"}),e.jsx("option",{value:"piano_flow",children:"Piano Flow"}),e.jsx("option",{value:"custom",children:"Custom Embed"})]}),d.gameType==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Embed Code (Iframe)"}),e.jsx("textarea",{value:d.embedCode||"",onChange:n=>o({embedCode:n.target.value}),placeholder:"<iframe src='...'></iframe>",className:`w-full px-3 py-2 border rounded-lg text-sm font-mono h-24 ${a.inputBg}`})]})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-100 dark:border-gray-800",children:[e.jsx("label",{className:`text-xs font-semibold uppercase tracking-wider ${a.textMuted}`,children:"Enter Button"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Button Text"}),e.jsx("input",{type:"text",value:l.buttonText,onChange:n=>m({buttonText:n.target.value}),className:`w-full px-3 py-2 border rounded-lg text-sm ${a.inputBg}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Button Style"}),e.jsx("div",{className:"flex gap-2",children:["outline","solid","glass"].map(n=>e.jsx("button",{onClick:()=>m({buttonStyle:n}),className:`px-3 py-1.5 text-xs font-medium rounded-lg border transition-colors ${l.buttonStyle===n?"bg-pink-50 border-pink-200 text-pink-600 dark:bg-pink-900/30 dark:border-pink-800 dark:text-pink-400":"border-gray-200 dark:border-gray-700 text-gray-500 hover:border-gray-300"}`,children:n.charAt(0).toUpperCase()+n.slice(1)},n))})]})]})]}),e.jsx(ut,{isOpen:x,onClose:()=>s(!1),onSelect:n=>{o({contentUrl:n}),s(!1)}})]})},Qr=({portfolioData:t,onUpdate:r,resumes:a,themeClasses:i})=>{const u=s=>{r({linkInBio:{...t.linkInBio,enableStore:s}})},x=(s,c)=>{const l=t.linkInBio?.customStyle?.effects||{};r({linkInBio:{...t.linkInBio,customStyle:{...t.linkInBio?.customStyle||{},effects:{...l,[s]:c}}}})};return e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx(Jr,{portfolioData:t,onUpdate:r,themeClasses:i}),e.jsxs("div",{className:`p-4 rounded-lg border ${i.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(nt,{className:"text-blue-500",size:20}),e.jsx("h3",{className:`font-semibold ${i.textMain}`,children:"Commerce Hub"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Enable Storefront"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Sell products directly from your bio link."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.enableStore||!1,onChange:s=>u(s.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsxs("p",{className:`text-xs mt-3 ${i.textMuted}`,children:["Manage your products in the ",e.jsx("a",{href:"/commerce",target:"_blank",className:"text-blue-500 hover:underline",children:"Commerce Dashboard"}),"."]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${i.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Fe,{className:"text-purple-500",size:20}),e.jsx("h3",{className:`font-semibold ${i.textMain}`,children:"Animation Hub"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Enhance your page with interactive and ambient effects."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Celebration Confetti"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Bursts of confetti when links are clicked"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.confetti||!1,onChange:s=>x("confetti",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Snow & Particles"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Gentle falling particles overlay"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.particles||!1,onChange:s=>x("particles",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Matrix Rain"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Falling digital code effect"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.matrix||!1,onChange:s=>x("matrix",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Ambient Blobs"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Floating colorful background orbs"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.blobs||!1,onChange:s=>x("blobs",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Retro Scanlines"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"CRT monitor style overlay"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.scanlines||!1,onChange:s=>x("scanlines",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Film Noise"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Textured grain overlay"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.noise||!1,onChange:s=>x("noise",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Cyber Grid"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Retro 80s moving perspective grid"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.grid||!1,onChange:s=>x("grid",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Fireflies"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Gentle floating glowing orbs"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.fireflies||!1,onChange:s=>x("fireflies",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Starfield"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Deep space twinkling stars"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.stars||!1,onChange:s=>x("stars",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Liquid Waves"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"Abstract flowing fluid waves"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.customStyle?.effects?.waves||!1,onChange:s=>x("waves",s.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"})]})]})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${i.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ne,{className:"text-indigo-400",size:20}),e.jsx("h3",{className:`font-semibold ${i.textMain}`,children:"Attachments"})]}),e.jsxs("div",{id:"resume.selector",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 mb-2 uppercase",children:"Attach Resume"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Select a resume from your database to display as a download link on your portfolio."}),e.jsxs("select",{value:t.attachedResumeId||"",onChange:s=>r({attachedResumeId:s.target.value}),className:`w-full border rounded-lg px-3 py-2 text-sm outline-none focus:border-indigo-500 transition-colors ${i.inputBg}`,children:[e.jsx("option",{value:"",children:"-- No Resume Attached --"}),a.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${i.cardBg}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(yr,{className:"text-amber-400",size:20}),e.jsx("h3",{className:`font-semibold ${i.textMain}`,children:"Premium Branding"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200",children:"Remove Branding"}),e.jsx("p",{className:"text-xs text-gray-500",children:'Hide "Created with CareerVivid"'})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:t.linkInBio?.settings?.removeBranding||!1,onChange:s=>{r({linkInBio:{...t.linkInBio,settings:{...t.linkInBio?.settings,removeBranding:s.target.checked}}})}}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 dark:peer-focus:ring-indigo-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-indigo-600"})]})]})]})]})},Zr=({portfolioData:t,activeSection:r,setActiveSection:a,isMobile:i,viewMode:u,resumes:x,onUpdate:s,onNestedUpdate:c,onImageUploadTrigger:l,onAIImageEdit:m,isImageUploading:d,editorTheme:o,isPremium:w,onTogglePreview:C,userPortfolios:j,onImportTheme:n,onStockPhotoTrigger:g,onUpgradeTrigger:p})=>{const N=t.mode==="linkinbio",S=t.mode==="linkinbio"?[{id:"hero",icon:e.jsx(fe,{size:18}),label:"Profile"},{id:"links",icon:e.jsx(oe,{size:18}),label:"Links"},{id:"design",icon:e.jsx(K,{size:18}),label:"Design"},{id:"settings",icon:e.jsx(ne,{size:18}),label:"Settings"}]:t.mode==="business_card"?[{id:"hero",icon:e.jsx(fe,{size:18}),label:"Card Details"},{id:"design",icon:e.jsx(K,{size:18}),label:"Design"},{id:"settings",icon:e.jsx(ne,{size:18}),label:"Settings"}]:[{id:"hero",icon:e.jsx(fe,{size:18}),label:"Hero"},{id:"timeline",icon:e.jsx(jr,{size:18}),label:"Timeline"},{id:"stack",icon:e.jsx(br,{size:18}),label:"Tech Stack"},{id:"projects",icon:e.jsx(Qt,{size:18}),label:"Projects"},{id:"components",icon:e.jsx(Zt,{size:18}),label:"Components"},{id:"design",label:"Design",icon:e.jsx(K,{size:18})},{id:"settings",label:"Settings",icon:e.jsx(ne,{size:18})},{id:"analytics",label:"Analytics",icon:e.jsx(Ae,{size:18})}],I={sidebarBg:o==="dark"?"bg-[#0f1117] border-white/5":"bg-white border-gray-200",sectionBorder:o==="dark"?"border-white/5":"border-gray-200",cardBg:o==="dark"?"bg-[#1a1d24] border-white/5":"bg-gray-50 border-gray-200",inputBg:o==="dark"?"bg-[#1a1d24] border-white/10 text-white focus:border-indigo-500":"bg-white border-gray-200 text-gray-900 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500",inputBgDarker:o==="dark"?"bg-[#0f1117] border-white/10 text-white":"bg-white border-gray-200 text-gray-900",textMuted:"text-gray-500",textMain:o==="dark"?"text-white":"text-gray-900",placeholder:"placeholder-gray-400"},k=t.templateId==="linktree_visual"?t.linkInBio?.themeId||"linktree_visual":t.templateId,[O,de]=f.useState([]);f.useEffect(()=>{t.userId&&F()},[t.userId]);const F=async()=>{try{const B=await Lr(t.userId);de(B)}catch(B){console.error("Failed to load user themes",B)}},[ee,L]=f.useState(!1),[U,J]=f.useState(!1),[$,P]=f.useState(null),[V,Q]=f.useState({isOpen:!1,title:"",message:""}),je=()=>{L(!0)},ve=async B=>{if(L(!1),!B)return;const Y=t.linkInBio?.themeId||"air",T=O.find(A=>A.id===Y)||R[Y]||R.air,W=t.linkInBio?.customStyle||{},Ne={name:B,category:"minimal",colors:{...T.colors,background:W.backgroundOverride||T.colors.background,text:W.profileTextColor||T.colors.text},buttons:{...T.buttons},fonts:{...T.fonts,heading:W.profileFontFamily||T.fonts.heading,body:W.fontFamily||T.fonts.body},backgroundConfig:T.backgroundConfig||null},Se=JSON.parse(JSON.stringify(Ne));try{const A=await Mr(t.userId,Se);await F(),s({linkInBio:{...t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"Your Name",bio:"Your Bio",profileImage:"",buttonLayout:"stack"},customStyle:null,themeId:A.id}}),Q({isOpen:!0,title:"Success",message:"Theme saved and selected successfully!"})}catch(A){console.error(A),Q({isOpen:!0,title:"Error",message:"Failed to save theme: "+A.message})}},ke=B=>{P(B),J(!0)},se=async()=>{$&&(await Tr($),await F(),P(null),J(!1))},we=B=>{s({linkInBio:{...t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"Your Name",bio:"Your Bio",profileImage:"",buttonLayout:"stack"},themeId:B.id}});let Y="";B.backgroundConfig?.type==="image"?Y=B.backgroundConfig.value:B.colors.background.startsWith("url")&&(Y=B.colors.background);const T=Y.replace(/^url\(['"]?/,"").replace(/['"]?\)$/,"");m("linkInBio.customStyle.backgroundOverride",T,"project")},ue=B=>{s({linkInBio:{...t.linkInBio||{links:[],showSocial:!0,showEmail:!0,displayName:"Your Name",bio:"Your Bio",profileImage:"",buttonLayout:"stack"},themeId:B.id}}),g&&g("linkInBio.customStyle.backgroundOverride")};return e.jsxs("div",{className:`
            border-r flex-col shrink-0 z-10 transition-all duration-300
            ${o==="dark"?"bg-[#0f1117] border-white/5":"bg-white border-gray-200"}
            ${i?"w-full absolute inset-0 z-20":"w-[400px] relative"}
            ${i&&u==="preview"?"hidden":"flex"}
        `,children:[i&&e.jsx(Er,{activeSectionLabel:S.find(B=>B.id===r)?.label||"Editor",onTogglePreview:C,viewMode:u,editorTheme:o,themeClasses:I}),!i&&e.jsx(Fr,{portfolioData:t,onUpdate:s,currentSelection:k,editorTheme:o,themeClasses:I,isPremium:w,onUpgradeTrigger:p}),!i&&e.jsx(_r,{sections:S,activeSection:r,setActiveSection:a,editorTheme:o,themeClasses:I}),e.jsxs("div",{className:`flex-1 overflow-y-auto p-6 space-y-6 ${i?"pb-24":""}`,children:[r==="links"&&N&&t.linkInBio&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Pr,{linkInBio:t.linkInBio,onUpdate:B=>s({linkInBio:B}),theme:o,onImageUploadTrigger:l}),e.jsx(dt,{portfolioData:t,onUpdate:s,themeClasses:I,editorTheme:o})]}),r==="hero"&&e.jsx(Or,{portfolioData:t,onUpdate:s,onNestedUpdate:c,onImageUploadTrigger:l,onAIImageEdit:m,isImageUploading:d,themeClasses:I,editorTheme:o,isLinkInBio:N,onStockPhotoTrigger:g}),r==="timeline"&&e.jsx(Ur,{portfolioData:t,onUpdate:s,themeClasses:I,editorTheme:o}),r==="stack"&&e.jsx(Wr,{portfolioData:t,onUpdate:s,themeClasses:I}),r==="projects"&&e.jsx(Gr,{portfolioData:t,onUpdate:s,onImageUploadTrigger:l,onAIImageEdit:m,themeClasses:I,editorTheme:o}),r==="components"&&e.jsx(Vr,{portfolioData:t,onNestedUpdate:c,editorTheme:o,themeClasses:I}),r==="design"&&e.jsx(e.Fragment,{children:t.mode==="business_card"?e.jsx(qr,{portfolioData:t,onUpdate:s,editorTheme:o}):e.jsx(Yr,{portfolioData:t,onUpdate:s,isLinkInBio:N,editorTheme:o,themeClasses:I,userThemes:O,handleDeleteThemeClick:ke,handleEditBackground:we,handleThemeStockPhoto:ue,handleSaveCustomThemeClick:je,onTogglePreview:C,userPortfolios:j,onImportTheme:n})}),r==="settings"&&e.jsx(Qr,{portfolioData:t,onUpdate:s,resumes:x,themeClasses:I})]}),i&&e.jsx(Rr,{sections:S,activeSection:r,setActiveSection:a,editorTheme:o}),e.jsx(Ar,{isOpen:ee,onConfirm:ve,onCancel:()=>L(!1),title:"Save Custom Theme",message:"Enter a name for your custom theme:",placeholder:"My Awesome Theme",confirmText:"Save Theme"}),e.jsx(ot,{isOpen:V.isOpen,onClose:()=>Q({...V,isOpen:!1}),title:V.title,message:V.message}),e.jsx(hr,{isOpen:U,onConfirm:se,onCancel:()=>J(!1),title:"Delete Theme",message:"Are you sure you want to delete this theme? This action cannot be undone.",confirmText:"Delete",variant:"danger"})]})},Kr=({portfolioData:t,activeDevice:r,viewMode:a,isMobile:i,onFocusField:u,onUpdate:x,onClosePreview:s})=>{const[c,l]=f.useState(r),[m,d]=f.useState(!1),[o,w]=f.useState(1);f.useEffect(()=>{l(r)},[r]);const C=f.useMemo(()=>{if(!t)return ie.minimalist;if(t.mode==="linkinbio"){const g=t.templateId;return["linktree_minimal","linktree_visual","linktree_corporate","linktree_bento"].includes(g)?ie[g]:ie.linktree_visual}return ie[t.templateId]||ie.minimalist},[t?.templateId,t?.mode]),j=()=>w(g=>Math.min(g+.1,1.5)),n=()=>w(g=>Math.max(g-.1,.5));return t?e.jsxs("div",{className:`
            flex-1 relative flex items-center justify-center p-8 overflow-hidden 
            bg-[#f9fafb] dark:bg-[#0b0c10] bg-dot-pattern
            ${i&&a==="edit"?"hidden":"flex"}
        `,children:[e.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 z-30",children:[e.jsxs("div",{className:"flex bg-white rounded-lg shadow-sm border border-gray-200 p-1 mr-2",children:[e.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-md transition-colors",title:"Zoom Out",children:e.jsx(Kt,{size:18})}),e.jsxs("div",{className:"flex items-center px-1 text-xs font-mono text-gray-400",children:[Math.round(o*100),"%"]}),e.jsx("button",{onClick:j,className:"p-2 text-gray-400 hover:text-gray-600 rounded-md transition-colors",title:"Zoom In",children:e.jsx(Xt,{size:18})})]}),t.linkInBio?.introPage?.enabled&&e.jsx("button",{onClick:()=>d(!0),className:"p-2 bg-white rounded-lg shadow-sm border border-gray-200 hover:bg-gray-50 text-gray-600 tooltip-trigger",title:"Replay Intro",children:e.jsx(Ut,{size:18})}),e.jsxs("div",{className:"flex bg-white rounded-lg shadow-sm border border-gray-200 p-1",children:[e.jsx("button",{onClick:()=>l("mobile"),className:`p-2 rounded-md transition-colors ${c==="mobile"?"bg-indigo-50 text-indigo-600":"text-gray-400 hover:text-gray-600"}`,title:"Mobile View",children:e.jsx(it,{size:18})}),e.jsx("button",{onClick:()=>l("desktop"),className:`p-2 rounded-md transition-colors ${c==="desktop"?"bg-indigo-50 text-indigo-600":"text-gray-400 hover:text-gray-600"}`,title:"Desktop View",children:e.jsx(st,{size:18})})]}),s&&e.jsx("button",{onClick:s,className:"w-8 h-8 rounded-full bg-red-400 hover:bg-red-500 text-white flex items-center justify-center transition-colors shadow-sm ml-2",title:"Close Preview",children:e.jsx("span",{className:"font-bold text-lg leading-none",children:"Ã—"})})]}),e.jsxs("div",{className:`
                    transition-all duration-300 shadow-2xl overflow-hidden relative
                    ${c==="mobile"?"w-[375px] h-[750px] rounded-[40px] border-[12px] border-gray-900":"w-full h-full rounded-xl border border-gray-200"}
                `,style:{transform:`scale(${o})`,transformOrigin:"center center"},children:[t.linkInBio?.introPage?.enabled&&m&&e.jsx("div",{className:"absolute inset-0 z-[100] rounded-[inherit] overflow-hidden",children:e.jsx(vr,{config:t.linkInBio.introPage,onEnter:()=>d(!1),position:"absolute",portfolioId:t.id,isPreview:!0})}),e.jsx("div",{className:"w-full h-full overflow-y-auto bg-white custom-scrollbar relative",children:(()=>{const g=t.theme||{darkMode:!1},p=g.darkMode,N=g.backgroundColor?.toLowerCase()==="#ffffff"||g.backgroundColor?.toLowerCase()==="#fff",M=p&&N?"#0f1117":g.backgroundColor||(p?"#0f1117":"#ffffff");return e.jsx("div",{className:"min-h-full transition-colors duration-500",style:{backgroundColor:M},children:e.jsx(C,{data:t,onEdit:u,onUpdate:x,isMobileView:c==="mobile"})})})()})]})]}):null},Xr=({portfolioId:t,ownerId:r})=>{const[a,i]=f.useState([]),[u,x]=f.useState(!0),[s,c]=f.useState(new Set),[l,m]=f.useState("all");f.useEffect(()=>{if(!t||!r){x(!1);return}x(!0);const n=ce(_,"users",r,"messages"),g=Le(n,ye("portfolioId","==",t),ye("isDeleted","==",!1),Nt("createdAt","desc")),p=tt(g,N=>{const M=N.docs.map(S=>({id:S.id,...S.data()}));i(M),x(!1)},N=>{console.error("Inbox data fetch error (check indices):",N),x(!1)});return()=>p()},[t,r]),a.filter(n=>l==="unread"?!n.isRead&&!n.isDone:l==="done"?n.isDone:!n.isDone);const d=a.filter(n=>!0),o=n=>{const g=new Set(s);g.has(n)?g.delete(n):g.add(n),c(g)},w=()=>{if(s.size===d.length)c(new Set);else{const n=new Set(d.map(g=>g.id));c(n)}},C=async n=>{if(s.size===0)return;const g=St(_);s.forEach(p=>{const N=te(_,"users",r,"messages",p);n==="markRead"&&g.update(N,{isRead:!0}),n==="markDone"&&g.update(N,{isDone:!0}),n==="delete"&&g.update(N,{isDeleted:!0})});try{await g.commit(),c(new Set)}catch(p){console.error("Bulk action failed:",p)}},j=async n=>{const g=te(_,"users",r,"messages",n.id);await We(async()=>{const{updateDoc:p}=await import("./eye-off-eUDXhHXq.js").then(N=>N.a);return{updateDoc:p}},__vite__mapDeps([0,1])).then(({updateDoc:p})=>p(g,{isRead:!n.isRead}))};return u?e.jsxs("div",{className:"p-12 text-center text-gray-500",children:[e.jsx(Te,{className:"animate-spin mx-auto mb-2"}),"Loading messages..."]}):e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] rounded-xl border border-gray-100 dark:border-white/5 shadow-sm overflow-hidden flex flex-col h-[600px]",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-white/5 flex items-center justify-between bg-gray-50/50 dark:bg-gray-800/30",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:w,className:"text-gray-500 hover:text-indigo-600 transition-colors",children:s.size>0&&s.size===d.length?e.jsx(qe,{size:18,className:"text-indigo-600"}):e.jsx($e,{size:18})}),e.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:s.size>0?`${s.size} selected`:"Inbox"})]}),s.size>0&&e.jsxs("div",{className:"flex items-center gap-2 ml-4 animate-in fade-in slide-in-from-left-2 duration-200",children:[e.jsxs("button",{onClick:()=>C("markDone"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-white dark:bg-white/10 border border-gray-200 dark:border-white/10 rounded-md hover:bg-gray-50 dark:hover:bg-white/20 transition-colors",children:[e.jsx(De,{size:14,className:"text-green-500"}),"Mark Done"]}),e.jsxs("button",{onClick:()=>C("delete"),className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium bg-white dark:bg-white/10 border border-gray-200 dark:border-white/10 rounded-md hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",children:[e.jsx(D,{size:14}),"Delete"]})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[d.length," total"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-white/5",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[e.jsx(Pe,{size:48,className:"mb-4 opacity-20"}),e.jsx("p",{children:"No messages found"})]}):d.map(n=>{const g=s.has(n.id);return e.jsxs("div",{className:`group flex items-start gap-4 p-4 transition-colors cursor-pointer
                                    ${g?"bg-indigo-50/50 dark:bg-indigo-900/10":"hover:bg-gray-50 dark:hover:bg-white/5"}
                                    ${n.isRead?"":"bg-gray-50 dark:bg-white/[0.02]"}
                                    ${n.isDone?"opacity-60 grayscale-[0.5]":""}
                                `,children:[e.jsx("div",{className:"pt-1",onClick:p=>{p.stopPropagation(),o(n.id)},children:g?e.jsx(qe,{size:18,className:"text-indigo-600"}):e.jsx($e,{size:18,className:"text-gray-300 group-hover:text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>j(n),children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!n.isRead&&!n.isDone&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 shadow-sm shadow-red-500/50"}),e.jsx("span",{className:`text-sm font-semibold truncate ${n.isRead?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:n.senderName}),n.senderEmail&&e.jsxs("span",{className:"text-xs text-gray-400 truncate hidden sm:inline",children:["<",n.senderEmail,">"]})]}),e.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap ml-2",children:n.createdAt&&typeof n.createdAt=="object"&&"seconds"in n.createdAt?new Date(n.createdAt.seconds*1e3).toLocaleDateString():"Just now"})]}),e.jsx("h4",{className:`text-sm mb-1 ${n.isRead?"text-gray-600 dark:text-gray-500":"font-medium text-gray-800 dark:text-gray-200"}`,children:n.subject}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 line-clamp-2",children:n.text})]}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-2 self-center",children:[e.jsx("button",{onClick:p=>{p.stopPropagation(),j(n)},className:"p-1.5 text-gray-400 hover:text-indigo-600 rounded-md hover:bg-gray-100 dark:hover:bg-white/10",title:n.isRead?"Mark as unread":"Mark as read",children:e.jsx(Pe,{size:16})}),e.jsx("button",{onClick:async p=>{p.stopPropagation();const N=te(_,"users",r,"messages",n.id);await We(async()=>{const{updateDoc:M}=await import("./eye-off-eUDXhHXq.js").then(S=>S.a);return{updateDoc:M}},__vite__mapDeps([0,1])).then(({updateDoc:M})=>M(N,{isDone:!n.isDone}))},className:`p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-white/10 ${n.isDone?"text-green-500":"text-gray-400 hover:text-green-600"}`,title:n.isDone?"Mark as undone":"Mark as done",children:e.jsx(De,{size:16})})]})]},n.id)})})]})},Dr=({portfolioId:t,ownerId:r})=>{const[a,i]=f.useState("30d"),[u,x]=f.useState({views:0,uniqueVisitors:0,clicks:0,ctr:0}),[s,c]=f.useState([]),[l,m]=f.useState([]),[d,o]=f.useState([]),[w,C]=f.useState(!0);return f.useEffect(()=>{(async()=>{if(!t||!r){C(!1);return}C(!0);try{const n=new Date,g={"1d":1,"7d":7,"14d":14,"30d":30,"90d":90};n.setDate(n.getDate()-g[a]);const p=ce(_,"users",r,"portfolios",t,"stats"),N=Le(p,ye("timestamp",">=",Ct.fromDate(n))),S=(await Me(N)).docs.map($=>$.data()),I=S.filter($=>$.type==="view"),k=S.filter($=>$.type==="click"),O=new Set(I.map($=>$.visitorId).filter(Boolean)).size,de=I.length>0?k.length/I.length*100:0;x({views:I.length,uniqueVisitors:O||I.length,clicks:k.length,ctr:parseFloat(de.toFixed(1))});const F=new Map;k.forEach($=>{const P=$.label||"Unknown";F.set(P,(F.get(P)||0)+1)});const ee=Array.from(F.entries()).map(([$,P])=>({label:$,clicks:P})).sort(($,P)=>P.clicks-$.clicks).slice(0,5);c(ee);const L=new Map;I.forEach($=>{const P=$.source||"direct";L.set(P,(L.get(P)||0)+1)});const U=I.length,J=Array.from(L.entries()).map(([$,P])=>({source:$,count:P,percentage:U>0?Math.round(P/U*100):0})).sort(($,P)=>P.count-$.count);m(J)}catch(n){console.error("Error fetching analytics:",n)}finally{C(!1)}})()},[t,r,a]),w?e.jsxs("div",{className:"p-8 text-center opacity-50 flex flex-col items-center justify-center gap-2",children:[e.jsx(Te,{className:"animate-spin"})," Loading analytics..."]}):e.jsx("div",{className:"flex-1 bg-gray-50 dark:bg-black/20 p-6 md:p-8 overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Analytics Overview"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Performance metrics for your portfolio."})]}),e.jsx("div",{className:"flex bg-white dark:bg-[#1a1d24] border dark:border-white/10 rounded-lg p-1 shadow-sm self-start",children:["1d","7d","14d","30d","90d"].map(j=>e.jsx("button",{onClick:()=>i(j),className:`px-3 py-1.5 text-xs font-semibold rounded-md transition-all ${a===j?"bg-indigo-600 text-white shadow-md":"text-gray-500 hover:bg-gray-100 dark:hover:bg-white/5 dark:text-gray-400"}`,children:j==="1d"?"24h":j.toUpperCase()},j))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] p-5 rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-60",children:[e.jsx(Ae,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Total Page Views"})]}),e.jsx("div",{className:"text-3xl font-bold",children:u.views}),e.jsx("div",{className:"text-xs text-green-500 mt-2 font-medium",children:"Updated just now"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] p-5 rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-60",children:[e.jsx(kr,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Unique Visitors"})]}),e.jsx("div",{className:"text-3xl font-bold",children:u.uniqueVisitors}),e.jsx("div",{className:"text-xs text-green-500 mt-2 font-medium",children:"Unique IDs"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] p-5 rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-60",children:[e.jsx(Dt,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:"Click-through Rate"})]}),e.jsxs("div",{className:"text-3xl font-bold",children:[u.ctr,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2 font-medium",children:["Based on ",u.clicks," total interactions"]})]})]}),e.jsx(Xr,{portfolioId:t,ownerId:r}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] p-6 rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsx("h3",{className:"font-bold mb-6",children:"Top Interactions"}),e.jsx("div",{className:"space-y-4",children:s.length===0?e.jsx("p",{className:"text-center text-gray-400 py-8 text-sm",children:"No interaction data yet."}):s.map((j,n)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-gray-100 dark:bg-white/10 flex items-center justify-center text-xs font-bold opacity-70",children:n+1}),e.jsx("span",{className:"truncate max-w-[150px]",children:j.label})]}),e.jsxs("div",{className:"font-mono font-medium",children:[j.clicks," clicks"]})]},n))})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1d24] p-6 rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[e.jsx("h3",{className:"font-bold mb-6",children:"Traffic Sources"}),e.jsx("div",{className:"space-y-6",children:l.length===0?e.jsx("p",{className:"text-center text-gray-400 py-8 text-sm",children:"No traffic data yet."}):l.map((j,n)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"capitalize",children:j.source}),e.jsxs("span",{className:"font-mono opacity-60",children:[j.percentage,"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-white/5 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${j.percentage}%`}})})]},n))})]})]})]})})},gn=()=>{const[t,r]=f.useState(!1),a=()=>{const b=window.location.pathname,v=b.match(/\/portfolio\/([^/]+)\/edit\/([^/?#&]+)/);if(v)return{username:v[1],id:v[2]};const h=b.match(/\/edit\/([^/?#&]+)/);return h?{username:null,id:h[1]}:{username:null,id:null}},{currentUser:i,isPremium:u,isAdmin:x}=It(),{theme:s,toggleTheme:c}=Bt(),{resumes:l}=Mt(),{portfolios:m}=$t(),{checkCredit:d,CreditLimitModal:o}=Tt(),[w,C]=f.useState(a().id),[j,n]=f.useState(a().username),[g,p]=f.useState(null),[N,M]=f.useState("desktop"),[S,I]=f.useState("hero"),[k,O]=f.useState(null),[de,F]=f.useState(!1),[ee,L]=f.useState("edit"),[U,J]=f.useState(window.innerWidth<768),[$,P]=f.useState(!1),[V,Q]=f.useState(null),[je,ve]=f.useState(null),[ke,se]=f.useState([]),[we,ue]=f.useState(!1),B=f.useRef(null),[Y,T]=f.useState(!1),[W,Ne]=f.useState("editor"),[Se,A]=f.useState(!1),[Re,xe]=f.useState({title:"Save Your Progress",subtitle:"Sign in to save your portfolio to your dashboard."}),[me,Ce]=f.useState({isOpen:!1,title:"",message:""}),ge=()=>{if(!(!k||!w))try{localStorage.setItem(`portfolio_${w}`,JSON.stringify(k)),console.log("Saved guest portfolio to localStorage")}catch(b){console.error("Failed to save guest data",b)}},xt=()=>{if(!i&&g==="guest"){ge(),xe({title:"Save Your Progress",subtitle:"Sign in to save your portfolio to your dashboard."}),A(!0);return}be("/dashboard")},mt=()=>{if(!i&&g==="guest"){ge(),xe({title:"Save Your Progress",subtitle:"Sign in to save your portfolio to your dashboard."}),A(!0);return}T(!0)},gt=b=>{b?be("/referral?ref=Tj5oQtFf"):be("/dashboard")};f.useEffect(()=>{const b=()=>{J(window.innerWidth<768),window.innerWidth>=768&&L("edit")};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),f.useEffect(()=>{const b=()=>{const v=a();C(v.id),n(v.username)};return window.addEventListener("popstate",b),()=>window.removeEventListener("popstate",b)},[]),f.useEffect(()=>{(async()=>{if(!i){p("guest");return}if(j){const v=i.email?.split("@")[0];if(j===v){console.log("[Editor] Username matches current user. Using current UID:",i.uid),p(i.uid);return}console.log("[Editor] Resolving username to UID:",j);const h=await Sr(j);h?(p(h),console.log("[Editor] Resolved owner UID:",h)):(console.error("[Editor] Could not resolve username:",j),p(i.uid))}else p(i.uid)})()},[j,i]);const Oe=(b,v)=>{const h=b.data(),y=h.templateId||"minimalist";let z=h.mode;const E=["linktree_minimal","linktree_visual","linktree_corporate","linktree_bento"].includes(y)||R&&y in R;return!z&&E&&(z="linkinbio"),console.log("[Editor] Hydrating Data. Mode:",z,"Template:",y,"Has LinkInBio:",!!h.linkInBio,"Theme:",h.linkInBio?.themeId),{id:b.id,userId:h.userId||v,title:h.title||"Untitled Portfolio",templateId:y,section:h.section||"portfolios",mode:z||"portfolio",linkInBio:h.linkInBio,hero:h.hero||{headline:"",subheadline:"",ctaPrimaryLabel:"",ctaPrimaryUrl:"",ctaSecondaryLabel:"",ctaSecondaryUrl:""},about:h.about||"",timeline:h.timeline||[],education:h.education||[],techStack:h.techStack||[],projects:h.projects||[],socialLinks:h.socialLinks||[],contactEmail:h.contactEmail||"",phone:h.phone||"",theme:h.theme||{primaryColor:"#2563eb",darkMode:!1},sectionLabels:h.sectionLabels||{about:"About Me",timeline:"My Journey",techStack:"Tech Stack",projects:"Featured Projects",contact:"Contact"},businessCard:h.businessCard||{orientation:"horizontal",usePhotoBackground:!1},attachedResumeId:h.attachedResumeId||null,updatedAt:h.updatedAt||Date.now(),createdAt:h.createdAt||Date.now()}};f.useEffect(()=>{if(!w||!g)return;if(!i||g==="guest"){const y=new URLSearchParams(window.location.search).get("template")||"minimalist",z=["linktree_minimal","linktree_visual","linktree_corporate","linktree_bento"].includes(y)||R&&y in R,E=z?"linkinbio":"portfolio",G=R&&y in R?y:"sunset_surf",he={id:w,userId:"guest",title:"My Portfolio",templateId:y,section:"portfolios",mode:E,linkInBio:z?{links:[{id:"1",label:"Instagram",url:"https://instagram.com",icon:"Instagram",enabled:!0,variant:"primary"},{id:"2",label:"TikTok",url:"https://tiktok.com",icon:"Video",enabled:!0,variant:"primary"},{id:"3",label:"X (Twitter)",url:"https://twitter.com",icon:"Twitter",enabled:!0,variant:"primary"},{id:"4",label:"LinkedIn",url:"https://linkedin.com",icon:"Linkedin",enabled:!0,variant:"primary"},{id:"5",label:"WeChat",url:"#",icon:"MessageCircle",enabled:!0,variant:"primary"}],showSocial:!0,showEmail:!0,displayName:j||"Your Name",bio:"Welcome to my page! Check out my links below.",profileImage:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=400&q=80",themeId:G,buttonLayout:"stack",customStyle:{buttonAlignment:"center"}}:void 0,businessCard:{orientation:"horizontal",usePhotoBackground:!1},hero:{headline:j||"Your Name",subheadline:"Product Designer",ctaPrimaryLabel:"View Work",ctaPrimaryUrl:"#projects",ctaSecondaryLabel:"Contact",ctaSecondaryUrl:"#contact"},about:"I am a passionate creator building digital experiences.",timeline:[],education:[],techStack:[],projects:[],socialLinks:[],contactEmail:"",phone:"",theme:{primaryColor:"#2563eb",darkMode:!1},sectionLabels:{about:"About Me",timeline:"My Journey",techStack:"Tech Stack",projects:"Featured Projects",contact:"Contact"},updatedAt:Date.now(),createdAt:Date.now()};k||O(he);return}O(null),F(!0),console.log("[Editor] Setting up Firestore subscription for:",w,"owned by:",g);const b=te(_,"users",g,"portfolios",w);zt(b).then(h=>{if(h.exists()){console.log("[Editor] Initial getDoc success.");const y=Oe(h,g);O(y);const z=window.location.pathname,E=y.hero?.headline?.replace(/[^\w\s-]/g,"").replace(/\s+/g,"")||i.email?.split("@")[0]||"user",G=encodeURIComponent(E),he=z.match(/\/portfolio\/([^/]+)\/edit\/([^/]+)/);if(he){if(he[1]!==G){const vt=`/portfolio/${G}/edit/${y.id}`;window.history.replaceState(null,"",vt)}}else if(z.match(/\/portfolio\/edit\/[^/]+$/)){const Ue=`/portfolio/${G}/edit/${y.id}`;window.history.replaceState(null,"",Ue)}}else console.error("[Editor] getDoc reported document does not exist.")}).catch(h=>{console.error("[Editor] getDoc failed:",h)});const v=tt(b,h=>{if(console.log("[Editor] onSnapshot fired. Exists:",h.exists()),h.exists()){const y=Oe(h,g);u&&y.linkInBio&&(y.linkInBio.settings?y.linkInBio.settings.removeBranding===void 0&&(y.linkInBio.settings.removeBranding=!0):y.linkInBio.settings={removeBranding:!0}),O(y),F(!1)}else console.error("[Editor] Portfolio NOT FOUND via snapshot");F(!1)},h=>{console.error("[Editor] onSnapshot error:",h),F(!1)});return()=>v()},[w,i,g,j,u]);const H=async b=>{if(!k||!g)return;const v=Date.now(),h={...k,...b,updatedAt:v};if(O(h),!i||g==="guest"){console.log("[Editor] Guest mode: Skipping Firestore save.",b);return}try{const y=te(_,"users",g,"portfolios",k.id);await Pt(y,{...b,updatedAt:v},{merge:!0}),console.log("[Editor] Portfolio updated for owner:",g)}catch(y){console.error("Error updating portfolio:",y)}},Z=(b,v,h)=>{if(!k)return;const y={...k[b]};y[v]=h,H({[b]:y})},ht=b=>{if(!k)return;const v=Ir(k,b);H(v)},bt=b=>{if(!i){Ce({isOpen:!0,title:"Sign In Required",message:"Please sign in to upload images directly to your portfolio."}),A(!0);return}Q(b),setTimeout(()=>B.current?.click(),100)},pt=async b=>{if(b.target.files&&b.target.files[0]&&V&&k&&i){const v=b.target.files[0];ue(!0);try{const h=await rt(v,`portfolios/${k.id}/${Date.now()}_${v.name}`),y=V.split(".");if(y[0]==="linkInBio"&&y[1]==="links"){const z=parseInt(y[2]),E=y[3];if(k.linkInBio?.links&&k.linkInBio.links[z]){const G=[...k.linkInBio.links];G[z][E]=h,Z("linkInBio","links",G)}}else if(y.length===2&&y[0]==="hero")Z("hero",y[1],h);else if(y.length===3&&y[0]==="projects"){const z=parseInt(y[1]),E=[...k.projects];E[z]&&(E[z][y[2]]=h,H({projects:E}))}else if(y[0]==="businessCard")Z("businessCard",y[1],h);else if(y[0]==="linkInBio"&&y[1]==="customStyle"){const z=k.linkInBio||{},E=z.customStyle||{},G={...z,customStyle:{...E,[y[2]]:h}};H({linkInBio:G})}}catch(h){console.error("Upload failed",h),alert("Failed to upload image.")}finally{ue(!1),B.current&&(B.current.value="")}}},ft=async(b,v,h)=>{if(!i){Ce({isOpen:!0,title:"Sign In Required",message:"Unlock powerful AI photo editing by signing in. It is free!"});return}i&&d()&&(Q(b),ve(v),h==="avatar"?se(["Professional LinkedIn Headshot","Creative Designer Portrait","Tech Speaker Profile","Minimalist Avatar"]):b.includes("backgroundOverride")?se(["Professional Glassmorphism Background, Soft Blur","Clean Minimalist White Studio Backdrop","Modern Tech Abstract Mesh Gradient","Dark Premium Frosted Glass Texture","Soft Nature Bokeh with Golden Light","Geometric 3D Shapes, Isometric, Pastel"]):se(["Modern SaaS Dashboard","Mobile App Interface","Website Landing Page","Data Visualization"]),P(!0))},Ie=async b=>{if(!V||!k)return;const v=V.split(".");if(v[0]==="linkInBio"&&v[1]==="links"){const h=parseInt(v[2]),y=v[3];if(k.linkInBio?.links&&k.linkInBio.links[h]){const z=[...k.linkInBio.links];z[h][y]=b,Z("linkInBio","links",z)}}else if(v.length===2&&v[0]==="hero")Z("hero",v[1],b);else if(v.length===3&&v[0]==="projects"){const h=parseInt(v[1]),y=[...k.projects];y[h]&&(y[h][v[2]]=b,H({projects:y}))}else if(v[0]==="linkInBio"&&v[1]==="customStyle"){const h=k.linkInBio||{},y=h.customStyle||{},z={...h,customStyle:{...y,[v[2]]:b}};H({linkInBio:z})}P(!1)},yt=b=>{const v=b.split(".")[0];if(["hero","about"].includes(v))I("hero");else if(v==="timeline")I("timeline");else if(v==="techStack")I("stack");else if(v==="projects")I("projects");else if(v==="resume")I("settings");else if(v==="sectionLabels"){const h=b.split(".")[1];h==="about"?I("hero"):h==="timeline"?I("timeline"):h==="techStack"?I("stack"):h==="projects"?I("projects"):h==="contact"&&I("hero")}U&&L("edit"),setTimeout(()=>{const h=document.getElementById(b);h&&(h.scrollIntoView({behavior:"smooth",block:"center"}),h.focus(),h.classList.add("ring-2","ring-indigo-500","bg-white/5"),setTimeout(()=>h.classList.remove("ring-2","ring-indigo-500","bg-white/5"),1500))},100)},jt=b=>{if(b==="commerce"&&(!i||g==="guest")){ge(),xe({title:"Unlock Commerce Hub",subtitle:"Sign in to start selling services and products directly from your portfolio."}),A(!0);return}if(b==="analytics"&&(!i||g==="guest")){ge(),xe({title:"View Analytics",subtitle:"Sign in to track views, clicks, and engagement on your portfolio."}),A(!0);return}Ne(b),b!=="editor"&&U&&L("preview")};return k?e.jsxs("div",{className:`h-screen w-screen flex flex-col overflow-hidden transition-colors ${s==="dark"?"bg-[#0f1117] text-gray-200":"bg-white text-gray-900"} `,children:[e.jsx(o,{}),e.jsx($r,{title:k.title,onTitleChange:b=>H({title:b}),editorTheme:s,onToggleTheme:c,activeDevice:N,onBack:xt,onDeviceChange:M,activeView:W,onViewChange:jt,onShare:mt}),e.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[(!U||W==="editor")&&W==="editor"&&e.jsx(Zr,{portfolioData:k,activeSection:S,setActiveSection:I,isMobile:U,viewMode:ee,resumes:l,onUpdate:H,onNestedUpdate:Z,onImageUploadTrigger:bt,onAIImageEdit:ft,isImageUploading:we,editorTheme:s,isPremium:u,onTogglePreview:()=>L(b=>b==="edit"?"preview":"edit"),userPortfolios:m,onImportTheme:ht,onStockPhotoTrigger:b=>{Q(b),r(!0)},onUpgradeTrigger:()=>be("/subscription")}),W==="analytics"?e.jsx(Dr,{portfolioId:k.id,ownerId:k.userId}):W==="commerce"?e.jsx(wr,{isEmbedded:!0,onProductsChange:b=>{b.length>0&&k?.linkInBio&&!k.linkInBio.enableStore&&(console.log("[Editor] Auto-enabling storefront as products were detected."),Z("linkInBio","enableStore",!0))}}):e.jsx(Kr,{portfolioData:k,activeDevice:N,viewMode:ee,isMobile:U,onFocusField:yt,onUpdate:H,onClosePreview:()=>L("edit")})]}),e.jsx("input",{type:"file",ref:B,className:"hidden",accept:"image/*",onChange:pt}),e.jsx(xr,{isOpen:Y,onClose:()=>T(!1),portfolioId:k.id,portfolioData:k}),$&&e.jsx(Nr,{userId:i?.uid||"",onClose:()=>P(!1),currentPhoto:je||"",onSave:Ie,onUseTemp:b=>Ie(b),onError:(b,v)=>alert(`${b}: ${v} `),promptOptions:ke}),e.jsx(er,{isOpen:Se,onClose:()=>A(!1),onSuccess:gt,title:Re.title,subtitle:Re.subtitle}),e.jsx(ot,{isOpen:me.isOpen,onClose:()=>Ce({...me,isOpen:!1}),title:me.title,message:me.message}),e.jsx(ut,{isOpen:t,onClose:()=>r(!1),onSelect:b=>Ie(b)})]}):e.jsx("div",{className:"h-screen bg-gray-950 flex items-center justify-center text-white",children:"Loading Editor..."})};export{gn as default};
