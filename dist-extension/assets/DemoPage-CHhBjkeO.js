import{r as s,j as e,L as G,$ as J,a as P,o as E,a0 as z,e as Q,f as W,d as q,g as V,P as Y,H as X,A as K}from"./main-BEc7sVU2.js";import{h as Z,g as ee}from"./geminiService-BsYmV8kM.js";import{C as te}from"./careers-BCiR7pDl.js";import{X as re}from"./x-CgpMcjbW.js";import{W as T}from"./wand-2-BNdNGVzL.js";import{u as ae}from"./useTranslation-CNH1DPc_.js";import{A as se}from"./arrow-left-jQ4_17tq.js";import{S as ne}from"./search-C4vZZ5u7.js";import{B as ie}from"./briefcase-BA81y1Cf.js";import{C as oe}from"./chevron-right-C0A4zoBG.js";import{M as le}from"./mic-aRUYVZ6D.js";const de=u=>{const n=u.toLowerCase();return n.includes("product manager")?"e.g., With a background in business analysis, I'm passionate about user-centric design. I've led a small project team and want to transition into a full product management role.":n.includes("nurse")?"e.g., I'm a newly licensed RN with clinical experience in a med-surg unit. I'm passionate about patient care and looking for my first full-time nursing position.":n.includes("financial analyst")?"e.g., I have a degree in finance and experience with financial modeling and data analysis from my internship at a local firm. I'm proficient in Excel and seeking an entry-level analyst position.":n.includes("designer")?"e.g., I'm a self-taught designer with a strong portfolio in branding and digital illustration. I'm proficient in the Adobe Creative Suite and looking for opportunities to grow in a creative agency.":n.includes("marketing")?"e.g., I have 3 years of experience running social media campaigns and email marketing for a small e-commerce brand. I'm looking to take on a role with more strategic responsibility.":n.includes("engineer")||n.includes("developer")?"e.g., I'm a recent computer science graduate with an internship in web development. I'm skilled in React and Node.js and want to find a full-stack role.":"e.g., Describe your current experience, skills, and the type of role you're looking for. The more detail, the better your AI-generated resume will be!"},ce=({isOpen:u,onClose:n,onGenerate:w,roleName:l,isLoading:d})=>{const[c,h]=s.useState(""),[x,p]=s.useState(""),[f,m]=s.useState(""),[y,b]=s.useState("");s.useEffect(()=>{u&&(h(""),p(""),m(""),b(de(l)))},[u,l]);const k=g=>{if(g.preventDefault(),!c.trim()){m("Please enter your name.");return}if(!x.trim()){m("Please provide some information about your experience.");return}m(""),w(c,x)};return u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-lg shadow-xl relative",children:[e.jsx("button",{onClick:n,disabled:d,className:"absolute top-3 right-3 p-1 rounded-full text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(re,{size:20})}),e.jsxs("form",{onSubmit:k,children:[e.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-900 dark:text-white",children:"Personalize Your Resume"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Provide some details to help our AI create a resume tailored for a ",e.jsx("strong",{className:"text-primary-600 dark:text-primary-400",children:l})," role."]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Full Name"}),e.jsx("input",{id:"fullName",type:"text",value:c,onChange:g=>h(g.target.value),placeholder:"e.g., John Doe",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:outline-none",disabled:d})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"experience",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Your Experience & Goals"}),e.jsx("textarea",{id:"experience",value:x,onChange:g=>p(g.target.value),placeholder:y,rows:5,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:outline-none",disabled:d})]}),f&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:f}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:n,disabled:d,className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-500 font-semibold text-sm",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"bg-primary-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:[d?e.jsx(G,{size:16,className:"animate-spin"}):e.jsx(T,{size:16}),d?"Generating...":"Generate Resume"]})]})]})]})}):null},me={name:"Academia & Research",roles:[{name:"Research Scientist (Ph.D.)"},{name:"Quantitative Analyst (Ph.D.)"},{name:"Machine Learning Scientist (Ph.D.)"},{name:"Data Scientist (Ph.D.)"},{name:"University Professor"},{name:"Postdoctoral Fellow"}]},I=[...te,me],_=["Analyzing your selected role...","Drafting a professional summary...","Highlighting key skills and experiences...","Structuring the resume layout...","Finalizing your preview..."],F=["Warming up the AI interviewer, Vivid...","Reviewing the role requirements...","Crafting tailored, insightful questions...","Setting up the virtual interview room...","Final checks... Get ready to shine!"],Se=()=>{const{t:u}=ae(),[n,w]=s.useState(I[0].name),[l,d]=s.useState(""),[c,h]=s.useState(!1),[x,p]=s.useState(!1),[f,m]=s.useState(""),[y,b]=s.useState(0),[k,g]=s.useState(!1),[j,M]=s.useState(""),R=c||x;if(s.useEffect(()=>{const t=J(P,r=>{if(r&&!r.isAnonymous){const i=localStorage.getItem("pending_interview_intent");if(i)try{const{prompt:o,title:a}=JSON.parse(i);console.log("Restoring pending interview session:",a),localStorage.removeItem("pending_interview_intent"),A(o,a,r)}catch(o){console.error("Failed to parse interview intent",o),localStorage.removeItem("pending_interview_intent")}}});return()=>t()},[]),s.useEffect(()=>{let t;const r=c?_:F;return R&&(b(0),t=window.setInterval(()=>{b(i=>i>=r.length-1?i:i+1)},1800)),()=>clearInterval(t)},[c,x]),R){const t=c?_:F,r=c?"Generating your resume preview...":"Preparing your interview...";return e.jsxs("div",{className:"fixed inset-0 bg-white dark:bg-gray-950 z-50 flex flex-col items-center justify-center text-center p-4",children:[e.jsx(G,{className:"w-16 h-16 text-primary-600 animate-spin mx-auto mb-8"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:r}),e.jsx("div",{className:"h-6 mt-4",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 animate-fade-in font-medium",children:t[y]},y)})]})}const $=async(t,r)=>{if(!r.trim()||!j.trim())return;await z("totalResumeGenerations");const i=`A professional resume for a ${j} named ${t}. Their experience and goals are: ${r}`;h(!0),m("");try{const o=`guest_${Date.now()}`,a=await ee(o,i);if(!a||typeof a!="object"||!a.personalDetails)throw new Error("AI failed to generate a valid resume. Please try a different prompt.");const N=K(),v=t.split(" ");a.personalDetails.firstName=v.shift()||"",a.personalDetails.lastName=v.join(" ")||"";const S={...N,...a,id:"guest",title:`${a.personalDetails.jobTitle||"New"} Resume`};localStorage.setItem("guestResume",JSON.stringify(S)),E("/edit/guest")}catch(o){m(o instanceof Error?o.message:"An unknown error occurred.")}finally{h(!1),g(!1)}},H=t=>{M(t),g(!0)},A=async(t,r,i)=>{if(!t.trim())return;const o=i||P.currentUser;if(!o||o.isAnonymous){console.log("Auth Guard: User not logged in, saving intent and redirecting."),localStorage.setItem("pending_interview_intent",JSON.stringify({prompt:t,title:r})),E("/signup?redirect=/demo");return}try{await z("totalInterviewStarts")}catch(a){console.warn("Tracking failed but proceeding with interview:",a)}p(!0),m("");try{const a=`demo_${Date.now()}`,N={title:r,company:"CareerVivid Demo",location:"Remote",description:t,url:"",id:a},v=Q(W,"users",o.uid,"practiceHistory",a),S=await Z(t);await q(v,{job:N,questions:S,timestamp:V(),interviewHistory:[],section:"interviews"});const L=Y(void 0,"us-west1"),U=await X(L,"getInterviewAuthToken")(),{token:O}=U.data,B=`https://careervivid-371634100960.us-west1.run.app/#/interview-studio/${a}?token=${O}`;window.location.href=B}catch(a){console.error("Interview start error:",a),m(a instanceof Error?a.message:"An unknown error occurred."),p(!1)}},C=I.map(t=>({...t,roles:t.roles.filter(r=>r.name.toLowerCase().includes(l.toLowerCase()))})).filter(t=>t.roles.length>0),D=l?C:C.filter(t=>t.name===n);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex flex-col font-sans",children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 pt-8 pb-6 px-4 sm:px-6 lg:px-8 sticky top-0 z-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white mb-6 transition-colors",children:[e.jsx(se,{size:16}),"Back to Home"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-extrabold text-gray-900 dark:text-white tracking-tight",children:u("demo.title")}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2 max-w-2xl",children:u("demo.subtitle")})]}),e.jsx("div",{className:"w-full md:w-auto",children:e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search roles (e.g. Engineer)",value:l,onChange:t=>d(t.target.value),className:"w-full md:w-64 pl-10 pr-4 py-2.5 bg-gray-100 dark:bg-gray-800 border-transparent focus:bg-white dark:focus:bg-gray-900 border focus:border-primary-500 rounded-lg text-sm transition-all outline-none"})]})})]}),!l&&e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mt-8 no-scrollbar mask-linear-fade",children:I.map(t=>e.jsx("button",{onClick:()=>w(t.name),className:`whitespace-nowrap px-4 py-2 rounded-full text-sm font-semibold transition-all border ${n===t.name?"bg-gray-900 text-white border-gray-900 dark:bg-white dark:text-gray-900":"bg-white text-gray-600 border-gray-200 hover:border-gray-300 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"}`,children:t.name},t.name))})]})}),e.jsx("div",{className:"flex-grow p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[D.map(t=>e.jsxs("div",{className:"mb-12 animate-fade-in",children:[l&&e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(ie,{size:20,className:"text-gray-400"})," ",t.name]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.roles.map(r=>{const i=`A mock interview for a ${r.name} position.`;return e.jsxs("div",{className:"group bg-white dark:bg-gray-900 rounded-2xl p-6 border border-gray-200 dark:border-gray-800 hover:border-primary-500/30 dark:hover:border-primary-500/30 shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-white leading-tight group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:r.name}),e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-400",children:e.jsx(oe,{size:20})})]}),e.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>H(r.name),className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:text-primary-700 dark:hover:text-primary-300 transition-colors border border-transparent hover:border-primary-200 dark:hover:border-primary-800",children:[e.jsx(T,{size:16})," Resume"]}),e.jsxs("button",{onClick:()=>A(i,r.name),className:"flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-semibold bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 hover:text-indigo-700 dark:hover:text-indigo-300 transition-colors border border-transparent hover:border-indigo-200 dark:hover:border-indigo-800",children:[e.jsx(le,{size:16})," Interview"]})]})]},r.name)})})]},t.name)),D.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsxs("p",{className:"text-gray-500 text-lg",children:['No roles found matching "',l,'".']}),e.jsx("button",{onClick:()=>d(""),className:"mt-4 text-primary-600 font-semibold hover:underline",children:"Clear search"})]})]})}),f&&e.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-red-100 dark:bg-red-900/90 text-red-600 dark:text-red-200 px-6 py-3 rounded-full shadow-lg text-sm font-medium animate-fade-in",children:f})]}),e.jsx(ce,{isOpen:k,onClose:()=>g(!1),onGenerate:$,roleName:j,isLoading:c})]})};export{Se as default};
