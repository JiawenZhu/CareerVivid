const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eye-off-C3BEQmJh.js","assets/main-D7bwdUQx.js","assets/main-z6OAJ5_I.css"])))=>i.map(i=>d[i]);
import{r as o,j as e,_ as S,b as u,p as T,L as V,s as B,t as C,i as q,k as G,l as H,f as K,g as J,m as Q}from"./main-D7bwdUQx.js";import{L as X}from"./Logo-DPBmgvCf.js";import{u as Y}from"./useTranslation-DTfaX8qA.js";import{A as Z}from"./arrow-left-Cw-deXTS.js";import{M as ee}from"./mail-DgfX-KG1.js";import{L as te}from"./lock-DcpO_n2u.js";import{E as ae}from"./eye-off-C3BEQmJh.js";import{E as re}from"./eye-DEr-hoMY.js";import{C as se}from"./chevron-right-PWzp5mFn.js";const ge=()=>{const{t}=Y(),[h,L]=o.useState(""),[w,I]=o.useState(""),[x,E]=o.useState(!1),[k,n]=o.useState(""),[v,m]=o.useState(""),[c,s]=o.useState(!1),[j,_]=o.useState(0),N=[t("auth.loading_secure"),t("auth.loading_process"),t("auth.loading_ready"),t("auth.loading_moment")];o.useEffect(()=>{let a;return c&&(_(0),a=window.setInterval(()=>{_(r=>r>=N.length-1?r:r+1)},1800)),()=>clearInterval(a)},[c]);const g=a=>{switch(a.code){case"auth/invalid-credential":case"auth/user-not-found":case"auth/wrong-password":n(t("auth.error_invalid"));break;case"auth/popup-closed-by-user":break;case"auth/account-exists-with-different-credential":n(t("auth.error_diff_cred"));break;default:n(a.message.replace("Firebase: ",""));break}},P=async a=>{a.preventDefault(),s(!0),n(""),m("");try{const r=await B(u,h,w);C(r.user.uid,"sign_in");const l=new URLSearchParams(window.location.search).get("redirect");l&&(window.location.href=decodeURIComponent(l))}catch(r){g(r),s(!1)}},R=async()=>{s(!0),n(""),m("");try{const r=(await G(u,H)).user,i=K(J,"users",r.uid);if((await Q(i)).exists())C(r.uid,"sign_in",{provider:"google"});else{await u.signOut(),s(!1),T("/signup");return}const d=new URLSearchParams(window.location.search).get("redirect");d&&(window.location.href=decodeURIComponent(d))}catch(a){g(a),s(!1)}},U=async()=>{if(!h){n(t("auth.enter_email_reset"));return}s(!0),n(""),m("");try{await q(u,h),m(t("auth.reset_sent"))}catch(a){g(a)}s(!1)},z=()=>e.jsxs("div",{className:"fixed inset-0 bg-white/80 dark:bg-gray-950/80 backdrop-blur-sm z-50 flex flex-col items-center justify-center text-center p-4 animate-fade-in",children:[e.jsx(V,{className:"w-16 h-16 text-primary-600 animate-spin mx-auto"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-6",children:t("auth.please_wait")}),e.jsx("div",{className:"h-6 mt-2",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400 animate-fade-in font-medium",children:N[j]},j)})]}),p=new URLSearchParams(window.location.search).get("source")==="bio-link"||localStorage.getItem("tiktok_auth_context")==="bio-link",A=()=>{s(!0);const a=Math.random().toString(36).substring(7);localStorage.setItem("tiktok_node_auth_state",a),p&&localStorage.setItem("tiktok_auth_context","bio-link");const r="aw1crl350g7yvps2",i=`${window.location.origin}/signin`,f=`https://www.tiktok.com/v2/auth/authorize/?client_key=${r}&response_type=code&scope=user.info.basic,user.info.profile,user.info.stats,video.list&redirect_uri=${encodeURIComponent(i)}&state=${a}`;window.location.href=f};return o.useEffect(()=>{const a=new URLSearchParams(window.location.search),r=a.get("code"),i=a.get("state"),l=localStorage.getItem("tiktok_node_auth_state");r&&i&&l&&i===l&&(async()=>{s(!0);try{const{getFunctions:d,httpsCallable:F}=await S(async()=>{const{getFunctions:b,httpsCallable:y}=await import("./eye-off-C3BEQmJh.js").then(O=>O.b);return{getFunctions:b,httpsCallable:y}},__vite__mapDeps([0,1,2])),M=d(),W=await F(M,"authWithTikTok")({code:r,redirectUri:`${window.location.origin}/signin`}),{token:D}=W.data,{signInWithCustomToken:$}=await S(async()=>{const{signInWithCustomToken:b}=await import("./eye-off-C3BEQmJh.js").then(y=>y.i);return{signInWithCustomToken:b}},__vite__mapDeps([0,1,2]));await $(u,D),localStorage.removeItem("tiktok_node_auth_state"),T("/dashboard")}catch(d){console.error("TikTok Auth Failed:",d),n("TikTok Login failed. Please try again."),s(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-950 px-4 relative overflow-hidden font-sans",children:[e.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-7xl pointer-events-none z-0",children:[e.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-96 h-96 bg-primary-400/20 rounded-full blur-3xl mix-blend-multiply dark:mix-blend-screen opacity-50"}),e.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-purple-400/20 rounded-full blur-3xl mix-blend-multiply dark:mix-blend-screen opacity-50"})]}),c&&e.jsx(z,{}),e.jsxs("a",{href:"/",className:"absolute top-8 left-8 z-20 flex items-center gap-2 text-sm font-semibold text-gray-500 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:[e.jsx(Z,{size:18}),t("auth.back_home")]}),e.jsx("div",{className:"w-full max-w-md relative z-10",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-3xl shadow-2xl shadow-gray-200/50 dark:shadow-none border border-gray-100 dark:border-gray-800 p-8 sm:p-10",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx(X,{className:"h-10 w-10 mx-auto mb-6"}),p?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-black text-black uppercase tracking-tighter",children:"Welcome Creator!"}),e.jsx("p",{className:"mt-3 text-gray-600 font-medium",children:"Log in to manage your Bio-Link."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:t("auth.welcome_back")}),e.jsx("p",{className:"mt-3 text-gray-500 dark:text-gray-400",children:t("auth.enter_details")})]})]}),e.jsxs("form",{className:"space-y-5",onSubmit:P,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:t("auth.email_label")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(ee,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"block w-full pl-11 pr-4 py-3.5 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all text-sm font-medium",placeholder:t("auth.email_placeholder"),value:h,onChange:a=>L(a.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:t("auth.password_label")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(te,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:x?"text":"password",required:!0,className:"block w-full pl-11 pr-11 py-3.5 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all text-sm font-medium",placeholder:t("auth.password_placeholder"),value:w,onChange:a=>I(a.target.value)}),e.jsx("button",{type:"button",onClick:()=>E(!x),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:x?e.jsx(ae,{size:20}):e.jsx(re,{size:20})})]})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:U,className:"text-sm font-semibold text-primary-600 hover:text-primary-500 transition-colors",children:t("auth.forgot_password")})}),k&&e.jsx("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 text-center font-medium",children:k})}),v&&e.jsx("div",{className:"p-3 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800",children:e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 text-center font-medium",children:v})}),e.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center py-3.5 px-4 border border-transparent rounded-xl shadow-lg shadow-primary-500/20 text-sm font-bold text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-70 disabled:cursor-not-allowed transition-all transform hover:-translate-y-0.5",children:t("auth.sign_in")})]}),e.jsxs("div",{className:"my-8 relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-800"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white dark:bg-gray-900 text-gray-500 font-medium",children:t("auth.or_continue_with")})})]}),e.jsxs("div",{className:"space-y-3",children:[p&&e.jsxs("button",{onClick:A,disabled:c,className:"w-full flex items-center justify-center gap-3 py-3.5 px-4 rounded-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] bg-[#FE2C55] text-white text-sm font-black uppercase border-2 border-black hover:translate-y-[2px] hover:shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] transition-all",children:[e.jsx("svg",{className:"w-5 h-5 fill-current",viewBox:"0 0 448 512",children:e.jsx("path",{d:"M448 209.91a210.06 210.06 0 0 1-122.77-39.25V349.38A162.55 162.55 0 1 1 185 188.31V278.2a74.62 74.62 0 1 0 52.23 71.18V0l88 0a121.18 121.18 0 0 0 1.86 22.17h0A122.18 122.18 0 0 0 381 102.39a121.43 121.43 0 0 0 67 20.14z"})}),"Continue with TikTok"]}),e.jsxs("button",{onClick:R,disabled:c,className:"w-full flex items-center justify-center gap-3 py-3.5 px-4 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm bg-white dark:bg-gray-800 text-sm font-bold text-gray-700 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",children:[e.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:e.jsx("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 111.8 512 0 398.2 0 256S111.8 0 244 0c71.2 0 130.9 27.8 176.9 72.9l-63.1 61.3C294.3 93.6 270.3 80 244 80 158.4 80 90 148.2 90 233.9s68.4 153.9 154 153.9c75.5 0 120.9-42.3 124.9-97.9H244v-77.3h236.1c2.4 12.7 3.9 26.1 3.9 40.2z"})}),t("auth.google")]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t("auth.dont_have_account")," ",e.jsxs("a",{href:"/signup",className:"font-bold text-primary-600 hover:text-primary-700 transition-colors inline-flex items-center gap-1",children:[t("auth.sign_up_free")," ",e.jsx(se,{size:14})]})]})})]})})]})};export{ge as default};
