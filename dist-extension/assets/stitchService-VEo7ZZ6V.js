import{m as c,f as a,q as i,w as n,p as l,P as h,H as g,n as p,e as y,l as f,z as m}from"./main-BEc7sVU2.js";const D={getUpcomingDrops:async o=>{try{const r=c(a,"drops"),t=i(r,n("zones","array-contains",o),n("status","in",["open","locked"]),m("scheduled_date","asc"));return(await p(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(r){return console.error("Error fetching upcoming drops:",r),[]}},getDropById:async o=>{try{const r=y(a,"drops",o),t=await f(r);return t.exists()?{id:t.id,...t.data()}:null}catch(r){return console.error("Error fetching drop:",r),null}},getDropProducts:async o=>{try{const r=c(a,"products");return(await p(r)).docs.map(s=>({id:s.id,...s.data()}))}catch(r){return console.error("Error fetching drop products:",r),[]}},createOrder:async o=>{try{const r=h();return(await g(r,"createOrder")({dropId:o.drop_id,items:o.items})).data.orderId}catch(r){throw console.error("Error creating order (Cloud Function):",r),r}},subscribeToDropOrders:(o,r)=>{const t=c(a,"orders"),s=i(t,n("drop_id","==",o));return l(s,e=>{const u=e.docs.map(d=>({id:d.id,...d.data()}));r(u)})}};export{D as s};
