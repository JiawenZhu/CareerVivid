import{u as q,r as a,j as e,L as f,m as Q,f as V,g as X,U as Y,a2 as M,a3 as R,a4 as Z,a5 as $}from"./main-Bi0Ei0w3.js";import{u as ee}from"./useResumes-B7mK0cuD.js";import{u as re}from"./useJobHistory-EOzqIq_m.js";import{M as ae}from"./mail-TURoK-Rd.js";import{u as se}from"./useTranslation-B90S8UVY.js";import{A as te}from"./arrow-left-TCHtPuDE.js";import{K as le}from"./key-round-Bi0Etawh.js";import{C as de}from"./credit-card-NEFea8JW.js";import{T as oe}from"./trash-2-DdUTv7KT.js";function ie(){const{currentUser:s}=q(),[l,i]=a.useState(!1),[h,n]=a.useState(!1),[r,b]=a.useState(null),[y,w]=a.useState({enabled:!1,frequency:"every_week",topicSource:"smart",manualTopic:""});return a.useEffect(()=>{(async()=>{if(s){i(!0);try{const d=await Q(V(X,"users",s.uid));if(d.exists()){const c=d.data();c.emailPreferences&&w(c.emailPreferences)}}catch(d){console.error("Error fetching email preferences:",d)}finally{i(!1)}}})()},[s]),l?e.jsx("div",{className:"p-4 flex justify-center",children:e.jsx(f,{className:"animate-spin text-primary-500"})}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ae,{className:"w-5 h-5 text-indigo-500"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Scheduled Practice Interviews"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-sm",children:"Receive personalized practice interviews in your inbox. Stay sharp by practicing regularly."}),e.jsxs("div",{className:"space-y-6 opacity-60 pointer-events-none grayscale",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"enable-practice",className:"font-medium text-gray-900 dark:text-gray-100 block",children:"Enable Email Practice"}),e.jsx("span",{className:"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 text-xs px-2 py-0.5 rounded-full font-bold",children:"Coming Soon"})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Receive practice interviews in your inbox."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-not-allowed",children:[e.jsx("input",{type:"checkbox",id:"enable-practice",className:"sr-only peer",checked:!1,disabled:!0}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 dark:border-gray-600"})]})]}),!1]})]})}const ne={enabled:!1,frequency:"every_week",topicSource:"smart",manualTopic:""},ve=()=>{const{currentUser:s,userProfile:l,updateUserProfile:i,logOut:h,isPremium:n}=q(),{t:r}=se(),{deleteAllResumes:b}=ee(),{deleteAllPracticeHistory:y}=re(),[w,j]=a.useState(ne),[d,c]=a.useState(!1),[ce,me]=a.useState(""),[N,k]=a.useState(""),[m,v]=a.useState(""),[P,_]=a.useState(""),[S,E]=a.useState(!1),[C,o]=a.useState(""),[D,L]=a.useState(""),[H,T]=a.useState(!1),[x,F]=a.useState(""),[p,O]=a.useState(""),[g,U]=a.useState(!1),[z,A]=a.useState(""),[xe,pe]=a.useState(!1),[I,ge]=a.useState(""),[B,G]=a.useState(()=>localStorage.getItem("upgrade_guide_step")==="3");a.useEffect(()=>{l?.emailPreferences&&j(l.emailPreferences)},[l]);const K=async t=>{if(t.preventDefault(),o(""),L(""),m!==P){o(r("profile.password_mismatch"));return}if(!s||!s.email){o("Could not verify current user.");return}E(!0);try{const u=M.credential(s.email,N);await R(s,u),await Z(s,m),L(r("profile.password_updated")),k(""),v(""),_("")}catch(u){o(u.message.replace("Firebase: ",""))}finally{E(!1)}},W=async()=>{if(!(x!=="DELETE"||!s||!s.email)){A(""),U(!0);try{const t=M.credential(s.email,p);await R(s,t),await Promise.all([b(),y()]),await $(s),h()}catch(t){A(t.message.replace("Firebase: ",""))}finally{U(!1)}}},J=()=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md shadow-xl transform transition-all",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-red-600 dark:text-red-400",children:r("profile.delete_modal_title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:r("profile.delete_modal_desc")}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:[r("profile.delete_modal_confirm")," ",e.jsx("strong",{className:"font-mono text-red-500",children:"DELETE"})]}),e.jsx("input",{type:"text",value:x,onChange:t=>F(t.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md mb-4 bg-white dark:bg-gray-700"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:r("profile.delete_modal_password")}),e.jsx("input",{type:"password",value:p,onChange:t=>O(t.target.value),placeholder:r("profile.current_password"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md mb-4 bg-white dark:bg-gray-700"}),z&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:z}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 dark:bg-gray-600 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 font-semibold text-sm",children:r("common.cancel")}),e.jsxs("button",{onClick:W,disabled:x!=="DELETE"||g||!p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 font-semibold text-sm disabled:bg-red-300 disabled:cursor-not-allowed flex items-center gap-2",children:[g&&e.jsx(f,{size:16,className:"animate-spin"}),r(g?"profile.deleting":"profile.delete_btn")]})]})]})});return e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen",children:[H&&e.jsx(J,{}),e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm dark:border-b dark:border-gray-700",children:e.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8 flex items-center gap-4",children:[e.jsx("a",{href:"/dashboard",title:"Back to Dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(te,{size:24})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:r("profile.title")})]})}),e.jsx("main",{className:"py-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8 space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Y,{className:"text-primary-500 h-6 w-6 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:r("profile.account_info")})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[e.jsxs("strong",{children:[r("profile.email"),":"]})," ",s?.email]}),s?.providerData[0]?.providerId==="google.com"&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:r("profile.google_signin_note")})]}),e.jsx(ie,{}),s?.providerData[0]?.providerId==="password"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(le,{className:"text-primary-500 h-6 w-6 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:r("profile.change_password")})]}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsx("input",{type:"password",value:N,onChange:t=>k(t.target.value),placeholder:r("profile.current_password"),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700"}),e.jsx("input",{type:"password",value:m,onChange:t=>v(t.target.value),placeholder:r("profile.new_password"),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700"}),e.jsx("input",{type:"password",value:P,onChange:t=>_(t.target.value),placeholder:r("profile.confirm_password"),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700"}),C&&e.jsx("p",{className:"text-red-500 text-sm",children:C}),D&&e.jsx("p",{className:"text-green-500 text-sm",children:D}),e.jsxs("button",{type:"submit",disabled:S,className:"bg-primary-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-primary-700 flex items-center gap-2 disabled:bg-primary-300",children:[S&&e.jsx(f,{size:16,className:"animate-spin"}),r("profile.update_password")]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(de,{className:"text-primary-500 h-6 w-6 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:r("profile.payment_subscription")})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[e.jsxs("strong",{children:[r("profile.current_plan"),":"]})," ",e.jsx("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:n?l?.plan==="pro_sprint"?r("profile.plan_sprint"):l?.plan==="pro_monthly"?r("profile.plan_monthly"):r("profile.plan_premium"):r("profile.plan_free")})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r("profile.beta_note")})]}),I&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:I}),e.jsxs("a",{href:"/subscription",onClick:()=>{localStorage.setItem("upgrade_guide_step","4"),G(!1)},className:"relative inline-block bg-primary-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-primary-700 transition-colors",children:[r("profile.manage_subscription"),!n&&B&&e.jsxs("div",{className:"absolute left-full ml-4 top-1/2 -translate-y-1/2 flex items-center gap-2 animate-bounce-horizontal",children:[e.jsx("svg",{className:"w-8 h-8 text-orange-500 transform rotate-180",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})}),e.jsx("span",{className:"text-orange-500 font-bold text-sm whitespace-nowrap hidden sm:block",children:"Upgrade Here"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-red-300 dark:border-red-700",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(oe,{className:"text-red-500 h-6 w-6 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:r("profile.danger_zone")})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:r("profile.delete_account_desc")}),e.jsx("button",{onClick:()=>T(!0),className:"bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-red-700",children:r("profile.delete_account")})]})]})})]})};export{ve as default};
