import{u as $,r as a,j as e,L as H}from"./main-BEc7sVU2.js";import{u as Y}from"./useResumes-C_g1Kxnt.js";import{p as q,g as B}from"./geminiService-BsYmV8kM.js";import{C as O}from"./careers-BCiR7pDl.js";import{L as X}from"./Logo-BDxZX0-1.js";import{R as _}from"./ResumeImport-SyIQpOwm.js";import{L as J}from"./layout-dashboard-BUznMAJN.js";import{A as f}from"./arrow-right-CSdrhpF5.js";import{C as K}from"./chevron-left-fFcpqHUE.js";import"./index-CScl1Xt6.js";import"./index-Chjiymov.js";import"./pdf.worker.min-NjiBXALH.js";import"./useTranslation-CNH1DPc_.js";import"./alert-circle-gw7bsKwP.js";import"./upload-cloud-Bz-Uhqq1.js";import"./file-text-D4qk8Tzm.js";const R=["Analyzing your prompt...","Accessing professional knowledge base...","Drafting key achievements...","Selecting impactful skills...","Polishing the final layout...","Almost there!"],S=["A senior product manager resume for a fintech startup","A recent computer science graduate resume with internship experience","A registered nurse resume specializing in emergency room care","A data scientist resume with a focus on machine learning models","A UX/UI designer portfolio resume for a mobile app","A marketing manager resume with social media campaign experience","A cybersecurity analyst resume with certifications","A project manager resume using Agile methodologies"],ge=()=>{const{currentUser:d}=$(),{resumes:y,addAIGeneratedResume:P}=Y(),[m,C]=a.useState(""),[c,b]=a.useState(!1),[g,j]=a.useState(!1),[w,k]=a.useState(""),[v,N]=a.useState(0),[E,I]=a.useState(""),[n,A]=a.useState(null);a.useEffect(()=>{let r;return g&&(N(0),r=window.setInterval(()=>{N(t=>t>=R.length-1?t:t+1)},1800)),()=>clearInterval(r)},[g]),a.useEffect(()=>{let r=!0,t=0,s=0,o=!1,i;const G=100,M=50,h=[2e3,4e3,8e3];let x=0;const l=()=>{if(!r)return;const p=S[t];if(o?(I(p.substring(0,s-1)),s--):(I(p.substring(0,s+1)),s++),!o&&s===p.length){o=!0;const U=h[x%h.length];x=(x+1)%h.length,i=window.setTimeout(l,U)}else o&&s===0?(o=!1,t=(t+1)%S.length,i=window.setTimeout(l,500)):i=window.setTimeout(l,o?M:G)};return i=window.setTimeout(l,1500),()=>{r=!1,clearTimeout(i)}},[]);const u=async r=>{if(!(!r.trim()||!d)){y.length===0?sessionStorage.setItem("isFirstResume","true"):sessionStorage.removeItem("isFirstResume"),j(!0),k("");try{let t;if(c?t=await q(d.uid,r,"English"):t=await B(d.uid,r),!t||typeof t!="object"||!t.personalDetails)throw console.error("Invalid data structure from AI:",t),new Error("AI failed to generate a valid resume structure. Please try a more specific prompt.");const s=`${t.personalDetails.jobTitle||"New"} Resume`;P(t,s)}catch(t){k(t instanceof Error?t.message:"An unknown error occurred."),j(!1)}}},L=r=>{u(m)},T=r=>{b(!0),u(r)},D=r=>{C(r),c&&b(!1)},z=r=>{const t=n?.name,s=`Create a professional resume for the role of '${r}'. This role is in the '${t}' industry. The resume should be tailored to highlight key qualifications, skills, and experiences relevant to this specific career path.`;u(s)},F=()=>n?e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>A(null),className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 mb-4 font-semibold",children:[e.jsx(K,{size:18})," Back to Industries"]}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:["Select a Role in ",n.name]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:n.roles.map(r=>e.jsxs("button",{onClick:()=>z(r.name),className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-soft hover:shadow-md hover:border-primary-500 dark:hover:border-primary-400 border border-transparent transition-all text-left flex items-center justify-between group",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.name}),e.jsx(f,{size:20,className:"text-gray-400 group-hover:text-primary-500 transition-colors"})]},r.name))})]}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Or, select a career path"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4",children:O.map(r=>e.jsxs("button",{onClick:()=>A(r),className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-soft hover:shadow-md hover:border-primary-500 dark:hover:border-primary-400 border border-transparent transition-all text-left flex items-center justify-between group",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r.name}),e.jsx(f,{size:20,className:"text-gray-400 group-hover:text-primary-500 transition-colors"})]},r.name))})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8 relative",children:[y.length>0&&e.jsx("div",{className:"absolute top-6 right-6",children:e.jsxs("a",{href:"/",className:"flex items-center gap-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg shadow-soft border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(J,{size:20}),"Dashboard"]})}),g?e.jsxs("div",{className:"text-center",children:[e.jsx(H,{className:"w-16 h-16 text-primary-500 animate-spin mx-auto"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mt-6",children:"Generating your resume..."}),e.jsx("div",{className:"h-6 mt-2",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 animate-fade-in",children:R[v]},v)})]}):e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx(X,{className:"h-12 w-12 mx-auto"}),e.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-gray-900 dark:text-gray-100 mt-4",children:"Create Your Next Resume"}),e.jsx("p",{className:"text-lg text-gray-500 dark:text-gray-400 mt-2 max-w-2xl mx-auto",children:"Start with an AI-powered prompt or choose a guided path to generate a professional resume in seconds."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 sm:p-8 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 mb-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Generate or Import Your Resume"}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx(_,{value:m,onChange:D,onFileProcessed:T,placeholder:E,className:"bg-transparent",variant:"modern",children:e.jsx("button",{onClick:()=>L(),className:"bg-primary-600 text-white p-3 rounded-lg shadow-soft hover:bg-primary-700 transition-colors flex items-center justify-center disabled:bg-primary-300 disabled:cursor-not-allowed",disabled:!m.trim(),title:c?"Import & Parse":"Generate Resume",children:e.jsx(f,{size:20})})})})]}),F(),w&&e.jsx("p",{className:"text-red-500 text-center mt-6 bg-red-100 dark:bg-red-900/20 dark:text-red-400 p-3 rounded-lg",children:w})]})]})};export{ge as default};
