import{r as t,u as j,j as e}from"./main-BEc7sVU2.js";import{a as k}from"./geminiService-BsYmV8kM.js";import{u as v}from"./useResumes-C_g1Kxnt.js";import{X as N}from"./x-CgpMcjbW.js";import{M as C}from"./message-square-Rf8MUyuS.js";import{B as S}from"./bot-CZVkuU1E.js";import{S as I}from"./sparkles-Br3FZYhV.js";import{H as M}from"./help-circle-CCgyfrIA.js";import{S as z}from"./send-BU04lBHk.js";const A=[{question:"How credit works?",answer:"Free users get 10 credits/month. Pro Month gets 300 credits! 1 credit = 1 AI response. Chat is free!"},{question:"How to export PDF?",answer:"Go to your Resume Dashboard, click 'Download' on any resume card."},{question:"Can I customize the design?",answer:"Yes! Use the 'Design' tab in the editor to change fonts, colors, and layouts."},{question:"How to upgrade?",answer:"Go to Profile -> Payment & Subscription -> Click on Manage Payment & Subscription button."}],Q=()=>{const[l,p]=t.useState(!1),[a,d]=t.useState([]),[o,g]=t.useState(""),[c,m]=t.useState(!1),x=t.useRef(null),{currentUser:u}=j(),{resumes:b}=v(),y=b[0]?.language||"English",f=()=>{x.current?.scrollIntoView({behavior:"smooth"})};t.useEffect(f,[a]);const w=s=>{const r={role:"user",parts:[{text:s.question}]},i={role:"model",parts:[{text:s.answer}]};d(n=>[...n,r,i])},h=async()=>{if(o.trim()===""||c||!u)return;const s={role:"user",parts:[{text:o}]};d(r=>[...r,s]),g(""),m(!0);try{const i={role:"model",parts:[{text:await k(u.uid,a,o,y)}]};d(n=>[...n,i])}catch(r){console.error("Chatbot error:",r);const i={role:"model",parts:[{text:"Sorry, I'm having trouble connecting right now."}]};d(n=>[...n,i])}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(!l),className:"fixed bottom-6 right-6 bg-gradient-to-r from-primary-600 to-indigo-600 text-white w-14 h-14 rounded-full shadow-xl flex items-center justify-center hover:shadow-2xl hover:scale-105 transition-all z-40","aria-label":"Toggle Chat",children:l?e.jsx(N,{size:28}):e.jsx(C,{size:28})}),l&&e.jsxs("div",{className:"fixed bottom-24 right-4 sm:right-6 w-[90vw] sm:w-[380px] h-[600px] max-h-[75vh] bg-white dark:bg-gray-800 rounded-2xl shadow-2xl flex flex-col transition-all duration-300 origin-bottom-right border dark:border-gray-700 z-40 animate-in slide-in-from-bottom-5 fade-in",children:[e.jsxs("header",{className:"bg-gradient-to-r from-primary-600 to-indigo-600 text-white p-4 rounded-t-2xl flex items-center shadow-md",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-lg mr-3",children:e.jsx(S,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg leading-tight",children:"AI Assistant"}),e.jsx("p",{className:"text-xs text-indigo-100 opacity-90",children:"Instant support & AI help (Free)"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900/50 p-4 scrollbar-thin scrollbar-thumb-gray-300 dark:scrollbar-thumb-gray-600",children:[a.length===0&&e.jsxs("div",{className:"text-center mt-8 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(I,{className:"text-indigo-600 dark:text-indigo-400",size:32})}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"How can I help you?"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ask me anything or choose a topic below."})]}),e.jsxs("div",{className:"space-y-4 pb-4",children:[a.map((s,r)=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:e.jsx("div",{className:`max-w-[85%] px-4 py-3 rounded-2xl shadow-sm text-sm leading-relaxed ${s.role==="user"?"bg-primary-600 text-white rounded-tr-none":"bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 rounded-tl-none border border-gray-100 dark:border-gray-600"}`,children:e.jsx("p",{className:"whitespace-pre-wrap",children:s.parts[0].text})})},r)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-2xl rounded-tl-none shadow-sm border border-gray-100 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center space-x-1.5",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce delay-100"}),e.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce delay-200"})]})})}),e.jsx("div",{ref:x})]}),a.length<2&&e.jsxs("div",{className:"mt-auto pt-4",children:[e.jsxs("p",{className:"text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-3 px-2 flex items-center gap-1",children:[e.jsx(M,{size:12})," Common Questions"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.map((s,r)=>e.jsx("button",{onClick:()=>{s.question==="How to upgrade?"&&(localStorage.setItem("upgrade_guide_step","1"),window.dispatchEvent(new Event("trigger-upgrade-guide"))),w(s)},className:"text-left px-4 py-3 bg-white dark:bg-gray-800 hover:bg-indigo-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-200 transition-colors shadow-sm hover:shadow active:scale-[0.98]",children:s.question},r))})]})]}),e.jsx("div",{className:"p-4 bg-white dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700 rounded-b-2xl",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"text",value:o,onChange:s=>g(s.target.value),onKeyPress:s=>s.key==="Enter"&&h(),placeholder:"Type a message...",className:"w-full pl-4 pr-12 py-3 bg-gray-100 dark:bg-gray-900/50 border-transparent focus:bg-white dark:focus:bg-gray-900 border focus:border-indigo-500 rounded-xl text-sm focus:outline-none transition-all dark:text-white"}),e.jsx("button",{onClick:h,disabled:c||!o.trim(),className:"absolute right-2 p-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:bg-gray-400 transition-colors shadow-sm",children:e.jsx(z,{size:16})})]})})]})]})};export{Q as default};
