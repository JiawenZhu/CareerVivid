import{r as t,R as B,j as e}from"./main-BEc7sVU2.js";import{C as A}from"./code-2-CCMqSW_o.js";import{E as D}from"./eye-DBT7NYFb.js";import{P as I}from"./palette-BXPG-S57.js";import{C as U}from"./check-BXDTBbZe.js";import{C as W}from"./copy-BbzbJe7R.js";import{E as G}from"./external-link-B-pRlJeA.js";const X=({companyProfile:n,onSaveProfile:E})=>{const[y,h]=t.useState(!1),[j,T]=t.useState("inline"),[a,v]=t.useState(n?.theme||"minimalist"),[c,f]=t.useState(n?.primaryColor||"#7c3aed"),[m,P]=t.useState(n?.fontFamily||"inter"),[g,z]=t.useState(5),[i,p]=t.useState("code"),[s,F]=t.useState(n?.slug||"your-company"),[d,o]=t.useState(""),[x,L]=t.useState([]),[b,k]=t.useState(!1),[N,w]=t.useState(""),C=r=>{const l=/^[a-z0-9]+(?:-[a-z0-9]+)*$/;return r?r.length<3?(o("Slug must be at least 3 characters"),!1):r.length>50?(o("Slug must be less than 50 characters"),!1):l.test(r)?(o(""),!0):(o("Slug can only contain lowercase letters, numbers, and hyphens"),!1):(o("Slug cannot be empty"),!1)},J=r=>{const l=r.toLowerCase().replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-");F(l),C(l)},S=()=>`<script ${['src="https://careervivid.app/embed.js"',`data-company="${s}"`,`data-mode="${j}"`,`data-theme="${a}"`,`data-primary-color="${c}"`,`data-font="${m}"`,`data-max-jobs="${g}"`].join(`
       `)}><\/script>`,M=()=>{navigator.clipboard.writeText(S()),h(!0),setTimeout(()=>h(!1),2e3)},u=async()=>{if(!(!s||d)){k(!0),w("");try{const r=await fetch(`https://us-west1-jastalk-firebase.cloudfunctions.net/getCompanyJobs?company=${s}`);if(!r.ok){const O=await r.json();throw new Error(O.error||"Failed to fetch jobs")}const l=await r.json();L(l)}catch(r){console.error("Preview fetch error:",r),w(r instanceof Error?r.message:"Failed to load jobs")}finally{k(!1)}}};B.useEffect(()=>{i==="preview"&&u()},[i,s]);const $=[{id:"minimalist",name:"Minimalist",description:"Clean, light design"},{id:"executive",name:"Executive",description:"Dark, professional look"},{id:"creative",name:"Creative (Neo Brutalism)",description:"Bold colors & borders"}],R=[{id:"system",name:"System Default"},{id:"inter",name:"Inter"},{id:"roboto",name:"Roboto"},{id:"outfit",name:"Outfit"}];return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Embed Job Widget"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Add your job listings to any website with a simple code snippet."})]}),e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-800",children:[e.jsxs("button",{onClick:()=>p("code"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors ${i==="code"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(A,{size:16}),"Get Code"]}),e.jsxs("button",{onClick:()=>p("preview"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors ${i==="preview"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(D,{size:16}),"Preview"]}),e.jsxs("button",{onClick:()=>p("branding"),className:`flex items-center gap-2 px-6 py-3 text-sm font-medium border-b-2 transition-colors ${i==="branding"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(I,{size:16}),"Branding"]})]}),e.jsxs("div",{className:"p-6",children:[i==="code"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Mode"}),e.jsxs("select",{value:j,onChange:r=>T(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"inline",children:"Inline (in-page list)"}),e.jsx("option",{value:"floating",children:"Floating (bottom-right widget)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Theme"}),e.jsx("select",{value:a,onChange:r=>v(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:$.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Jobs to Show"}),e.jsx("input",{type:"number",min:1,max:20,value:g,onChange:r=>z(parseInt(r.target.value)||5),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:c,onChange:r=>f(r.target.value),className:"w-12 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:c,onChange:r=>f(r.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white font-mono text-sm"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Embed Code"}),e.jsxs("button",{onClick:M,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-purple-600 hover:text-purple-700 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",children:[y?e.jsx(U,{size:14}):e.jsx(W,{size:14}),y?"Copied!":"Copy Code"]})]}),e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:e.jsx("code",{children:S()})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"How to Use"}),e.jsxs("ol",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-decimal list-inside",children:[e.jsx("li",{children:"Copy the embed code above"}),e.jsx("li",{children:"Paste it into your website's HTML where you want jobs to appear"}),e.jsx("li",{children:"The widget will automatically load and display your published jobs"})]})]})]}),i==="preview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Live preview of your published jobs"}),e.jsx("button",{onClick:u,disabled:b,className:"text-sm text-purple-600 hover:text-purple-700 disabled:opacity-50",children:b?"Loading...":"Refresh"})]}),e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 min-h-[300px]",children:b?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Loading jobs..."})]})}):N?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N}),e.jsx("button",{onClick:u,className:"mt-2 text-sm text-purple-600 hover:text-purple-700",children:"Try Again"})]})}):x.length===0?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"No jobs found for this company"})}):e.jsxs("div",{className:`rounded-lg p-4 ${a==="executive"?"bg-gray-900":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`font-semibold ${a==="executive"?"text-white":"text-gray-900"}`,children:"Open Positions"}),e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${a==="executive"?"bg-gray-800 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[x.length," opening",x.length!==1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:x.slice(0,g).map(r=>e.jsxs("div",{className:`p-3 rounded-lg border ${a==="executive"?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:`font-medium ${a==="executive"?"text-white":"text-gray-900"}`,children:r.jobTitle}),e.jsxs("div",{className:`text-sm mt-1 ${a==="executive"?"text-gray-400":"text-gray-600"}`,children:[r.location," â€¢ ",r.employmentType.replace(/-/g," ").replace(/\b\w/g,l=>l.toUpperCase())]})]},r.id))})]})})]}),i==="branding"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Slug (URL)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"careervivid.app/j/"}),e.jsx("input",{type:"text",value:s,onChange:r=>J(r.target.value),className:`flex-1 px-3 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${d?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-700"}`,placeholder:"your-company"})]}),d?e.jsx("p",{className:"text-xs text-red-500 mt-1",children:d}):e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only lowercase letters, numbers, and hyphens. Will auto-format as you type."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Family"}),e.jsx("select",{value:m,onChange:r=>P(r.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:R.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Theme Preset"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:$.map(r=>e.jsxs("button",{onClick:()=>v(r.id),className:`p-4 rounded-lg border-2 text-left transition-all ${a===r.id?"border-purple-600 bg-purple-50 dark:bg-purple-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300"}`,children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.description})]},r.id))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>{C(s)&&E({slug:s,theme:a,primaryColor:c,fontFamily:m})},disabled:!!d,className:`px-4 py-2 rounded-lg transition-colors ${d?"bg-gray-400 text-white cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"}`,children:"Save Branding Settings"})})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800/50 rounded-b-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your public job board:"}),e.jsxs("a",{href:`https://careervivid.app/j/${s}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-purple-600 hover:text-purple-700",children:["careervivid.app/j/",s,e.jsx(G,{size:12})]})]})})]})};export{X as default};
