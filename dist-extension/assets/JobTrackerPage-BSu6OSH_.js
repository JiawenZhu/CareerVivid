import{u as h,r as d,j as e,L as w}from"./main-BEc7sVU2.js";import{u as v}from"./useJobTracker-Cq3ZcLQo.js";import{S as _,K as J,J as A}from"./KanbanBoard-CJQx1zcb.js";import{f as C}from"./geminiService-BsYmV8kM.js";import{u as j}from"./useTranslation-CNH1DPc_.js";import{X as S}from"./x-CgpMcjbW.js";import{F as D}from"./file-text-D4qk8Tzm.js";import{W as T}from"./wand-2-BNdNGVzL.js";import{A as U}from"./arrow-left-jQ4_17tq.js";import{P as z}from"./plus-circle-C7ZueYbE.js";import"./types-C3IBSKjb.js";import"./useResumes-C_g1Kxnt.js";import"./ConfirmationModal-BqGzcl3g.js";import"./index-Bgwdp8d1.js";import"./alert-triangle-BabHdlci.js";import"./useAICreditCheck-BiAjIaoo.js";import"./zap-DGAIHcfp.js";import"./check-BXDTBbZe.js";import"./briefcase-BA81y1Cf.js";import"./volume-2-Ci9QXAiK.js";import"./square-B5VCCcX7.js";import"./plus-BybH-_bu.js";import"./trash-2-9UIW2m7q.js";import"./arrow-right-CSdrhpF5.js";import"./check-circle-DqYJ7obf.js";import"./x-circle-DiIKiu2H.js";import"./chevron-down-Eiq7K4ut.js";import"./play-Bdt-AzR7.js";const L=({onClose:b,onJobAdded:a})=>{const{currentUser:o}=h(),{t}=j(),[s,g]=d.useState(""),[c,i]=d.useState(!1),[l,m]=d.useState(""),p=async x=>{if(x.preventDefault(),!s.trim()||!o){m(t("job_tracker.modal.error_empty"));return}i(!0),m("");try{const r=await C(o.uid,s);a({jobTitle:r.jobTitle||"Untitled Job",companyName:r.companyName||"Unknown Company",location:r.location||"",jobPostURL:"",applicationStatus:"To Apply",jobDescription:s})}catch(r){console.error("Error parsing description:",r),m(r.message||t("job_tracker.modal.error_parsing")),a({jobTitle:"Untitled Job (Manual)",companyName:"Unknown Company",jobPostURL:"",applicationStatus:"To Apply",jobDescription:s})}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-2xl",children:[e.jsxs("header",{className:"p-4 border-b dark:border-gray-700 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold",children:t("job_tracker.modal.track_new_title")}),e.jsx("button",{onClick:b,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(S,{size:20})})]}),e.jsxs("form",{onSubmit:p,className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:t("job_tracker.modal.paste_desc")}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-3 top-3 text-gray-400",size:20}),e.jsx("textarea",{value:s,onChange:x=>g(x.target.value),placeholder:t("job_tracker.modal.paste_placeholder"),required:!0,rows:12,className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-primary-500 focus:outline-none"})]}),l&&e.jsx("p",{className:"text-sm text-red-500 mt-2",children:l}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{type:"submit",disabled:c,className:"bg-primary-600 text-white font-semibold py-2 px-5 rounded-lg shadow-md hover:bg-primary-700 transition-colors flex items-center justify-center gap-2 disabled:bg-primary-300",children:[c?e.jsx(w,{className:"animate-spin"}):e.jsx(T,{size:20}),t(c?"job_tracker.modal.analyzing":"job_tracker.modal.analyze_btn")]})})]})]})})},de=()=>{const{currentUser:b}=h(),{t:a}=j(),{jobApplications:o,isLoading:t,addJobApplication:s,updateJobApplication:g,deleteJobApplication:c}=v(),[i,l]=d.useState(null),[m,p]=d.useState(!1),[x,r]=d.useState(!1),y=n=>{l(n),r(!1)},f=()=>{l(null),r(!1)},k=async n=>{if(p(!1),!!b)try{const u=await s(n);if(u){const N={...n,id:u,userId:b.uid,createdAt:new Date,updatedAt:new Date};l(N),r(!0)}}catch(u){console.error("Error adding job application:",u)}};return e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-900 min-h-screen",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm dark:border-b dark:border-gray-700",children:e.jsx("div",{className:"max-w-full mx-auto py-4 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"/",title:a("nav.dashboard"),className:"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(U,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:a("job_tracker.title")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:a("job_tracker.subtitle")})]})]}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 bg-primary-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-primary-700 transition-colors",children:[e.jsx(z,{size:20}),a("job_tracker.track_new")]})]})})}),e.jsx("main",{className:"py-10",children:e.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:t?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:a("job_tracker.loading")}):e.jsxs(e.Fragment,{children:[e.jsx(_,{applications:o}),e.jsx("div",{className:"mt-8",children:e.jsx(J,{applications:o,onCardClick:y,onUpdateApplication:g})})]})})}),m&&e.jsx(L,{onClose:()=>p(!1),onJobAdded:k}),i&&e.jsx(A,{job:o.find(n=>n.id===i.id)||i,onClose:f,onUpdate:g,onDelete:c,highlightGenerateButton:x})]})};export{de as default};
