import{O as c,u as x,j as e,o as l}from"./main-BEc7sVU2.js";import{s as o}from"./stitchService-VEo7ZZ6V.js";const p=()=>{const{items:r,cartTotal:a,clearCart:d}=c(),{currentUser:i,userProfile:m}=x(),n=async()=>{if(i)try{const t=r.map(s=>({productId:s.id,quantity:s.quantity})),h=await o.createOrder({drop_id:"drop_1",items:t});d(),alert("Order Placed Successfully!"),l("/feed")}catch(t){console.error("Order failed",t),alert("Failed to place order. Please try again.")}};return r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background-light dark:bg-background-dark p-6 text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-300 dark:text-gray-600 mb-4",children:"shopping_cart_off"}),e.jsx("h2",{className:"text-xl font-bold mb-2 text-text-main dark:text-white",children:"Your cart is empty"}),e.jsx("p",{className:"text-text-secondary dark:text-gray-400 mb-6",children:"Looks like you haven't added any fresh drops yet."}),e.jsx("button",{onClick:()=>l("/feed"),className:"px-6 py-3 bg-primary text-text-main font-bold rounded-xl shadow-lg shadow-primary/20",children:"Browse Drops"})]}):e.jsxs("div",{className:"bg-background-light dark:bg-background-dark text-text-main-light dark:text-text-main-dark font-display antialiased overflow-x-hidden transition-colors duration-200 min-h-screen pb-32",children:[e.jsxs("div",{className:"relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto bg-background-light dark:bg-background-dark shadow-xl pb-32",children:[e.jsxs("div",{className:"sticky top-0 z-50 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md px-4 py-3 flex items-center justify-between border-b border-gray-200 dark:border-gray-800",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center justify-center p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/5 transition-colors text-text-main-light dark:text-text-main-dark",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"arrow_back_ios_new"})}),e.jsx("h2",{className:"text-lg font-bold leading-tight tracking-tight flex-1 text-center pr-8",children:"Checkout"})]}),e.jsxs("div",{className:"flex flex-col gap-6 p-4",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-surface-light dark:bg-surface-dark shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-100 dark:bg-red-900/30 px-2 py-1 text-xs font-bold text-red-600 dark:text-red-400",children:[e.jsx("span",{className:"material-symbols-outlined text-[14px] align-middle",children:"timer"}),"Closes in 2h"]})}),e.jsx("div",{className:"p-5 flex gap-4",children:e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("p",{className:"text-primary text-sm font-bold uppercase tracking-wider mb-1",children:"Next Drop"}),e.jsx("h3",{className:"text-2xl font-bold mb-1",children:"Friday, Oct 24"}),e.jsxs("p",{className:"text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium flex items-center gap-1",children:[e.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"schedule"}),"4:00 PM - 6:00 PM"]})]})}),e.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 h-1 w-full mt-2",children:e.jsx("div",{className:"bg-primary h-full w-[85%] rounded-r-full"})}),e.jsxs("div",{className:"px-5 py-2 flex justify-between items-center text-xs text-text-secondary-light dark:text-text-secondary-dark bg-gray-50 dark:bg-white/5",children:[e.jsx("span",{children:"Group order is 85% full"}),e.jsx("span",{className:"font-bold text-primary",children:"Confirmed"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"flex items-center justify-center rounded-full bg-primary/10 dark:bg-primary/20 text-primary shrink-0 size-12",children:e.jsx("span",{className:"material-symbols-outlined text-2xl",children:"location_on"})}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-text-secondary-light dark:text-text-secondary-dark font-medium",children:"Delivering to"}),e.jsx("p",{className:"text-base font-bold truncate",children:"The Commons, Building B"}),e.jsx("p",{className:"text-xs text-text-secondary-light dark:text-text-secondary-dark truncate",children:"123 Maple Ave (Community Lobby)"})]}),e.jsx("button",{className:"shrink-0 p-2 text-text-secondary-light dark:text-text-secondary-dark hover:text-primary transition-colors",children:e.jsx("span",{className:"material-symbols-outlined text-xl",children:"edit"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-3 px-1",children:"Your Cart"}),e.jsx("div",{className:"flex flex-col gap-3",children:r.map(t=>e.jsxs("div",{className:"flex items-center gap-3 bg-surface-light dark:bg-surface-dark p-3 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsx("div",{className:"bg-center bg-no-repeat bg-cover rounded-lg size-14 shrink-0 bg-gray-200",style:{backgroundImage:`url(${t.image_url})`}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-base font-semibold truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-text-secondary-light dark:text-text-secondary-dark",children:["Qty: ",t.quantity," x ",t.unit]})]}),e.jsxs("div",{className:"shrink-0 font-bold",children:["$",(t.price*t.quantity).toFixed(2)]})]},t.id))})]}),e.jsxs("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-800 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["$",a.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"Community Fee"}),e.jsx("span",{className:"font-medium text-primary",children:"Free"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"Delivery"}),e.jsx("span",{className:"font-medium text-primary",children:"Free (Group Drop)"})]}),e.jsx("div",{className:"h-px w-full bg-gray-100 dark:bg-gray-700 my-1"}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",a.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center rounded bg-gray-100 dark:bg-white/10 size-10",children:e.jsx("span",{className:"material-symbols-outlined text-2xl text-gray-600 dark:text-gray-300",children:"credit_card"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-bold",children:"Apple Pay"}),e.jsx("span",{className:"text-xs text-text-secondary-light dark:text-text-secondary-dark",children:"Citibank •• 4242"})]})]}),e.jsx("button",{className:"text-sm font-semibold text-primary hover:opacity-80 transition-opacity",children:"Change"})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-surface-light dark:bg-surface-dark border-t border-gray-100 dark:border-gray-800 p-4 pb-8 z-40 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:e.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-secondary-light dark:text-text-secondary-dark",children:"Total to pay"}),e.jsxs("p",{className:"text-2xl font-bold tracking-tight",children:["$",a.toFixed(2)]})]}),e.jsxs("button",{onClick:n,className:"flex-1 ml-6 bg-primary text-background-dark font-bold text-lg h-14 rounded-xl shadow-lg shadow-primary/25 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:["Place Order",e.jsx("span",{className:"material-symbols-outlined font-bold",children:"arrow_forward"})]})]})})]}),e.jsx("style",{children:`
                /* Custom scrollbar hide for cleaner mobile look */
                .no-scrollbar::-webkit-scrollbar {
                    display: none;
                }
                .no-scrollbar {
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
            `})]})};export{p as default};
