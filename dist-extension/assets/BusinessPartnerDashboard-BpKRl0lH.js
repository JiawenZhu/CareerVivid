const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ResumePreview-CGTy__pj.js","assets/main-BEc7sVU2.js","assets/types-C3IBSKjb.js","assets/InlineEdit-LXaiIIc8.js","assets/pen-CDP9jQDD.js","assets/link-fr0uO6pY.js","assets/mail-C8AWi2yh.js","assets/send-BU04lBHk.js","assets/briefcase-BA81y1Cf.js","assets/video-n-qxSk9V.js","assets/youtube-DXIyuMbX.js","assets/twitter-BkzJSFqN.js","assets/linkedin-KoM4kuTt.js","assets/globe-DgZdGzus.js","assets/map-pin-OOBizwV5.js","assets/code-DFGvkwP7.js","assets/user-z_w8hJb6.js","assets/graduation-cap-CWgYxLce.js","assets/star-D73ZxPTB.js","assets/CandidatePipeline-Gw2UEmWR.js","assets/thumbs-up-BedDGc-v.js","assets/x-CgpMcjbW.js","assets/palette-BXPG-S57.js","assets/plus-BybH-_bu.js","assets/trash-2-9UIW2m7q.js","assets/upload-ph_HrLW-.js","assets/wand-2-BNdNGVzL.js","assets/more-vertical-17dfMr7j.js","assets/eye-DBT7NYFb.js","assets/calendar-BlywvGr0.js","assets/clock-BtKrYrPy.js","assets/file-text-D4qk8Tzm.js","assets/EmbedWidgetGenerator-C37WUIde.js","assets/code-2-CCMqSW_o.js","assets/check-BXDTBbZe.js","assets/copy-BbzbJe7R.js","assets/external-link-B-pRlJeA.js"])))=>i.map(i=>d[i]);
import{u as oe,r as n,o as b,l as D,e as A,f as C,j as e,d as ce,L as E,R as L,_ as M}from"./main-BEc7sVU2.js";import{D as _}from"./types-C3IBSKjb.js";import{g as xe,p as me,d as pe}from"./jobService-DkL2qb1A.js";import{g as ge,u as he,s as ue}from"./applicationService-CkZXj48l.js";import{b as be}from"./geminiService-BsYmV8kM.js";import{L as ye}from"./Logo-BDxZX0-1.js";import{B as X}from"./briefcase-BA81y1Cf.js";import{B as q}from"./bar-chart-3-Bibb30BA.js";import{U as T}from"./users-CW7lwuWe.js";import{C as fe}from"./code-2-CCMqSW_o.js";import{P as je}from"./plus-BybH-_bu.js";import{E as Ne}from"./eye-DBT7NYFb.js";import{P as ke}from"./pen-CDP9jQDD.js";import{T as ve}from"./trash-2-9UIW2m7q.js";import{F as we}from"./file-text-D4qk8Tzm.js";import{X as Ae}from"./x-CgpMcjbW.js";import{C as Ce}from"./chevron-up-DzRpdu-v.js";import{C as Ee}from"./chevron-down-Eiq7K4ut.js";import{C as Se}from"./check-circle-DqYJ7obf.js";import{X as Ie}from"./x-circle-DiIKiu2H.js";import{W as Pe}from"./wand-2-BNdNGVzL.js";import{M as Re}from"./mail-C8AWi2yh.js";import{C as Ue}from"./calendar-BlywvGr0.js";const ze=L.lazy(()=>M(()=>import("./ResumePreview-CGTy__pj.js").then(d=>d.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]))),$e=L.lazy(()=>M(()=>import("./CandidatePipeline-Gw2UEmWR.js"),__vite__mapDeps([19,1,2,20,21,22,4,23,24,25,26,16,27,28,6,29,30,31,18]))),De=L.lazy(()=>M(()=>import("./EmbedWidgetGenerator-C37WUIde.js"),__vite__mapDeps([32,1,33,28,22,34,35,36]))),it=()=>{const{currentUser:d,userProfile:y,logOut:H}=oe();`${y?.referralCode||"ERROR_NO_CODE"}`;const[p,f]=n.useState("jobs"),[Q,Y]=n.useState(null),[o,S]=n.useState([]),[c,I]=n.useState([]),[Z,F]=n.useState(!0),[P,J]=n.useState(null),[h,ee]=n.useState({}),[R,te]=n.useState({}),[g,j]=n.useState(null),[i,N]=n.useState(null),[re,k]=n.useState(null),[v,se]=n.useState(!0),[u,B]=n.useState(!1),[O,U]=n.useState(null);n.useEffect(()=>{if(!d){b("/signin");return}if(!(y?.roles?.includes("business_partner")||y?.role==="business_partner")){b("/");return}V()},[d,y]);const V=async()=>{if(d){F(!0),J(null);try{const t=await xe(d.uid);S(t);const r=[];for(const a of t){const x=await ge(a.id);r.push(...x)}r.sort((a,x)=>x.appliedAt.toMillis()-a.appliedAt.toMillis()),I(r);const s={},l={},m=Array.from(new Set(r.map(a=>a.applicantUserId)));await Promise.all(m.map(async a=>{try{const x=await D(A(C,"users",a));if(x.exists()){const $=x.data();s[a]=$.displayName||$.email||"Unknown User",l[a]=$.email||""}else s[a]="Unknown User",l[a]=""}catch(x){console.error("Error fetching user",a,x),s[a]="Error loading user",l[a]=""}})),ee(s),te(l);try{const a=await D(A(C,"companyProfiles",d.uid));a.exists()&&Y({id:a.id,...a.data()})}catch(a){console.error("Error loading company profile:",a)}}catch(t){console.error("Error loading dashboard data:",t),J(t instanceof Error?t.message:"Failed to load data")}finally{F(!1)}}},ae=async t=>{if(confirm("Are you sure you want to delete this job posting?"))try{await pe(t),S(o.filter(r=>r.id!==t))}catch(r){console.error("Error deleting job:",r),alert("Failed to delete job posting")}},ie=async t=>{try{await me(t),S(o.map(r=>r.id===t?{...r,status:"published"}:r))}catch(r){console.error("Error publishing job:",r),alert("Failed to publish job")}},z=async t=>{if(!t.resumeId){alert("No resume attached to this application.");return}try{const r=A(C,"users",t.applicantUserId,"resumes",t.resumeId),s=await D(r);s.exists()?(j({id:s.id,...s.data()}),N(t)):alert("Resume not found (it might have been deleted by the user).")}catch(r){console.error("Error fetching resume:",r),alert("Failed to load resume. Ensure you have permissions.")}},w=async(t,r)=>{try{await he(t,r,`Status updated to ${r}`),I(s=>s.map(l=>l.id===t?{...l,status:r}:l)),i&&i.id===t&&N(s=>s?{...s,status:r}:null),k(null)}catch(s){console.error("Error updating status:",s),alert("Failed to update status.")}},le=t=>{let r=`Title: ${t.personalDetails.jobTitle}

`;return r+=`Summary: ${t.professionalSummary}

`,r+=`Skills: ${t.skills.map(s=>s.name).join(", ")}

`,r+=`Experience:
`,t.employmentHistory.forEach(s=>{r+=`- ${s.jobTitle} at ${s.employer}
${s.description}
`}),r+=`
Education:
`,t.education.forEach(s=>{r+=`- ${s.degree} from ${s.school}
`}),r},K=async()=>{if(!d||!g||!i)return;const t=o.find(r=>r.id===i.jobPostingId);if(!t||!t.description){U("Job description not found.");return}B(!0),U(null);try{const r=le(g),s=await be(d.uid,r,t.description);await ue(i.id,s);const l={...i,matchAnalysis:s};N(l),I(m=>m.map(a=>a.id===l.id?l:a))}catch(r){console.error("Analysis Failed:",r),U(r instanceof Error?r.message:"Failed to analyze match.")}finally{B(!1)}},W=t=>t?(t.toDate?t.toDate():new Date(t)).toLocaleDateString():"N/A",ne=t=>{const r=h[t.applicantUserId]||"Candidate",s=R[t.applicantUserId];if(!s){alert("No email found for this candidate");return}const l=encodeURIComponent("Interview Invitation"),m=encodeURIComponent(`Dear ${r},

We are pleased to invite you for an interview for the position you applied for.

We look forward to speaking with you.

Best regards`),a=`https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(s)}&su=${l}&body=${m}`;window.open(a,"_blank")},de=t=>{const r=h[t.applicantUserId]||"Candidate",s=R[t.applicantUserId],l=encodeURIComponent(`Interview with ${r}`),m=encodeURIComponent(`Interview for position. Candidate: ${r}`),a=s?`&add=${encodeURIComponent(s)}`:"",x=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${l}&details=${m}${a}`;window.open(x,"_blank")};n.useEffect(()=>{const t=r=>{if(!(!g||!i)&&(r.key==="ArrowLeft"||r.key==="ArrowRight")){const s=c.findIndex(m=>m.id===i.id);if(s===-1)return;let l=s;r.key==="ArrowLeft"?l=Math.max(0,s-1):r.key==="ArrowRight"&&(l=Math.min(c.length-1,s+1)),l!==s&&z(c[l])}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[g,i,c]);const G=t=>{const r={draft:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",published:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",closed:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",submitted:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",reviewing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",shortlisted:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",accepted:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400","to apply":"bg-gray-100",interviewing:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400"},s=t.toLowerCase();return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r[s]||r.draft}`,children:t.charAt(0).toUpperCase()+t.slice(1)})};return Z?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[e.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("a",{href:"/",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-8 w-8"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CareerVivid"})]}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Business Partner"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>b("/"),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"Dashboard"}),e.jsx("button",{onClick:H,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:"Sign Out"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Jobs"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:o.length})]}),e.jsx(X,{className:"w-10 h-10 text-purple-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Postings"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:o.filter(t=>t.status==="published").length})]}),e.jsx(q,{className:"w-10 h-10 text-green-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Applications"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:c.length})]}),e.jsx(T,{className:"w-10 h-10 text-blue-600"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Avg Applications/Job"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:o.length>0?Math.round(c.length/o.length):0})]}),e.jsx(q,{className:"w-10 h-10 text-orange-600"})]})})]}),P&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-8",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"text-red-700 dark:text-red-300 font-medium",children:"Error loading data"})}),e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:P}),P.includes("index")&&e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2 font-semibold",children:"Developer Action Required: Check the browser console for the index creation link."})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-800",children:e.jsxs("nav",{className:"flex gap-8 px-6",children:[e.jsx("button",{onClick:()=>f("jobs"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${p==="jobs"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Job Management"}),e.jsx("button",{onClick:()=>f("pipeline"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${p==="pipeline"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Candidate Pipeline"}),e.jsx("button",{onClick:()=>f("applicants"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${p==="applicants"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Applicant List"}),e.jsxs("button",{onClick:()=>f("embed"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${p==="embed"?"border-purple-600 text-purple-600":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(fe,{size:16,className:"inline mr-1"}),"Embed Widget"]})]})}),e.jsx("div",{className:p==="pipeline"?"p-2":"p-6",children:p==="jobs"?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>b("/business-partner/jobs/new"),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(je,{size:20}),"Create New Job Posting"]})}),o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(X,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No job postings yet. Create your first job posting to get started!"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 dark:border-gray-800",children:e.jsxs("tr",{className:"text-left text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Job Title"}),e.jsx("th",{className:"pb-3 font-medium",children:"Status"}),e.jsx("th",{className:"pb-3 font-medium",children:"Applications"}),e.jsx("th",{className:"pb-3 font-medium",children:"Posted Date"}),e.jsx("th",{className:"pb-3 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:o.map(t=>e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.jobTitle}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:t.companyName})]})}),e.jsx("td",{className:"py-4",children:G(t.status)}),e.jsx("td",{className:"py-4 text-gray-900 dark:text-white",children:t.applicationCount}),e.jsx("td",{className:"py-4 text-gray-600 dark:text-gray-400",children:W(t.createdAt)}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.status==="draft"&&e.jsx("button",{onClick:()=>ie(t.id),className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors",title:"Publish",children:e.jsx(Ne,{size:16})}),e.jsx("button",{onClick:()=>b(`/business-partner/jobs/${t.id}/edit`),className:"p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",title:"Edit",children:e.jsx(ke,{size:16})}),e.jsx("button",{onClick:()=>ae(t.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Delete",children:e.jsx(ve,{size:16})})]})})]},t.id))})]})})]}):p==="embed"?e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(E,{className:"animate-spin"})}),children:e.jsx(De,{companyProfile:Q,onSaveProfile:async t=>{if(d)try{const r=A(C,"companyProfiles",t.slug||d.uid),s={hrUserId:d.uid,companyName:o[0]?.companyName||"My Company",slug:t.slug||o[0]?.companyName?.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"company"};(t.theme||t.primaryColor||t.fontFamily)&&(s.branding={theme:t.theme||"creative",primaryColor:t.primaryColor||"#7c3aed",fontFamily:t.fontFamily||"system-ui"}),await ce(r,s,{merge:!0}),await V()}catch(r){console.error("Error saving profile:",r),alert("Failed to save company profile. Please try again.")}}})}):p==="pipeline"?e.jsx("div",{children:c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(T,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No applications yet. Applications will appear in your pipeline once candidates apply."})]}):e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(E,{className:"animate-spin"})}),children:e.jsx($e,{applications:c,candidateNames:h,candidateEmails:R,onViewResume:z,onUpdateStatus:w,userId:d?.uid||""})})}):e.jsx("div",{children:c.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(T,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No applications yet. Applications will appear here once candidates apply to your jobs."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-gray-200 dark:border-gray-800",children:e.jsxs("tr",{className:"text-left text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Applicant"}),e.jsx("th",{className:"pb-3 font-medium",children:"Applied To"}),e.jsx("th",{className:"pb-3 font-medium",children:"Date Applied"}),e.jsx("th",{className:"pb-3 font-medium",children:"Status"}),e.jsx("th",{className:"pb-3 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:c.map(t=>{const r=o.find(s=>s.id===t.jobPostingId);return e.jsxs("tr",{className:"text-sm",children:[e.jsxs("td",{className:"py-4",children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:h[t.applicantUserId]||"Loading..."}),e.jsx("div",{className:"text-gray-500 text-xs truncate max-w-[150px]",title:t.applicantUserId,children:t.applicantUserId})]}),e.jsx("td",{className:"py-4 text-gray-600 dark:text-gray-400",children:r?.jobTitle||"Unknown Job"}),e.jsx("td",{className:"py-4 text-gray-600 dark:text-gray-400",children:W(t.appliedAt)}),e.jsx("td",{className:"py-4",children:re===t.id?e.jsx("select",{value:t.status,onChange:s=>w(t.id,s.target.value),onBlur:()=>k(null),className:"text-xs p-1 border rounded bg-white dark:bg-gray-800",autoFocus:!0,children:["submitted","reviewing","shortlisted","interviewing","rejected","accepted"].map(s=>e.jsx("option",{value:s,children:s},s))}):e.jsx("div",{onClick:()=>k(t.id),className:"cursor-pointer hover:opacity-80",children:G(t.status)})}),e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("button",{onClick:()=>z(t),className:"flex items-center gap-1 px-3 py-1 text-xs bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 rounded hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors",children:[e.jsx(we,{size:14}),"View Resume"]}),e.jsx("button",{onClick:()=>k(t.id),className:"px-3 py-1 text-xs bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:"Update Status"})]})})]},t.id)})})]})})})})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full h-full flex flex-col shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[h[i?.applicantUserId||""],"'s Resume"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Applied for: ",o.find(t=>t.id===i?.jobPostingId)?.jobTitle]})]}),e.jsx("button",{onClick:()=>{j(null),N(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full",children:e.jsx(Ae,{size:24,className:"text-gray-500"})})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800 px-6 py-4",children:i?.matchAnalysis?e.jsxs("div",{className:"bg-blue-600/10 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsxs("span",{children:[i.matchAnalysis.matchedKeywords.length," of ",i.matchAnalysis.totalKeywords," keywords found"]}),e.jsxs("span",{className:"text-lg",children:[Math.round(i.matchAnalysis.matchPercentage),"% Match"]})]}),e.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-2.5 mt-2",children:e.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${i.matchAnalysis.matchPercentage}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:K,disabled:u,className:"text-xs text-blue-600 hover:text-blue-800 underline disabled:opacity-50",children:u?"Refreshing...":"Refresh Analysis"}),e.jsx("button",{onClick:()=>se(!v),className:"p-1.5 hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-full transition-colors text-blue-700 dark:text-blue-300",title:v?"Collapse analysis":"Expand analysis",children:v?e.jsx(Ce,{size:20}):e.jsx(Ee,{size:20})})]})]}),v&&e.jsxs("div",{className:"mt-4 text-sm animate-in slide-in-from-top-2 duration-200",children:[e.jsx("p",{className:"font-semibold mb-2",children:i.matchAnalysis.summary}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-green-700 dark:text-green-400 flex items-center gap-1",children:[e.jsx(Se,{size:14})," Matched Keywords"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.matchAnalysis.matchedKeywords.map(t=>e.jsx("span",{className:"bg-green-200/50 dark:bg-green-900/40 text-green-800 dark:text-green-300 text-xs px-2 py-0.5 rounded-md",children:t},t))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-yellow-700 dark:text-yellow-400 flex items-center gap-1",children:[e.jsx(Ie,{size:14})," Missing Keywords"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:i.matchAnalysis.missingKeywords.map(t=>e.jsx("span",{className:"bg-yellow-200/50 dark:bg-yellow-900/40 text-yellow-800 dark:text-yellow-300 text-xs px-2 py-0.5 rounded-md",children:t},t))})]})]})]})]}):e.jsxs("div",{className:"flex justify-center",children:[e.jsxs("button",{onClick:K,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-70 transition-colors shadow-sm",children:[u?e.jsx(E,{size:16,className:"animate-spin"}):e.jsx(Pe,{size:16}),u?"Analyzing Resume...":"Analyze Match with AI"]}),O&&e.jsx("p",{className:"text-red-500 text-sm ml-4 self-center",children:O})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-100 dark:bg-gray-950 p-6 flex justify-center",children:e.jsx("div",{className:"bg-white shadow-xl origin-top transform scale-90",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"p-10",children:e.jsx(E,{className:"animate-spin"})}),children:e.jsx(ze,{resume:g,template:g.templateId})})})}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 flex justify-end gap-3",children:i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{w(i.id,"rejected"),j(null)},className:"px-4 py-2 border border-red-200 text-red-700 rounded-lg hover:bg-red-50",children:"Reject"}),e.jsxs("button",{onClick:()=>ne(i),className:"flex items-center gap-2 px-4 py-2 border border-blue-200 text-blue-700 rounded-lg hover:bg-blue-50 dark:border-blue-800 dark:text-blue-300 dark:hover:bg-blue-900/30 transition-colors",title:"Send Email via Gmail",children:[e.jsx(Re,{size:18}),"Send Email"]}),e.jsxs("button",{onClick:()=>de(i),className:"flex items-center gap-2 px-4 py-2 border border-orange-200 text-orange-700 rounded-lg hover:bg-orange-50 dark:border-orange-800 dark:text-orange-300 dark:hover:bg-orange-900/30 transition-colors",title:"Schedule Interview",children:[e.jsx(Ue,{size:18}),"Schedule"]}),(()=>{const t=i.status==="submitted"?"new":i.status,r=_.findIndex(l=>l.id===t),s=r!==-1&&r<_.length-1?_[r+1]:null;return s&&s.id!=="rejected"?e.jsxs("button",{onClick:()=>{w(i.id,s.id),j(null)},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:["Move to ",s.name]}):null})()]})})]})})]})};export{it as default};
