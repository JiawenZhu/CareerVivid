import{n as p,g as r,q as g,A as w,w as m,o as y,f as d,m as h,B as u,T as b,D as f,x as j,J as P,K as J}from"./main-D7bwdUQx.js";const C=async t=>{const s=p(r,"jobPostings"),o=b.now(),e={...t,status:t.status||"draft",viewCount:0,applicationCount:0,createdAt:o,updatedAt:o},a=Object.fromEntries(Object.entries(e).filter(([i,c])=>c!==void 0));return(await j(s,a)).id},D=async(t,s)=>{const o=d(r,"jobPostings",t),e={...s,updatedAt:b.now()},a=Object.fromEntries(Object.entries(e).filter(([l,i])=>i!==void 0));await u(o,a)},T=async t=>{const s=d(r,"jobPostings",t),o=await h(s);return o.exists()?{id:o.id,...o.data()}:null},v=async t=>{const s=p(r,"jobPostings"),o=g(s,m("hrUserId","==",t),w("createdAt","desc"));return(await y(o)).docs.map(a=>({id:a.id,...a.data()}))},x=async()=>{const t=p(r,"jobPostings"),s=g(t,m("status","==","published"));return(await y(s)).docs.map(a=>({id:a.id,...a.data()})).sort((a,l)=>{const i=a.publishedAt?.toMillis?.()||0;return(l.publishedAt?.toMillis?.()||0)-i})},U=async t=>{const s=d(r,"jobPostings",t);await f(s)},S=async t=>{const s=d(r,"jobPostings",t);await u(s,{status:"published",publishedAt:b.now(),updatedAt:b.now()})},q=async t=>{const s=d(r,"jobPostings",t),o=await h(s);if(o.exists()){const e=o.data().viewCount||0;await u(s,{viewCount:e+1})}},B=async(t,s,o=10,e,a=!1)=>{const l=P(J,"jobs-searchJobsCallable");try{const c=(await l({query:t,location:s,jobCount:o,pageToken:e,bypassCache:a})).data;return{jobs:(c.jobs||[]).map(n=>({id:n.id||`google-${Math.random().toString(36).substr(2,9)}`,jobTitle:n.title||n.jobTitle||"Untitled Position",companyName:n.company||n.companyName||"Unknown Company",location:n.location||"Remote",locationType:"On-site",description:n.description||"",employmentType:"Full-time",salaryMin:void 0,salaryMax:void 0,salaryCurrency:"USD",applyUrl:n.url||n.applyUrl||"",source:"google",status:"published"})),nextPageToken:c.nextPageToken,totalSize:c.totalSize,error:c.error,cached:c.cached}}catch(i){throw console.error("Error calling searchJobsCallable function:",i),i}};export{T as a,x as b,C as c,U as d,v as g,q as i,S as p,B as s,D as u};
