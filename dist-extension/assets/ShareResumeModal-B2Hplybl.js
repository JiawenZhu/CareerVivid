import{u,r as n,j as e}from"./main-Bi0Ei0w3.js";import{S as y}from"./share-2-5k-1k_RB.js";import{X as b}from"./x-BVB0Dpji.js";import{G as k}from"./globe-cx_xjewK.js";import{L as j}from"./lock-U6skUTSX.js";import{C as v}from"./check-B3yF-HgQ.js";import{C as w}from"./copy-Ctg5viPO.js";import{E as N}from"./external-link-neXkVJuu.js";const G=({isOpen:i,onClose:o,resume:t,onUpdate:x})=>{const{currentUser:m}=u(),[r,l]=n.useState(t.shareConfig||{enabled:!1,permission:"viewer"}),[g,d]=n.useState(!1),c=m?`${window.location.origin}/shared/${m.uid}/${t.id}`:"";n.useEffect(()=>{t.shareConfig&&l(t.shareConfig)},[t.shareConfig]),n.useEffect(()=>{if(!i)d(!1);else{const a=s=>{s.key==="Escape"&&o()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}},[i,o]);const h=a=>{const s={...r,enabled:a};l(s),x(t.id,{shareConfig:s})},f=a=>{const s={...r,permission:a};l(s),x(t.id,{shareConfig:s})},p=()=>{navigator.clipboard.writeText(c),d(!0),setTimeout(()=>d(!1),2e3)};return i?e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md overflow-hidden border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center bg-gray-50 dark:bg-gray-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/30 p-2 rounded-full text-primary-600 dark:text-primary-400",children:e.jsx(y,{size:20})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Share Resume"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Manage public access"})]})]}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:e.jsx(b,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.enabled?e.jsx(k,{className:"text-green-500",size:20}):e.jsx(j,{className:"text-gray-400",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.enabled?"Public access is on":"Public access is off"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.enabled?"Anyone with the link can view":"Only you can view this resume"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r.enabled,onChange:a=>h(a.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),r.enabled&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"Public Link"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,readOnly:!0,className:"flex-1 p-2.5 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-600 dark:text-gray-300 focus:outline-none"}),e.jsx("button",{onClick:p,className:`p-2.5 rounded-lg border transition-all duration-200 flex items-center justify-center gap-2 min-w-[90px] ${g?"bg-green-50 border-green-200 text-green-600 dark:bg-green-900/20 dark:border-green-800 dark:text-green-400":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:g?e.jsxs(e.Fragment,{children:[e.jsx(v,{size:16}),e.jsx("span",{className:"text-xs font-bold",children:"Copied"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{size:16}),e.jsx("span",{className:"text-xs font-medium",children:"Copy"})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1.5 uppercase tracking-wider",children:"General Access"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r.permission,onChange:a=>f(a.target.value),className:"w-full appearance-none p-3 pr-10 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent cursor-pointer",children:[e.jsx("option",{value:"viewer",children:"Viewer (Can view & download)"}),e.jsx("option",{value:"commenter",children:"Commenter (Can add comments)"}),e.jsx("option",{value:"editor",children:"Editor (Can make changes)"})]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-gray-500",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[r.permission==="viewer"&&e.jsxs("span",{children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," The 'Download PDF' option will only be active if you (the owner) are a Premium user, or if the viewer themselves holds a Premium account."]}),r.permission==="commenter"&&"Allows the viewer to leave text comments and draw annotations directly on your resume for feedback.",r.permission==="editor"&&e.jsx("span",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400",children:"⚠️ Grants full write access. Select this only if you trust the viewer to modify or rewrite your resume content."})]})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-sm text-primary-600 dark:text-primary-400 hover:underline font-medium",children:["Open public link ",e.jsx(N,{size:14})]})})]})]})]})}):null};export{G as S};
