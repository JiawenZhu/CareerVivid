import{r as s,j as e,L as k}from"./main-BEc7sVU2.js";import{i as N}from"./geminiService-BsYmV8kM.js";import{W as w}from"./wand-2-BNdNGVzL.js";import{X as C}from"./x-CgpMcjbW.js";import{S as b}from"./sparkles-Br3FZYhV.js";import{C as I}from"./check-circle-DqYJ7obf.js";const z=({value:o,onChange:m,className:g,maxHeight:d=600,minHeight:l=100,style:p,...c})=>{const x=s.useRef(null),r=()=>{const t=x.current;if(t){t.style.height="auto";const n=t.scrollHeight,a=Math.max(n,l||0);a>d?(t.style.height=`${d}px`,t.style.overflowY="auto"):(t.style.height=`${a}px`,t.style.overflowY="hidden")}};return s.useEffect(()=>{r()},[o]),s.useEffect(()=>(window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)),[]),e.jsx("textarea",{ref:x,value:o,onChange:t=>{m(t)},className:`resize-none transition-[height] duration-100 ease-out ${g}`,style:{minHeight:`${l}px`,...p},...c})},T=({userId:o,sectionName:m,currentText:g,language:d,onAccept:l,onClose:p,onError:c,contextType:x="resume"})=>{const[r,t]=s.useState(""),[n,h]=s.useState(!1),[a,u]=s.useState(""),[y,f]=s.useState(""),j=async()=>{if(!r.trim()){c("Input Required","Please provide an instruction for the AI.");return}h(!0);try{const{improvedContent:i,explanation:v}=await N(o,m,g,r,d,x);u(i),f(v)}catch(i){c("AI Improvement Failed",i instanceof Error?i.message:"An unknown error occurred.")}finally{h(!1)}};return e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700 animate-fade-in shadow-inner",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-bold flex items-center gap-2 text-primary-600 dark:text-primary-400",children:[e.jsx(w,{size:16})," AI Assistant"]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:e.jsx(C,{size:16})})]}),a?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-700 p-3 rounded-md border border-gray-200 dark:border-gray-600",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Suggestion:"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:a}),y&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-600",children:[e.jsxs("p",{className:"text-xs font-semibold text-indigo-400 dark:text-indigo-300 mb-0.5 flex items-center gap-1",children:[e.jsx(b,{size:10})," Why this helps:"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 italic leading-relaxed",children:y})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{u(""),f("")},className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-md transition-colors",children:"Try Again"}),e.jsxs("button",{onClick:()=>l(a),className:"px-3 py-1.5 text-sm bg-green-600 text-white hover:bg-green-700 rounded-md flex items-center gap-2 transition-colors",children:[e.jsx(I,{size:14})," Apply Change"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{value:r,onChange:i=>t(i.target.value),placeholder:'How should I improve this? (e.g., "Fix grammar", "Make it punchier", "Translate to Spanish")',className:"w-full p-3 text-sm border border-gray-300 dark:border-gray-600 rounded-md mb-3 bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary-500 focus:outline-none",maxHeight:200,autoFocus:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:j,disabled:n||!r.trim(),className:"bg-primary-600 text-white text-sm py-2 px-4 rounded-md hover:bg-primary-700 disabled:bg-primary-300 flex items-center gap-2 transition-colors",children:[n?e.jsx(k,{className:"animate-spin",size:16}):e.jsx(b,{size:16}),n?"Generating...":"Generate"]})})]})]})};export{T as A,z as a};
