import{t as Y,r as u,j as e,L as O,u as J,a1 as V,o as U}from"./main-BEc7sVU2.js";import{G as X}from"./index-DUexRrDI.js";import{u as q}from"./index-CScl1Xt6.js";import{i as Z,g as K,m as Q,p as ee,G as te}from"./pdf.worker.min-NjiBXALH.js";import{u as $}from"./useTranslation-CNH1DPc_.js";import{A as re}from"./alert-circle-gw7bsKwP.js";import{U as H}from"./upload-cloud-Bz-Uhqq1.js";import{u as ae}from"./useAICreditCheck-BiAjIaoo.js";import{C as oe}from"./ConfirmationModal-BqGzcl3g.js";import{L as ie}from"./layout-dashboard-BUznMAJN.js";import{S as G}from"./sparkles-Br3FZYhV.js";import{C as z}from"./code-2-CCMqSW_o.js";import{A}from"./arrow-right-CSdrhpF5.js";import{F as se}from"./file-code--JYI6on6.js";import{C as ne}from"./chevron-left-fFcpqHUE.js";import{P as le}from"./plus-BybH-_bu.js";import"./index-Chjiymov.js";import"./x-CgpMcjbW.js";import"./zap-DGAIHcfp.js";import"./check-BXDTBbZe.js";import"./index-Bgwdp8d1.js";import"./alert-triangle-BabHdlci.js";const de="AIzaSyDmZtOuln6nyqGoHC060hE5CDBLeX56hbU",R=new X({apiKey:de}),ce=`
You are an expert Portfolio Architect.
Your goal is to parse the user's input (which may be a text description, a Resume, or raw Code) and generate a structured JSON object for their portfolio website.

INPUT HANDLING STRATEGY:
1. **If Input is a Description**: Generate a creative portfolio matching the vibe (e.g., "Dark mode for a dev" -> create relevant mock projects).
2. **If Input is Code (HTML/React/JS)**: ANALYZE the code. Extract the developer's name, projects, skills, and bio directly from the code logic and comments. Map them to the schema.
3. **If Input is a Resume**: Extract the candidate's real details (Experience, Education, Skills) and populate the schema faithfully.

CRITICAL RULES:
1. Return ONLY valid JSON. No markdown, no explanations, no code blocks.
2. ALL fields must be present, even if empty.
3. Use realistic, professional content based on the prompt.
4. For thumbnailUrl, use Unsplash URLs: https://source.unsplash.com/800x600/?[keyword]

EXACT JSON SCHEMA - DO NOT DEVIATE:
{
  "templateId": "minimalist" | "visual" | "corporate",
  "title": string,
  "hero": {
    "headline": string,
    "subheadline": string,
    "ctaPrimaryLabel": string,
    "ctaPrimaryUrl": string,
    "ctaSecondaryLabel": string,
    "ctaSecondaryUrl": string
  },
  "about": string (2-3 paragraphs),
  "timeline": [
    {
      "id": string,
      "jobTitle": string,
      "employer": string,
      "startDate": string,
      "endDate": string,
      "city": string,
      "description": string
    }
  ],
  "education": [],
  "techStack": [
    {
      "id": string,
      "name": string,
      "level": "Expert" | "Advanced" | "Intermediate"
    }
  ],
  "projects": [
    {
      "id": string,
      "title": string,
      "description": string,
      "tags": string[],
      "thumbnailUrl": string,
      "demoUrl": string,
      "repoUrl": string
    }
  ],
  "socialLinks": [],
  "contactEmail": string,
  "theme": {
    "primaryColor": string (hex color),
    "darkMode": boolean
  }
}

EXAMPLES:
- For "minimalist" template: primaryColor="#2563eb", darkMode=false
- For "visual" template: primaryColor="#8b5cf6", darkMode=true  
- For "corporate" template: primaryColor="#0f172a", darkMode=false
`,me=async(n,l)=>{if(!R)return console.warn("[Portfolio] No AI client, using fallback generation"),B(n,l);try{console.log("[Portfolio] Generating with AI, prompt:",n);const o=await R.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:`User request: "${n}". Generate a complete portfolio JSON following the schema exactly.`}]},config:{systemInstruction:ce,responseMimeType:"application/json"}}),p=o.usageMetadata?.totalTokenCount||0;await Y(l,"portfolio_generation",{tokenUsage:p});const d=o.text||"{}";console.log("[Portfolio] Raw AI response:",d.substring(0,200));const r=JSON.parse(d);console.log("[Portfolio] AI generated data:",r);const h=Date.now();r.timeline&&r.timeline.forEach((m,g)=>{m.id||(m.id=`timeline_${g}`)}),r.techStack&&r.techStack.forEach((m,g)=>{m.id||(m.id=`skill_${g}`)}),r.projects&&r.projects.forEach((m,g)=>{m.id||(m.id=`project_${g}`)});const x={id:crypto.randomUUID(),userId:l,createdAt:h,updatedAt:h,education:[],socialLinks:[],...r};return r.templateId?.startsWith("linktree_")&&(x.mode="linkinbio",x.linkInBio={links:[{id:"1",label:"My Website",url:"https://example.com",icon:"Globe",variant:"primary",enabled:!0,order:1},{id:"2",label:"GitHub",url:"https://github.com",icon:"Github",variant:"secondary",enabled:!0,order:2},{id:"3",label:"LinkedIn",url:"https://linkedin.com",icon:"Linkedin",variant:"outline",enabled:!0,order:3}],showSocial:!0,showEmail:!0,profileImage:r.hero?.avatarUrl||"",displayName:r.hero?.headline||"Your Name",bio:r.about||"Add your bio here",backgroundColor:r.theme?.darkMode?"#0f1117":"#ffffff",buttonLayout:r.templateId==="linktree_bento"?"grid":"stack"}),console.log("[Portfolio] Final portfolio data:",x),x}catch(o){return console.error("[Portfolio] AI generation error:",o),console.error("[Portfolio] Error details:",o instanceof Error?o.message:String(o)),B(n,l)}};function B(n,l){const o=n.toLowerCase();let p="minimalist";o.includes("designer")||o.includes("creative")?p="visual":(o.includes("manager")||o.includes("executive"))&&(p="corporate");const d=Date.now(),r={id:crypto.randomUUID(),userId:l,title:`${n} Portfolio`,templateId:p,hero:{headline:"Welcome to my Portfolio",subheadline:n,ctaPrimaryLabel:"View My Work",ctaPrimaryUrl:"#projects",ctaSecondaryLabel:"Contact Me",ctaSecondaryUrl:"mailto:hello@example.com"},about:`I am passionate about ${n}. This is a generated portfolio.`,timeline:[{id:"1",jobTitle:"Senior Role",employer:"Tech Corp",startDate:"2021",endDate:"Present",city:"Remote",description:"Leading key projects."}],education:[],techStack:[{id:"1",name:"Communication",level:"Expert"}],projects:[{id:"1",title:"Sample Project",description:"A great project",tags:["Tech"],thumbnailUrl:"",demoUrl:"",repoUrl:""}],socialLinks:[],contactEmail:"",theme:{primaryColor:"#2563eb",darkMode:!1},createdAt:d,updatedAt:d};return p.toString().startsWith("linktree_")&&(r.mode="linkinbio",r.linkInBio={links:[{id:"1",label:"My Website",url:"https://example.com",icon:"Globe",variant:"primary",enabled:!0,order:1},{id:"2",label:"GitHub",url:"https://github.com",icon:"Github",variant:"secondary",enabled:!0,order:2},{id:"3",label:"LinkedIn",url:"https://linkedin.com",icon:"Linkedin",variant:"outline",enabled:!0,order:3}],showSocial:!0,showEmail:!0,profileImage:"",displayName:"Your Name",bio:`Passionate about ${n}`,backgroundColor:r.theme.darkMode?"#0f1117":"#ffffff",buttonLayout:String(p)==="linktree_bento"?"grid":"stack"}),r}te.workerSrc=ee;const pe=({onFileProcessed:n,value:l,onChange:o,placeholder:p,isReadOnly:d=!1,className:r,children:h})=>{const{t:x}=$(),[f,m]=u.useState(!1),[g,b]=u.useState(null),[w,v]=u.useState(!1),[S,N]=u.useState(""),j=l!==void 0?l:S,P=i=>{const t=i.target.value;o?o(t):N(t)},L=async i=>{const t=await i.arrayBuffer(),c=await K({data:t}).promise;let k="";for(let s=1;s<=c.numPages;s++){const F=(await(await c.getPage(s)).getTextContent()).items.map(W=>W.str).join(" ");k+=F+`

`}return k},_=async i=>{const t=await i.arrayBuffer();return(await Q.extractRawText({arrayBuffer:t})).value},C=async i=>{m(!0),b(null);let t="";try{if(i.type==="application/pdf"?t=await L(i):i.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||i.name.endsWith(".docx")?t=await _(i):t=await i.text(),!t.trim())throw new Error("Could not extract text from file.");o?o(t):N(t),n&&n(t)}catch(c){console.error("File processing error:",c),b(c.message||"Failed to process file.")}finally{m(!1)}},y=u.useCallback((i,t)=>{if(t.length>0){b("Invalid file type.");return}i.length>0&&C(i[0])},[o,n]),{getRootProps:T,getInputProps:D,isDragActive:I,open:a}=q({onDrop:y,accept:{"application/pdf":[".pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"text/plain":[".txt",".md",".markdown"],"text/html":[".html",".htm"],"text/css":[".css"],"text/javascript":[".js",".jsx",".ts",".tsx"],"application/json":[".json"]},maxFiles:1,disabled:f||d,noClick:!0,onDragEnter:()=>v(!0),onDragLeave:()=>v(!1),onDropAccepted:()=>v(!1)});return e.jsxs("div",{className:`w-full ${r||""}`,children:[g&&e.jsxs("div",{className:"mb-3 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm flex items-start animate-in slide-in-from-top-2",children:[e.jsx(re,{size:16,className:"mt-0.5 mr-2 flex-shrink-0"}),e.jsx("span",{children:g})]}),e.jsxs("div",{...T(),className:`
                    relative flex items-end gap-2 p-2 rounded-xl border transition-all duration-300
                    ${I||w?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 ring-2 ring-indigo-500/20":"border-transparent bg-gray-100 dark:bg-gray-800 focus-within:ring-2 focus-within:ring-indigo-500/20 focus-within:border-indigo-500/50"}
                    ${d?"cursor-not-allowed opacity-60":""}
                `,children:[e.jsx("input",{...D()}),e.jsx("button",{type:"button",onClick:a,disabled:f||d,className:"flex-shrink-0 p-3 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 rounded-lg shadow-sm border border-gray-200 dark:border-gray-600 transition-colors",title:"Upload Resume or Code",children:f?e.jsx(O,{size:20,className:"animate-spin text-indigo-500"}):e.jsx(H,{size:20})}),e.jsx("div",{className:"flex-grow relative min-h-[46px] flex items-center",children:e.jsx(Z,{minRows:1,maxRows:8,placeholder:I?"Drop file here...":p||"Describe your dream portfolio...",className:"w-full bg-transparent border-none text-gray-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 text-base resize-none focus:ring-0 focus:outline-none outline-none p-0 m-0 leading-relaxed",value:j,onChange:P,disabled:f||d})}),h&&e.jsx("div",{className:"flex-shrink-0",children:h})]}),e.jsx("div",{className:"flex justify-between mt-2 px-1",children:e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Supports PDF, DOCX, TXT, HTML, CSS, JS, React, etc."})})]})},ge=[{id:"linkinbio",name:"ðŸ”— Link in Bio",description:"Simple, shareable pages perfect for social media bios (Instagram, TikTok, etc.)",path:"/bio-links",templates:["linktree_minimal","linktree_corporate","linktree_bento","sunset_surf","neon_nights","papercut","foliage","wavy_bakery","jagged_run","abstract_fluid","mineral"]},{id:"nfc_cards",name:"Digital Business Cards",description:"Horizontal, mobile-first cards optimized for NFC sharing.",path:"/business-card",templates:["card_minimal","card_photo","card_modern"]},{id:"tech",name:"Technology",description:"For software engineers, product managers, and data scientists.",templates:["dev_terminal","minimalist","saas_modern"]},{id:"creative",name:"Creative & Design",description:"For UX/UI designers, artists, and photographers.",templates:["ux_folio","visual","creative_dark"]},{id:"professional",name:"Business & Professional",description:"For executives, lawyers, and consultants.",templates:["corporate","legal_trust","executive_brief"]},{id:"specialist",name:"Specialized Careers",description:"For medical professionals, academics, and creators.",templates:["medical_care","academic_research","writer_editorial","bento_personal"]}],Me=()=>{const{t:n}=$(),{currentUser:l,isPremium:o}=J(),{createPortfolio:p,portfolios:d}=V(),{checkCredit:r,CreditLimitModal:h}=ae(),[x,f]=u.useState(""),[m,g]=u.useState(!1),[b,w]=u.useState(null),[v,S]=u.useState(!1),[N,j]=u.useState(!1),P=d.filter(a=>a.mode==="linkinbio").length,L=d.length,[_,C]=u.useState("You have reached your site limit. Please upgrade your plan to create more."),y=async(a,i="prompt")=>{if(l){if(!o&&L>=2){C("Free users can only create up to 2 sites. Please upgrade your plan to create more."),j(!0);return}if(r()){g(!0);try{let t="",c="",k="";i==="template"?(c=a,t=`Create a portfolio for a professional using the ${a} style`,["sunset_surf","neon_nights","papercut","foliage","wavy_bakery","jagged_run","abstract_fluid","mineral"].includes(a)&&(c="linktree_visual",k=a)):t=a,console.log("[PortfolioHub] Creating portfolio...",{promptToUse:t,templateIdToUse:c,specificThemeId:k});const s=await me(t,l.uid);if(c&&(s.templateId=c,["linktree_minimal","linktree_visual","linktree_corporate","linktree_bento"].includes(c)&&(s.mode="linkinbio",s.linkInBio={links:[],showSocial:!0,showEmail:!0,displayName:s.hero.headline||l.displayName||"My Links",bio:s.about||"Welcome to my links page.",profileImage:s.hero.avatarUrl||l.photoURL,buttonLayout:"stack",themeId:k||"air"},s.hero.headline=s.linkInBio.displayName),["card_minimal","card_photo","card_modern"].includes(c)&&(s.mode="business_card",s.businessCard={orientation:"horizontal"})),s.mode==="linkinbio"&&!o&&P>=1){C("You have reached your Bio-Link limit. Please upgrade your plan to create more."),j(!0);return}const E=await p(s),M=l.email?.split("@")[0]||"user";U(`/portfolio/${M}/edit/${E}`)}catch(t){console.error("[PortfolioHub] Error creating portfolio:",t),alert("Failed to generate portfolio. Please try again.")}finally{g(!1)}}}},T=()=>{x.trim()&&y(x,"prompt")},D=a=>{S(!0),f(a),y(a,"prompt")},I=()=>b?e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsxs("button",{onClick:()=>w(null),className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 mb-6 font-semibold transition-colors",children:[e.jsx(ne,{size:18})," Back to Categories"]}),e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 font-heading",children:["Select a Template for ",b.name]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:b.templates.map(a=>{const i=a.replace("linktree_","").split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ");return e.jsxs("button",{onClick:()=>y(a,"template"),className:"p-6 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:border-indigo-500 dark:hover:border-indigo-400 hover:shadow-md transition-all text-left group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity",children:e.jsx(G,{size:64})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 dark:text-gray-100 mb-1",children:i}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Click to generate using this style."}),e.jsxs("div",{className:"flex items-center text-indigo-600 dark:text-indigo-400 text-sm font-semibold gap-1 group-hover:gap-2 transition-all",children:["Use Template ",e.jsx(A,{size:16})]})]})]},a)})})]}):e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-6 font-heading",children:"Explore Design Templates"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[ge.map(a=>e.jsxs("button",{onClick:()=>{a.path?U(a.path):w(a)},className:"p-5 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 hover:border-indigo-500 dark:hover:border-indigo-400 hover:shadow-md transition-all text-left flex items-center justify-between group",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:a.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-1",children:a.description})]}),e.jsx(A,{size:20,className:"text-gray-300 group-hover:text-indigo-500 transition-colors"})]},a.id)),e.jsxs("button",{onClick:()=>y("blank","template"),className:"p-5 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-dashed border-gray-300 dark:border-gray-700 hover:border-indigo-500 hover:bg-white dark:hover:bg-gray-800 transition-all text-left flex items-center justify-between group",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-600 dark:text-gray-300 mb-1",children:"Empty Canvas"}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1",children:"Start from scratch"})]}),e.jsx(le,{size:20,className:"text-gray-400 group-hover:text-indigo-500 transition-colors"})]})]})]});return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0f1117] flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8 relative selection:bg-indigo-500/30",children:[e.jsx(h,{}),e.jsx(oe,{isOpen:N,onCancel:()=>j(!1),onConfirm:()=>U("/subscription"),title:"Limit Reached",message:_,confirmText:"Upgrade Now",cancelText:"Maybe Later",variant:"default"}),d.length>0&&e.jsx("div",{className:"absolute top-6 right-6 z-20",children:e.jsxs("a",{href:"/",className:"flex items-center gap-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 font-semibold py-2 px-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(ie,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Dashboard"})]})}),m?e.jsxs("div",{className:"text-center animate-in fade-in duration-700",children:[e.jsxs("div",{className:"w-16 h-16 bg-indigo-500/10 rounded-2xl flex items-center justify-center mx-auto mb-6 relative",children:[e.jsx(O,{className:"w-8 h-8 text-indigo-500 animate-spin"}),e.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-xl rounded-full animate-pulse"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Generating your portfolio..."}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:" Analyzing your inputs and designing the perfect layout."})]}):e.jsxs("div",{className:"w-full max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12 animate-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 mb-6 bg-indigo-600 rounded-xl shadow-lg shadow-indigo-500/30",children:e.jsx(G,{className:"w-8 h-8 text-white"})}),e.jsxs("h1",{className:"text-4xl sm:text-6xl font-extrabold text-gray-900 dark:text-white mb-6 tracking-tight",children:["Build your dream portfolio ",e.jsx("br",{className:"hidden sm:block"}),e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 to-purple-500",children:"in minutes."})]}),e.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto leading-relaxed",children:["Describe your vision, upload a resume, or drop in your code files. ",e.jsx("br",{className:"hidden sm:block"}),"Our AI will generate a stunning, deployed portfolio websites for you instantly."]})]}),e.jsx("div",{className:"bg-white dark:bg-[#1a1d24] p-6 sm:p-2 rounded-2xl shadow-xl shadow-indigo-500/5 border border-gray-200 dark:border-white/5 mb-16 animate-in slide-in-from-bottom-8 duration-700 delay-100 ring-1 ring-gray-900/5 dark:ring-white/10",children:e.jsxs("div",{className:"max-w-3xl mx-auto py-8 px-4 sm:px-0",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(z,{className:"text-indigo-500",size:24}),"Generate from Prompt or Code"]}),e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx(pe,{value:x,onChange:f,onFileProcessed:D,placeholder:"Describe your portfolio (e.g. 'Dark mode portfolio for a React Developer') or drop existing code files...",className:"bg-transparent",children:e.jsx("button",{onClick:T,className:"bg-indigo-600 text-white p-3 rounded-xl shadow-lg shadow-indigo-500/20 hover:bg-indigo-700 hover:shadow-indigo-500/30 transition-all flex items-center justify-center disabled:bg-indigo-400 disabled:cursor-not-allowed group",disabled:!x.trim(),title:v?"Parse & Build":"Generate Portfolio",children:e.jsx(A,{size:20,className:"group-hover:translate-x-0.5 transition-transform"})})})}),e.jsxs("div",{className:"mt-4 flex items-center justify-center gap-6 text-xs text-gray-400 font-medium",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(z,{size:12})," HTML/CSS/JS"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(se,{size:12})," React/Vue"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx(H,{size:12})," Resumes (PDF/DOCX)"]})]})]})}),I(),e.jsx("p",{className:"mt-16 text-center text-gray-500 dark:text-gray-600 text-sm",children:"Powered by Gemini Cloud â€¢ Generates layout, copy, and themes"})]})]})};export{Me as default};
