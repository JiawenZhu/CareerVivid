import{j as e,u as S,r as c,q as A,n as D,g as u,w as C,o as P,T as L,D as E,f as T}from"./main-Bi0Ei0w3.js";import{S as M}from"./share-2-5k-1k_RB.js";import{U as b}from"./users-DagC7-ml.js";import{A as y}from"./award-BNfQ991F.js";import{M as _}from"./monitor-BNQ-AdM8.js";import{Z as $}from"./zap-BQ5sSLdF.js";import{D as R}from"./download-D6SFpw_f.js";import{A as q}from"./arrow-left-TCHtPuDE.js";import{S as O}from"./shield-D8jVxe4m.js";import{E as F}from"./external-link-neXkVJuu.js";import{C as z}from"./check-B3yF-HgQ.js";import{C as G}from"./copy-Ctg5viPO.js";import{S as I}from"./search-81kCQAS9.js";import{C as U}from"./calendar-CutJ-oMs.js";const Y=()=>{const s=[{icon:e.jsx(M,{className:"w-6 h-6 text-white"}),title:"1. Share Your Link",description:"Copy your unique referral link below and share it with your students via email or LMS.",color:"bg-blue-500"},{icon:e.jsx(b,{className:"w-6 h-6 text-white"}),title:"2. Students Join",description:"Students sign up using your link and automatically get a 1-Month Free Premium Trial.",color:"bg-purple-500"},{icon:e.jsx(y,{className:"w-6 h-6 text-white"}),title:"3. Track Success",description:"Monitor their progress and grant extensions directly from this dashboard.",color:"bg-green-500"}],n=[{icon:e.jsx(_,{className:"w-5 h-5 text-blue-600"}),title:"Real-time Tracking",description:"See exactly which students have activated their accounts."},{icon:e.jsx($,{className:"w-5 h-5 text-purple-600"}),title:"Instant Premium",description:"No manual codes needed. The link handles everything."},{icon:e.jsx(R,{className:"w-5 h-5 text-green-600"}),title:"Resume Export",description:"Students can export unlimited professional resumes."},{icon:e.jsx(y,{className:"w-5 h-5 text-orange-600"}),title:"AI Interview Prep",description:"Access to our advanced mock interview agents."}];return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.map((t,d)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 relative overflow-hidden group hover:shadow-md transition-all",children:[e.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${t.color}`}),e.jsx("div",{className:`w-12 h-12 rounded-lg ${t.color} flex items-center justify-center mb-4 shadow-lg group-hover:scale-110 transition-transform`,children:t.icon}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed",children:t.description})]},d))}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-800/50 rounded-xl p-8 border border-blue-100 dark:border-gray-700",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Why use the Partner Portal?"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Empower your students with industry-leading tools."})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((t,d)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white/60 dark:bg-gray-900/40 rounded-lg backdrop-blur-sm border border-white/20 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-white dark:bg-gray-800 rounded-md shadow-sm shrink-0",children:t.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:t.title}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 leading-snug",children:t.description})]})]},d))})]})]})},ie=()=>{const{userProfile:s,loading:n}=S(),[t,d]=c.useState([]),[f,j]=c.useState(!0),[m,g]=c.useState(!1),[x,N]=c.useState("");c.useEffect(()=>{const r=async()=>{if(s?.uid)try{const a=A(D(u,"users"),C("academicPartnerId","==",s.uid)),l=(await P(a)).docs.map(o=>o.data());d(l)}catch(a){console.error("Error fetching students:",a)}finally{j(!1)}};!n&&s?.role==="academic_partner"&&r()},[s,n]);const k=()=>{if(!s?.referralCode)return;const r=`https://careervivid.app/auth?ref=${s.referralCode}`;navigator.clipboard.writeText(r),g(!0),setTimeout(()=>g(!1),2e3)},w=async(r,a)=>{if(window.confirm(`Grant specific 1-month premium extension to ${a}?`))try{const i=L.fromDate(new Date(Date.now()+2592e6));await E(T(u,"users",r),{plan:"pro_sprint",stripeSubscriptionStatus:null,expiresAt:i}),d(l=>l.map(o=>o.uid===r?{...o,plan:"pro_sprint",expiresAt:i,stripeSubscriptionStatus:null}:o)),alert("Access granted successfully.")}catch(i){console.error("Error granting access:",i),alert("Failed to grant access. You might not have permission to modify this user.")}};if(n)return e.jsx("div",{className:"p-10 text-center",children:"Loading..."});if(s?.role!=="academic_partner")return e.jsxs("div",{className:"p-10 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-red-600",children:"Access Denied"}),e.jsx("p",{children:"You do not have the Academic Partner role."})]});const h=t.filter(r=>r.email.toLowerCase().includes(x.toLowerCase())||r.uid.includes(x)),v=`https://careervivid.app/signup?ref=${s.referralCode||"ERROR_NO_CODE"}`;return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("a",{href:"/dashboard",title:"Back to Dashboard",className:"text-gray-500 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:e.jsx(q,{size:24})}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(O,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Academic Partner Portal"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your student licenses and track usage."})]})]}),e.jsx(Y,{}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"Student Onboarding Link"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["Share this unique link with your students. Anyone who signs up using this link will automatically receive a ",e.jsx("strong",{children:"1-Month Free Premium Trial"}),"."]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("code",{className:"flex-1 p-4 bg-gray-100 dark:bg-gray-950 rounded-lg border border-gray-200 dark:border-gray-800 font-mono text-sm break-all",children:v}),e.jsxs("button",{onClick:k,className:`px-6 py-2 rounded-lg font-semibold transition-all flex items-center gap-2 ${m?"bg-green-600 text-white":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:[m?e.jsx(z,{size:20}):e.jsx(G,{size:20}),m?"Copied":"Copy"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"Manage Users (",t.length,")"]}),e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search students...",value:x,onChange:r=>N(r.target.value),className:"pl-9 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),f?e.jsx("div",{className:"text-center py-10 text-gray-500",children:"Loading student data..."}):h.length===0?e.jsx("div",{className:"text-center py-10 bg-gray-50 dark:bg-gray-900/50 rounded-lg dashed border-2 border-gray-200 dark:border-gray-800",children:e.jsx("p",{className:"text-gray-500",children:"No students found yet. Share your link to get started!"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("th",{className:"py-3 px-4 font-medium",children:"Student Name / Email"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Joined Date"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Plan Status"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Expires At"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:h.map(r=>{const a=r.expiresAt?.toDate?r.expiresAt.toDate():null,i=a?a<new Date:!1,l=(r.plan==="pro_monthly"||r.plan==="pro_sprint")&&!i,o=!a&&r.promotions?.isPremium,p=l||o;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:r.email}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 font-mono",children:[r.uid.slice(0,8),"..."]})]}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-300",children:r.createdAt?.toDate?r.createdAt.toDate().toLocaleDateString():"N/A"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p&&!i?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-400"}`,children:p&&!i?"Active Premium":"Free / Expired"})}),e.jsx("td",{className:"py-3 px-4 text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3 text-gray-400"}),a?a.toLocaleDateString():"N/A"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("button",{onClick:()=>w(r.uid,r.email),className:"text-sm font-semibold text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors",children:"Grant Access"})})]},r.uid)})})]})})]})]})})};export{ie as default};
