import{u as T,r as p,o as f,j as e}from"./main-BEc7sVU2.js";import{a as S,u as E,p as N,c as P}from"./jobService-DkL2qb1A.js";import{L as J}from"./Logo-BDxZX0-1.js";import{A as D}from"./arrow-left-jQ4_17tq.js";import{S as A}from"./save-DuHFw_gZ.js";import{E as z}from"./eye-DBT7NYFb.js";import{X as b}from"./x-CgpMcjbW.js";import{P as u}from"./plus-BybH-_bu.js";const F=({jobId:n})=>{const{currentUser:c,userProfile:h}=T(),[w,v]=p.useState(!1),[y,j]=p.useState(!1),[t,o]=p.useState({companyName:"",jobTitle:"",department:"",location:"",locationType:"remote",employmentType:"full-time",description:"",responsibilities:[""],requirements:[""],niceToHave:[""],salaryMin:void 0,salaryMax:void 0,salaryCurrency:"USD",benefits:[""],status:"draft"});p.useEffect(()=>{const r=h?.roles?.includes("business_partner")||h?.role==="business_partner";if(!c||!r){f("/");return}n&&C()},[c,h,n]);const C=async()=>{if(n){v(!0);try{const r=await S(n);r&&o(r)}catch(r){console.error("Error loading job:",r),alert("Failed to load job posting")}finally{v(!1)}}},l=(r,a)=>{o(s=>({...s,[r]:a}))},g=(r,a,s)=>{const i=[...t[r]||[]];i[a]=s,o(d=>({...d,[r]:i}))},x=r=>{const a=[...t[r]||[],""];o(s=>({...s,[r]:a}))},m=(r,a)=>{const s=(t[r]||[]).filter((i,d)=>d!==a);o(i=>({...i,[r]:s}))},k=async(r=!1)=>{if(c){if(!t.jobTitle||!t.companyName){alert("Please fill in required fields: Job Title and Company Name");return}j(!0);try{const a={...t,hrUserId:c.uid,responsibilities:(t.responsibilities||[]).filter(i=>i.trim()),requirements:(t.requirements||[]).filter(i=>i.trim()),niceToHave:(t.niceToHave||[]).filter(i=>i.trim()),benefits:(t.benefits||[]).filter(i=>i.trim())},s=Object.fromEntries(Object.entries(a).filter(([i,d])=>d!==void 0));if(n)await E(n,s),r&&await N(n),alert("Job posting updated successfully!");else{const i=await P(s);r&&await N(i),alert("Job posting created successfully!"),f("/business-partner/dashboard")}}catch(a){console.error("Error saving job:",a);const s=a instanceof Error?a.message:"Unknown error";alert(`Failed to save job posting: ${s}`)}finally{j(!1)}}};return w?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[e.jsx("header",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>f("/business-partner/dashboard"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(D,{size:20})}),e.jsxs("a",{href:"/",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-8 w-8"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"CareerVivid"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>k(!1),disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[e.jsx(A,{size:16}),y?"Saving...":"Save Draft"]}),e.jsxs("button",{onClick:()=>k(!0),disabled:y,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:[e.jsx(z,{size:16}),"Publish"]})]})]})})}),e.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 p-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-8",children:n?"Edit Job Posting":"Create New Job Posting"}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.companyName,onChange:r=>l("companyName",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., CareerVivid Inc."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Job Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.jobTitle,onChange:r=>l("jobTitle",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., Senior Software Engineer"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Department"}),e.jsx("input",{type:"text",value:t.department,onChange:r=>l("department",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., Engineering"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location"}),e.jsx("input",{type:"text",value:t.location,onChange:r=>l("location",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., San Francisco, CA"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Location Type"}),e.jsxs("select",{value:t.locationType,onChange:r=>l("locationType",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",children:[e.jsx("option",{value:"remote",children:"Remote"}),e.jsx("option",{value:"hybrid",children:"Hybrid"}),e.jsx("option",{value:"onsite",children:"On-site"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Employment Type"}),e.jsxs("select",{value:t.employmentType,onChange:r=>l("employmentType",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",children:[e.jsx("option",{value:"full-time",children:"Full-time"}),e.jsx("option",{value:"part-time",children:"Part-time"}),e.jsx("option",{value:"contract",children:"Contract"}),e.jsx("option",{value:"internship",children:"Internship"})]})]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Job Description"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:r=>l("description",r.target.value),rows:6,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"Provide a detailed description of the role..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Responsibilities"}),(t.responsibilities||[""]).map((r,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:s=>g("responsibilities",a,s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., Design and implement new features"}),(t.responsibilities||[]).length>1&&e.jsx("button",{onClick:()=>m("responsibilities",a),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(b,{size:20})})]},a)),e.jsxs("button",{onClick:()=>x("responsibilities"),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 mt-2",children:[e.jsx(u,{size:16}),"Add Responsibility"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Requirements"}),(t.requirements||[""]).map((r,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:s=>g("requirements",a,s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., 5+ years of experience in React"}),(t.requirements||[]).length>1&&e.jsx("button",{onClick:()=>m("requirements",a),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(b,{size:20})})]},a)),e.jsxs("button",{onClick:()=>x("requirements"),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 mt-2",children:[e.jsx(u,{size:16}),"Add Requirement"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nice to Have (Optional)"}),(t.niceToHave||[""]).map((r,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:s=>g("niceToHave",a,s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., Experience with TypeScript"}),(t.niceToHave||[]).length>1&&e.jsx("button",{onClick:()=>m("niceToHave",a),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(b,{size:20})})]},a)),e.jsxs("button",{onClick:()=>x("niceToHave"),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 mt-2",children:[e.jsx(u,{size:16}),"Add Nice to Have"]})]})]})]}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Compensation & Benefits"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Salary Min (Optional)"}),e.jsx("input",{type:"number",value:t.salaryMin||"",onChange:r=>l("salaryMin",r.target.value?Number(r.target.value):void 0),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"80000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Salary Max (Optional)"}),e.jsx("input",{type:"number",value:t.salaryMax||"",onChange:r=>l("salaryMax",r.target.value?Number(r.target.value):void 0),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"120000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Currency"}),e.jsxs("select",{value:t.salaryCurrency,onChange:r=>l("salaryCurrency",r.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"CAD",children:"CAD"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Benefits"}),(t.benefits||[""]).map((r,a)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:s=>g("benefits",a,s.target.value),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-600 focus:border-transparent",placeholder:"e.g., Health insurance, 401(k) matching"}),(t.benefits||[]).length>1&&e.jsx("button",{onClick:()=>m("benefits",a),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(b,{size:20})})]},a)),e.jsxs("button",{onClick:()=>x("benefits"),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 mt-2",children:[e.jsx(u,{size:16}),"Add Benefit"]})]})]})]})]})})]})};export{F as default};
