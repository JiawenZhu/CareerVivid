import{r as l,ab as O,ac as $}from"./main-D7bwdUQx.js";function j(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];m(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const I={};function y(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];m(e[0])&&I[e[0]]||(m(e[0])&&(I[e[0]]=new Date),j(...e))}const R=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},v=(n,e,t)=>{n.loadNamespaces(e,R(n,t))},E=(n,e,t,o)=>{m(t)&&(t=[t]),t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,R(n,o))},A=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const c=(C,h)=>{const a=e.services.backendConnector.state[`${C}|${h}`];return a===-1||a===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!c(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(o,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||c(o,n)&&(!i||c(s,n)))},F=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(y("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:t.lng,precheck:(i,s)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,n))return!1}}):A(n,e,t)},m=n=>typeof n=="string",M=n=>typeof n=="object"&&n!==null,P=l.createContext();class U{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces=()=>Object.keys(this.usedNamespaces)}const B=(n,e)=>{const t=l.useRef();return l.useEffect(()=>{t.current=n},[n,e]),t.current},z=(n,e,t,o)=>n.getFixedT(e,t,o),J=(n,e,t,o)=>l.useCallback(z(n,e,t,o),[n,e,t,o]),H=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:t}=e,{i18n:o,defaultNS:i}=l.useContext(P)||{},s=t||o||$();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new U),!s){y("You will need to pass in an i18next instance by using initReactI18next");const r=(d,f)=>m(f)?f:M(f)&&m(f.defaultValue)?f.defaultValue:Array.isArray(d)?d[d.length-1]:d,u=[r,{},!1];return u.t=r,u.i18n={},u.ready=!1,u}s.options.react&&s.options.react.wait!==void 0&&y("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...O(),...s.options.react,...e},{useSuspense:C,keyPrefix:h}=c;let a=i||s.options&&s.options.defaultNS;a=m(a)?[a]:a||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(a);const g=(s.isInitialized||s.initializedStoreOnce)&&a.every(r=>F(r,s,c)),k=J(s,e.lng||null,c.nsMode==="fallback"?a:a[0],h),L=()=>k,x=()=>z(s,e.lng||null,c.nsMode==="fallback"?a:a[0],h),[S,N]=l.useState(L);let b=a.join();e.lng&&(b=`${e.lng}${b}`);const T=B(b),p=l.useRef(!0);l.useEffect(()=>{const{bindI18n:r,bindI18nStore:u}=c;p.current=!0,!g&&!C&&(e.lng?E(s,e.lng,a,()=>{p.current&&N(x)}):v(s,a,()=>{p.current&&N(x)})),g&&T&&T!==b&&p.current&&N(x);const d=()=>{p.current&&N(x)};return r&&s&&s.on(r,d),u&&s&&s.store.on(u,d),()=>{p.current=!1,r&&s&&r.split(" ").forEach(f=>s.off(f,d)),u&&s&&u.split(" ").forEach(f=>s.store.off(f,d))}},[s,b]),l.useEffect(()=>{p.current&&g&&N(L)},[s,h,g]);const w=[S,s,g];if(w.t=S,w.i18n=s,w.ready=g,g||!g&&!C)return w;throw new Promise(r=>{e.lng?E(s,e.lng,a,()=>r()):v(s,a,()=>r())})};export{H as u};
